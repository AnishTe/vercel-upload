(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[387],{2737:(e,r,t)=>{Promise.resolve().then(t.bind(t,4501))},6323:(e,r,t)=>{"use strict";t.d(r,{$:()=>y,EF:()=>m,Fj:()=>p,Ix:()=>c,T4:()=>u,eq:()=>j,iD:()=>d,id:()=>h,j3:()=>g,jq:()=>x,oV:()=>b,ri:()=>f,yF:()=>v});var s=t(2651),n=t(9208);let a="https://api.pesb.co.in:5500/PESB",l=()=>{let e=n.A.get("currentUserId"),r=n.A.get("userToken_".concat(e));return{clientId:e,token:r}},i=()=>{let e=n.A.get("currentUserId"),r=n.A.get("userToken_".concat(e));return{username:e,token:r}},o=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={...r};t&&(n={...l(),...n});let a=i();return s.A.post(e,n,{headers:{"Content-Type":"application/json",Accept:"*/*",...a}})},d=(e,r)=>s.A.post("".concat(a,"/auth/login"),{clientId:e,password:r}),c=e=>s.A.post("".concat(a,"/auth/getloginotp"),e),u=e=>s.A.post("".concat(a,"/auth/loginWithOtp"),e),m=()=>o("".concat(a,"/auth/getActiveSessions"),{},!0),f=e=>o("".concat(a,"/auth/logout"),e,!0),p=()=>o("".concat(a,"/limit/getUtradeLimit"),{},!0),x=e=>o("".concat(a,"/limit/setUtradeLimit"),e,!0),h=()=>o("".concat(a,"/report/client_fa_summary"),{},!0),g=e=>o("".concat(a,"/report/ledger"),e,!0),b=e=>o("".concat(a,"/report/cr_sauda"),e,!0),j=e=>o("".concat(a,"/report/global"),e,!0),v=e=>o("".concat(a,"/report/annual_p_l"),e,!0),y=async()=>o("".concat(a,"/report/holding_new"),{},!0)},4501:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var s=t(5155),n=t(2115),a=t(9606),l=t(2679),i=t(3415),o=t(6046),d=t(814),c=t(9208),u=t(3312),m=t(9749),f=t(4870),p=t(3900),x=t(8629),h=t(1567);let g=x.bL,b=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(x.B8,{ref:r,className:(0,h.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...n})});b.displayName=x.B8.displayName;let j=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(x.l9,{ref:r,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...n})});j.displayName=x.l9.displayName;let v=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(x.UC,{ref:r,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});v.displayName=x.UC.displayName;var y=t(738),w=t(2598),N=t(6323);let I=i.Ik({clientId:i.Yj().min(1,"Client ID is required"),password:i.Yj().min(6,"Password must be at least 6 characters").nonempty("Password is required")}),R=i.Ik({clientId:i.Yj().min(1,"Client ID is required"),mobileNumber:i.Yj().min(10,"Mobile number must be 10 digits").max(10,"Mobile number must be 10 digits").regex(/^\d{10}$/,"Mobile number must be 10 digits"),otp:i.Yj().optional()});function C(){let e=(0,o.useRouter)(),[r,t]=(0,n.useState)(!1),[i,x]=(0,n.useState)(!1),[h,C]=(0,n.useState)(!1),[k,A]=(0,n.useState)("password"),_=(0,a.mN)({resolver:(0,l.u)(I),defaultValues:{clientId:"",password:""}}),T=(0,a.mN)({resolver:(0,l.u)(R),defaultValues:{clientId:"",mobileNumber:"",otp:""}}),S=async e=>{x(!0);try{let r=await (0,N.iD)(e.clientId,e.password),t=null==r?void 0:r.data;"success"===t.status?D(t,e.clientId):d.oR.error(t.message)}catch(e){d.oR.error(e.message||"Login failed.")}finally{x(!1)}},F=async e=>{x(!0);try{let r=await (0,N.Ix)({clientId:e.clientId,mobile:e.mobileNumber}),t=null==r?void 0:r.data;if("success"===t.status)d.oR.success("OTP sent successfully!"),C(!0);else throw Error(t.message||"Failed to send OTP")}catch(e){d.oR.error(e.message||"An error occurred")}finally{x(!1)}},P=async e=>{if(h){x(!0);try{let r=await (0,N.T4)({clientId:e.clientId,otp:e.otp}),t=null==r?void 0:r.data;if("success"===t.status)D(t,e.clientId);else throw Error(t.message||"Invalid OTP")}catch(e){d.oR.error(e.message||"An error occurred")}finally{x(!1)}}else await F(e)},D=(r,t)=>{let s=null==r?void 0:r.token;if(!s)return d.oR.error("Invalid Token!");c.A.set("userToken_".concat(t),s,{expires:7}),c.A.set("currentUserId",t,{expires:7}),c.A.set("userDetails_".concat(t),JSON.stringify(r.userDetails),{expires:7}),d.oR.success(r.message||"Login Successful!"),setTimeout(()=>e.push("/dashboard"),1e3)};return(0,n.useEffect)(()=>{(()=>{let r=c.A.get("currentUserId"),t=r?c.A.get("userToken_".concat(r)):null;r&&t&&e.push("/dashboard")})()},[e]),(0,s.jsx)("div",{className:"container flex h-screen items-center justify-center",children:(0,s.jsxs)(m.Zp,{className:"w-[550px]",children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsx)(m.ZB,{children:"Sign In"}),(0,s.jsx)(m.BT,{children:"Choose your login method"})]}),(0,s.jsx)(m.Wu,{children:(0,s.jsxs)(g,{defaultValue:"password",onValueChange:e=>A(e),children:[(0,s.jsxs)(b,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(j,{value:"password",children:"Password"}),(0,s.jsx)(j,{value:"otp",children:"OTP"})]}),(0,s.jsx)(v,{value:"password",children:(0,s.jsx)(f.lV,{..._,children:(0,s.jsxs)("form",{onSubmit:_.handleSubmit(S),className:"space-y-4",children:[(0,s.jsx)(f.zB,{control:_.control,name:"clientId",render:e=>{let{field:r}=e;return(0,s.jsxs)(f.eI,{children:[(0,s.jsx)(f.lR,{children:"Client ID"}),(0,s.jsx)(f.MJ,{children:(0,s.jsx)(p.p,{placeholder:"Enter your Client ID",...r})}),(0,s.jsx)(f.C5,{})]})}}),(0,s.jsx)(f.zB,{control:_.control,name:"password",render:e=>{let{field:n}=e;return(0,s.jsxs)(f.eI,{children:[(0,s.jsx)(f.lR,{children:"Password"}),(0,s.jsx)(f.MJ,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(p.p,{type:r?"text":"password",placeholder:"Enter your Password",...n}),(0,s.jsx)(u.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(e=>!e),children:r?(0,s.jsx)(y.A,{className:"h-4 w-4"}):(0,s.jsx)(w.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)(f.C5,{})]})}}),(0,s.jsx)(u.$,{type:"submit",className:"w-full",disabled:i,children:i?"Signing In...":"Sign In"})]})})}),(0,s.jsx)(v,{value:"otp",children:(0,s.jsx)(f.lV,{...T,children:(0,s.jsxs)("form",{onSubmit:T.handleSubmit(P),className:"space-y-4",children:[(0,s.jsx)(f.zB,{control:T.control,name:"clientId",render:e=>{let{field:r}=e;return(0,s.jsxs)(f.eI,{children:[(0,s.jsx)(f.lR,{children:"Client ID"}),(0,s.jsx)(f.MJ,{children:(0,s.jsx)(p.p,{placeholder:"Enter your Client ID",...r})}),(0,s.jsx)(f.C5,{})]})}}),(0,s.jsx)(f.zB,{control:T.control,name:"mobileNumber",render:e=>{let{field:r}=e;return(0,s.jsxs)(f.eI,{children:[(0,s.jsx)(f.lR,{children:"Mobile Number"}),(0,s.jsx)(f.MJ,{children:(0,s.jsx)(p.p,{placeholder:"Enter your Mobile Number",...r})}),(0,s.jsx)(f.C5,{})]})}}),h&&(0,s.jsx)(f.zB,{control:T.control,name:"otp",render:e=>{let{field:r}=e;return(0,s.jsxs)(f.eI,{children:[(0,s.jsx)(f.lR,{children:"OTP"}),(0,s.jsx)(f.MJ,{children:(0,s.jsx)(p.p,{placeholder:"Enter the OTP",...r})}),(0,s.jsx)(f.C5,{})]})}}),(0,s.jsx)(u.$,{type:"submit",className:"w-full",disabled:i,children:i?"Loading...":h?"Sign In":"Send OTP"})]})})})]})})]})})}},3312:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var s=t(5155),n=t(2115),a=t(2317),l=t(1027),i=t(1567);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,r)=>{let{className:t,variant:n,size:l,asChild:d=!1,...c}=e,u=d?a.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:t})),ref:r,...c})});d.displayName="Button"},9749:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>u});var s=t(5155),n=t(2115),a=t(1567);let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow mt-7",t),...n})});l.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col md:flex-row md:items-center md:justify-between p-6 border-b bg-blue-500 mx-3 -mt-6 px-8 pt-4 pb-4 rounded-xl shadow-lg text-white space-y-4 md:space-y-0",t),...n})});i.displayName="CardHeader";let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("font-semibold leading-none tracking-tight",t),...n})});o.displayName="CardTitle";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},4870:(e,r,t)=>{"use strict";t.d(r,{C5:()=>g,MJ:()=>h,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>u});var s=t(5155),n=t(2115),a=t(2317),l=t(9606),i=t(1567),o=t(8986);let d=l.Op,c=n.createContext({}),u=e=>{let{...r}=e;return(0,s.jsx)(c.Provider,{value:{name:r.name},children:(0,s.jsx)(l.xI,{...r})})},m=()=>{let e=n.useContext(c),r=n.useContext(f),{getFieldState:t,formState:s}=(0,l.xW)(),a=t(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},f=n.createContext({}),p=n.forwardRef((e,r)=>{let{className:t,...a}=e,l=n.useId();return(0,s.jsx)(f.Provider,{value:{id:l},children:(0,s.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",t),...a})})});p.displayName="FormItem";let x=n.forwardRef((e,r)=>{let{className:t,...n}=e,{error:a,formItemId:l}=m();return(0,s.jsx)(o.J,{ref:r,className:(0,i.cn)(a&&"text-destructive",t),htmlFor:l,...n})});x.displayName="FormLabel";let h=n.forwardRef((e,r)=>{let{...t}=e,{error:n,formItemId:l,formDescriptionId:i,formMessageId:o}=m();return(0,s.jsx)(a.DX,{ref:r,id:l,"aria-describedby":n?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!n,...t})});h.displayName="FormControl",n.forwardRef((e,r)=>{let{className:t,...n}=e,{formDescriptionId:a}=m();return(0,s.jsx)("p",{ref:r,id:a,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",t),...n})}).displayName="FormDescription";let g=n.forwardRef((e,r)=>{let{className:t,children:n,...a}=e,{error:l,formMessageId:o}=m(),d=l?String(null==l?void 0:l.message):n;return d?(0,s.jsx)("p",{ref:r,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",t),...a,children:d}):null});g.displayName="FormMessage"},3900:(e,r,t)=>{"use strict";t.d(r,{p:()=>l});var s=t(5155),n=t(2115),a=t(1567);let l=n.forwardRef((e,r)=>{let{className:t,type:n,...l}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...l})});l.displayName="Input"},8986:(e,r,t)=>{"use strict";t.d(r,{J:()=>d});var s=t(5155),n=t(2115),a=t(6195),l=t(1027),i=t(1567);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,s.jsx)(a.b,{ref:r,className:(0,i.cn)(o(),t),...n})});d.displayName=a.b.displayName},1567:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(3463),n=t(9795);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[247,814,794,518,687,441,517,358],()=>r(2737)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[354],{102:(e,t,a)=>{Promise.resolve().then(a.bind(a,949))},949:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var l=a(5155),s=a(2115),r=a(9749),n=a(7081);let i=[{accessorFn:e=>"".concat(e.DP_ID).concat(e.BO_ID),header:"BOID"},{accessorKey:"SCRIP_NAME",header:"Scrip Name"},{accessorKey:"ISIN",header:"ISIN"},{accessorKey:"SCRIP_SYMBOL",header:"Scrip Symbol"},{accessorKey:"SCRIP_VALUE",header:"Closing Price",cell:e=>{let{row:t}=e,a=parseFloat(t.getValue("SCRIP_VALUE"));return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a)}},{accessorKey:"NET",header:"Quantity"},{accessorKey:"AMOUNT",header:"Amount",cell:e=>{let{row:t}=e,a=parseFloat(t.getValue("AMOUNT"));return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a)}},{accessorKey:"PERCENT_HOLD",header:"Percent of Hold",cell:e=>{let{row:t}=e,a=parseFloat(t.getValue("PERCENT_HOLD"));return"".concat(a.toFixed(2),"%")}}];var o=a(3404),c=a(1541),d=a(3092),u=a(1344),h=a(6323),m=a(7328),x=a(6472),g=a(5781);function p(){let[e,t]=(0,s.useState)(!0),[a,g]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),[N,C]=(0,s.useState)([]),[b,j]=(0,s.useState)(0),[E,w]=(0,s.useState)(!1),[R,y]=(0,s.useState)([]),S=[{accessorKey:"scripName",header:"Scrip Name",cell:e=>{let{row:t}=e;return t.original.SCRIP_NAME}},{accessorKey:"percentageOfHold",header:"Percentage of Hold",cell:e=>{let{row:t}=e;return t.original.PERCENT_HOLD}},{accessorKey:"quantity",header:"Quantity",cell:e=>{let{row:t}=e;return t.original.NET}},{accessorKey:"price",header:"Price",cell:e=>{let{row:t}=e;return t.original.SCRIP_VALUE}},{accessorKey:"amount",header:"Amount",cell:e=>{let{row:t}=e;return t.original.AMOUNT}}];(0,s.useEffect)(()=>{(async()=>{t(!0);try{let e=await (0,h.$)();if(!(0,m.k)(e)){f(!0);return}if(e&&e.data&&e.data.data)try{let t=JSON.parse(e.data.data);if("True"===t.Success&&t["Success Description"]){let e=t["Success Description"];C(e)}else throw Error(t["Error Description"]||"Failed to fetch Holdings data.")}catch(e){g("Error parsing data: "+e.message)}else throw Error("Invalid API response format.")}catch(e){g(e.message||"An error occurred while fetching data.")}finally{t(!1)}})()},[]),(0,s.useEffect)(()=>{if(N.length>0){var e;let t=parseFloat((null===(e=N[0])||void 0===e?void 0:e.TOT_AMT)||0);isNaN(t)||t===b||j(t)}},[N,b]);let{top3:v,remaining:F,tail:P,top3Rows:T,tailRows:D,remainingRows:_}=(()=>{if(!N||0===N.length)return{top3:0,remaining:0,tail:0,top3Rows:[],tailRows:[],remainingRows:[]};let e=[...N.map(e=>({...e,PERCENT_HOLD:!e.PERCENT_HOLD||isNaN(parseFloat(e.PERCENT_HOLD))?0:parseFloat(e.PERCENT_HOLD)}))].sort((e,t)=>t.PERCENT_HOLD-e.PERCENT_HOLD),t=e.slice(0,3),a=t.reduce((e,t)=>e+parseFloat(t.PERCENT_HOLD),0),l=e.filter(e=>1>=parseFloat(e.PERCENT_HOLD)),s=l.reduce((e,t)=>e+parseFloat(t.PERCENT_HOLD),0),r=e.filter(e=>!t.includes(e)&&!l.includes(e)&&parseFloat(e.PERCENT_HOLD)>1);return{top3:a,remaining:r.reduce((e,t)=>e+parseFloat(t.PERCENT_HOLD),0),tail:s,top3Rows:t,tailRows:l,remainingRows:r}})(),{labels:k,data:O,colors:H}=(()=>{if(!N||0===N.length)return{labels:[],data:[],colors:[]};let e=e=>{let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?0:parseFloat(t.toFixed(2))},t=[...N.map(t=>({...t,PERCENT_HOLD:e(t.PERCENT_HOLD)}))].sort((t,a)=>e(a.PERCENT_HOLD)-e(t.PERCENT_HOLD)),a=t.filter(t=>1>=e(t.PERCENT_HOLD)).reduce((t,a)=>t+e(a.PERCENT_HOLD),0),l=t.filter(t=>e(t.PERCENT_HOLD)>1),s=["#36A2EB","#FF6384","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF","#8A2BE2","#ADFF2F","#FF4500","#FFD700"],r=l.map(e=>e.SCRIP_NAME||"Unnamed Stock"),n=l.map(t=>e(t.PERCENT_HOLD)),i=l.map((e,t)=>s[t%s.length]);return a>0&&(r.push("Tail Stocks"),n.push(e(a)),i.push("#FF0000")),{labels:r,data:n,colors:i}})();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)(r.Zp,{children:[(0,l.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ZB,{children:"Holdings"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-sm ",children:"Total Value:"}),e?(0,l.jsx)(n.E,{className:"h-4 w-[100px]"}):(0,l.jsx)("span",{className:"font-bold",children:(0,l.jsx)(c.A,{animateOn:"view",revealDirection:"center",characters:"123456789",text:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(b)})})]})]}),(0,l.jsx)(r.Wu,{children:e?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(n.E,{className:"h-4 w-full"}),(0,l.jsx)(n.E,{className:"h-4 w-full"}),(0,l.jsx)(n.E,{className:"h-4 w-full"})]}):a?(0,l.jsx)("div",{className:"text-center text-red-500",children:a}):(0,l.jsx)(o.b,{columns:i,data:N})})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)(r.Zp,{children:[(0,l.jsx)(r.aR,{children:(0,l.jsx)(r.ZB,{children:"Holdings Distribution"})}),(0,l.jsx)(r.Wu,{children:e?(0,l.jsx)(n.E,{className:"h-[350px] w-full md:h-[400px]"}):(0,l.jsx)("div",{className:"relative h-[350px] w-full md:h-[400px]",children:(0,l.jsx)(x.Fq,{data:{labels:["Top 3 Holdings","Remaining","Tail Holdings"],datasets:[{label:"Holdings Distribution",data:[v,F,P],backgroundColor:["#36A2EB","#FF6384","#FFCE56"],hoverOffset:4}]},options:{responsive:!0,plugins:{tooltip:{callbacks:{label:function(e){let t=e.raw.toFixed(2);return"".concat(e.label,": ").concat(t,"%")}}},legend:{display:!0,position:"top",labels:{generateLabels:function(e){let t=e.data;return t.labels.map((a,l)=>{let s=t.datasets[0].data[l],r=e.getDatasetMeta(0).data[l].hidden;return{text:"".concat(a,": ").concat(s.toFixed(2),"%"),fillStyle:t.datasets[0].backgroundColor[l],strokeStyle:t.datasets[0].backgroundColor[l],lineWidth:0,index:l,hidden:r}})},font:{size:14},color:"#333",padding:10,usePointStyle:!0,boxWidth:12,filter:function(e){return e.hidden&&(e.fontStyle="italic",e.text="- ".concat(e.text)),!0}},onClick:function(e,t){let a=e.chart,l=t.index,s=a.getDatasetMeta(0);s.data[l].hidden=!s.data[l].hidden,a.update()}}},onClick:(e,t)=>{t.length>0&&(y({top3Rows:T,remainingRows:_,tailRows:D}[["top3Rows","remainingRows","tailRows"][t[0].index]]||[]),w(!0))}}})})})]}),(0,l.jsxs)(r.Zp,{children:[(0,l.jsx)(r.aR,{children:(0,l.jsx)(r.ZB,{children:"Stock-wise Distribution"})}),(0,l.jsx)(r.Wu,{children:e?(0,l.jsx)(n.E,{className:"h-[350px] w-full md:h-[400px]"}):(0,l.jsx)("div",{className:"relative h-[350px] w-full md:h-[450px]",children:(0,l.jsx)(x.Fq,{data:{labels:k,datasets:[{label:"Stock Wise Distribution",data:O,backgroundColor:H,hoverOffset:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"start",labels:{boxWidth:12,padding:10,font:{size:12},usePointStyle:!0,generateLabels:function(e){let t=e.data,a=e.ctx;return t.labels.map((l,s)=>{let r=t.datasets[0].data[s],n=e.getDatasetMeta(0).data[s].hidden,i=[],o="";return l.split(" ").forEach(e=>{let t=o+e+" ";a.measureText(t).width>120?(i.push(o.trim()),o=e+" "):o=t}),i.push(o.trim()),{text:"".concat(i.join("\n"),": ").concat(r.toFixed(2),"%"),fillStyle:t.datasets[0].backgroundColor[s],strokeStyle:t.datasets[0].backgroundColor[s],hidden:n,datasetIndex:0,index:s}})},color:"#333"},onClick:function(e,t,a){let l=a.chart,s=t.index,r=l.getDatasetMeta(0);r.data[s].hidden=!r.data[s].hidden,l.update()}},tooltip:{callbacks:{label:function(e){var t;let a=e.raw.toFixed(2),l=parseFloat((null===(t=N.find(t=>t.SCRIP_NAME===e.label))||void 0===t?void 0:t.AMOUNT)||0),s=new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2}).format(l);return"".concat(e.label,": ").concat(a,"% (â‚¹").concat(s,")")}}}},layout:{padding:{left:10,right:10}},onClick:(e,t)=>{if(t.length>0){let e;let a=k[t[0].index];(e="Tail Stocks"===a?D:N.filter(e=>e.SCRIP_NAME===a))&&e.length>0&&(y(e),w(!0))}}}})})})]})]})]})}),(0,l.jsx)(u.lG,{open:E,onOpenChange:w,children:(0,l.jsxs)(u.Cf,{className:"max-h-[80vh] overflow-y-auto",children:[(0,l.jsxs)(u.c7,{children:[(0,l.jsx)(u.L3,{children:"Holdings Chart Data"}),(0,l.jsx)(u.rr,{children:"Holdings Chart data that are available in selected section."})]}),(0,l.jsx)(o.b,{columns:S,data:R,showAllRows:!0})]})}),p&&(0,l.jsx)(m.B,{})]})}g.t1.register(g.Bs,g.m_,g.s$)},3404:(e,t,a)=>{"use strict";a.d(t,{b:()=>E});var l=a(5155),s=a(2115),r=a(9789),n=a(9083),i=a(1567);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",a),...s})})});o.displayName="Table";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",a),...s})});c.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});u.displayName="TableRow";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("th",{ref:t,className:(0,i.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})});h.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("td",{ref:t,className:(0,i.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...s})});m.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption";var x=a(7485),g=a(3900),p=a(3312),f=a(2291),N=a(1719),C=a(8435),b=a(3518),j=a(6967);function E(e){var t,a,i;let{columns:E,data:w,showAllRows:R=!1,filterColumn:y,filterPlaceholder:S="Filter...",selectableRows:v=!1,onSelectedRowsChange:F}=e,[P,T]=s.useState([]),[D,_]=s.useState([]),[k,O]=s.useState({}),[H,I]=s.useState({}),A=s.useMemo(()=>E.filter(e=>{if(e.conditionalColumn){for(let[t,a]of e.conditionalColumn)if(w.some(e=>a.some(a=>e[t]===a.value)))return!1}return!e.hidden}).map(e=>({...e})),[E,w]),L=(0,r.N4)({data:w,columns:v?[{id:"select",header:e=>{let{table:t}=e;return(0,l.jsx)(f.S,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:t}=e;return(0,l.jsx)(f.S,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1},...A]:A,onSortingChange:T,onColumnFiltersChange:_,getCoreRowModel:(0,n.HT)(),getPaginationRowModel:(0,n.kW)(),getSortedRowModel:(0,n.h5)(),getFilteredRowModel:(0,n.hM)(),onColumnVisibilityChange:O,onRowSelectionChange:I,state:{sorting:P,columnFilters:D,columnVisibility:k,rowSelection:H}});return s.useEffect(()=>{R?L.setPageSize(w.length):L.setPageSize(10)},[R,w.length,L]),s.useEffect(()=>{F&&F(Object.keys(H).map(e=>L.getRow(e).original))},[H,F,L]),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex items-center py-4",children:[y&&(0,l.jsx)(g.p,{placeholder:S,value:null!==(i=null===(t=L.getColumn(y))||void 0===t?void 0:t.getFilterValue())&&void 0!==i?i:"",onChange:e=>{var t;return null===(t=L.getColumn(y))||void 0===t?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"}),(0,l.jsxs)(x.rI,{children:[(0,l.jsx)(x.ty,{asChild:!0,children:(0,l.jsxs)(p.$,{variant:"outline",className:"ml-auto",children:["View Columns ",(0,l.jsx)(N.A,{className:"ml-2 h-4 w-4"})]})}),(0,l.jsx)(x.SQ,{align:"end",children:L.getAllColumns().filter(e=>e.getCanHide()).map(e=>(0,l.jsx)(x.hO,{className:"capitalize",checked:e.getIsVisible(),onCheckedChange:t=>e.toggleVisibility(!!t),children:e.id},e.id))})]})]}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(o,{children:[(0,l.jsx)(c,{children:L.getHeaderGroups().map(e=>(0,l.jsx)(u,{className:"sticky top-0 bg-background z-10",children:e.headers.map(e=>(0,l.jsx)(h,{className:"p-2 text-foreground",children:e.isPlaceholder?null:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,r.Kv)(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&(0,l.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>e.column.toggleSorting(),className:"ml-1 h-4 w-4 p-0",children:(0,l.jsx)(C.A,{className:"h-1 w-1"})})]})},e.id))},e.id))}),(0,l.jsx)(d,{children:(null===(a=L.getRowModel().rows)||void 0===a?void 0:a.length)?L.getRowModel().rows.map(e=>(0,l.jsx)(u,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,l.jsx)(m,{children:(0,r.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(u,{children:(0,l.jsx)(m,{colSpan:E.length,className:"h-24 text-center",children:"No results."})})})]})}),!R&&(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,l.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>L.previousPage(),disabled:!L.getCanPreviousPage(),children:(0,l.jsx)(b.A,{className:"h-4 w-4"})}),(0,l.jsx)(p.$,{variant:"outline",size:"sm",onClick:()=>L.nextPage(),disabled:!L.getCanNextPage(),children:(0,l.jsx)(j.A,{className:"h-4 w-4"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[647,247,814,794,176,42,802,759,76,92,441,517,358],()=>t(102)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{6414:(e,s,i)=>{Promise.resolve().then(i.bind(i,3183))},3183:(e,s,i)=>{"use strict";i.d(s,{LimitTransfer:()=>f});var r=i(5155),l=i(2115),t=i(9749),a=i(3900),n=i(3312),d=i(7081),c=i(3601),m=i(814);let h=(0,i(7401).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var o=i(3257),x=i(9063),u=i(7328),j=i(6323);function f(){let[e,s]=(0,l.useState)(!0),[i,f]=(0,l.useState)(!0),[p,g]=(0,l.useState)(null),[b,v]=(0,l.useState)(null),[y,N]=(0,l.useState)(null),[w,T]=(0,l.useState)(null),[L,C]=(0,l.useState)(0),[A,U]=(0,l.useState)(0),[S,k]=(0,l.useState)(""),[E,I]=(0,l.useState)(!1),[F,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{_(),D()},[]);let _=async()=>{f(!0);try{let e=await (0,j.id)();if(!(0,u.k)(e)){M(!0);return}let s=JSON.parse(e.data.data);if("True"===s.Success&&s["Success Description"]){let e=s["Success Description"];N(e),T(w)}else throw Error(s["Error Description"]||"Failed to fetch ledger data.")}catch(e){g(e.message||"An error occurred while fetching data.")}finally{f(!1)}},D=async()=>{s(!0);try{let e=await (0,j.Fj)();if(!(0,u.k)(e)){M(!0);return}if("success"===e.data.data.status)U(e.data.data.limit);else throw Error("Failed to fetch limit.")}catch(e){v(e.message||"An error occurred")}finally{s(!1)}};(0,l.useEffect)(()=>{if(y){let e=y.find(e=>"Ledger+Mrg+Coll"===e.TITAL||"Ledger+Mrg+Coll"===e.COCD);e&&C(parseFloat(e.AMOUNT)||0)}},[y]);let O=async()=>{I(!0);try{let e=await (0,j.jq)({updatedLimit:S});if(!(0,u.k)(e)){M(!0);return}if("success"===e.data.data.status)U(parseFloat(S)),k(""),m.oR.success("New Limit Set successfully!",{position:"top-right"});else throw Error("Failed to set limit.")}catch(e){m.oR.error(e.message||"An error occurred",{position:"top-right"})}finally{I(!1)}},B=["Associate Ledger","FD","Beneficiary","UnConcile Credit","Pending Receipt"],R=[...Array.isArray(y)?y.filter(e=>"Ledger+Mrg+Coll"!==e.TITAL&&!B.includes(e.TITAL)):[],...Array.isArray(y)?y.filter(e=>("Ledger+Mrg+Coll"===e.TITAL||"Ledger+Mrg+Coll"===e.COCD)&&!B.includes(e.TITAL)):[]];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(t.Zp,{children:[(0,r.jsx)(t.aR,{children:(0,r.jsx)(t.ZB,{children:"UTrade Limit Transfer"})}),(0,r.jsx)(t.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[e?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d.E,{className:"h-8 w-full"}),(0,r.jsx)(d.E,{className:"h-8 w-full"}),(0,r.jsx)(d.E,{className:"h-10 w-full"})]}):b?(0,r.jsx)("div",{className:"text-center text-red-500",children:b}):(0,r.jsxs)("div",{className:"space-y-4 p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"Current UTrade Limit:"}),(0,r.jsx)(c.Bc,{children:(0,r.jsxs)(c.m_,{children:[(0,r.jsx)(c.k$,{children:(0,r.jsx)(h,{size:16})}),(0,r.jsx)(c.ZI,{className:"min-w-[50px] max-w-[250px] p-4 m-2 bg-gray-800 text-white rounded-md shadow-md",children:(0,r.jsx)("p",{className:"text-sm",children:"The maximum limit previously set by the client for transferring funds to UTrade from their available limit."})})]})})]}),(0,r.jsx)("span",{className:"font-bold",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(A)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"Update UTrade Limit:"}),(0,r.jsx)(c.Bc,{children:(0,r.jsxs)(c.m_,{children:[(0,r.jsx)(c.k$,{children:(0,r.jsx)(h,{size:16})}),(0,r.jsx)(c.ZI,{className:"min-w-[50px] max-w-[250px] p-4 m-2 bg-gray-800 text-white rounded-md shadow-md",children:(0,r.jsx)("p",{className:"text-sm",children:"The maximum limit currently set by you for transferring funds to UTrade from your available limit. If your available limit is less than the set limit, only the available limit will be transferred to UTrade, and the remaining amount to other trading platforms."})})]})})]}),(0,r.jsx)(a.p,{type:"number",value:S,onChange:e=>{let s=e.target.value;(parseFloat(s)>=0||""===s)&&k(s)},placeholder:"Enter new limit",className:"max-w-[200px]"})]}),(0,r.jsx)(n.$,{onClick:O,disabled:E||!S,className:"w-full",children:E?"Submitting...":"Submit"})]}),(0,r.jsxs)("div",{className:"mt-8 p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Instructions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{children:"Please review the cases below to understand how the limit transfer works:"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Case 1: Available Limit Equals Current UTrade Limit"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Current UTrade Limit:"})," ₹50,000"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Available Limit:"})," ₹50,000"]}),(0,r.jsx)("p",{children:"Since the available limit matches the current UTrade limit:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5",children:[(0,r.jsx)("li",{children:"₹50,000 will be transferred to UTrade."}),(0,r.jsx)("li",{children:"₹0 will be allocated to other trading platforms."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Case 2: Available Limit Less Than Current UTrade Limit"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Current UTrade Limit:"})," ₹50,000"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Available Limit:"})," ₹30,000"]}),(0,r.jsx)("p",{children:"In this case, the available limit is less than the current UTrade limit:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5",children:[(0,r.jsx)("li",{children:"₹30,000 will be transferred to UTrade (equal to the available limit)."}),(0,r.jsx)("li",{children:"₹0 will be allocated to other trading platforms because there is no remaining limit."})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Case 3: Available Limit Greater Than Current UTrade Limit"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Current UTrade Limit:"})," ₹50,000"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Available Limit:"})," ₹70,000"]}),(0,r.jsx)("p",{children:"Here, the available limit exceeds the current UTrade limit:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5",children:[(0,r.jsx)("li",{children:"₹50,000 will be transferred to UTrade (up to the current UTrade limit)."}),(0,r.jsx)("li",{children:"₹20,000 (remaining limit) will be available for other trading platforms."})]})]})]})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(o.A,{error:p,loading:i,ledgerMrgCollAmount:L,filteredDataWithLedgerMrgColl:R,groupedTotals:w,data:y})})]})})]})})}),F&&(0,r.jsx)(u.B,{})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[247,814,794,518,440,825,282,263,441,517,358],()=>s(6414)),_N_E=e.O()}]);
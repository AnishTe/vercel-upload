"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4641],{54641:(e,a,r)=>{r.d(a,{default:()=>p});var t=r(95155),s=r(12115),l=r(22130);let i=[{id:"scripName",accessorKey:"scripName",header:"Scrip Name",cell:e=>{let{row:a}=e,[r,s]=a.original.scripName.split("#");return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:r}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:s})]})}},{id:"scripSymbol",accessorKey:"scripSymbol",header:"Scrip Symbol"},{id:"isin",accessorKey:"isin",header:"ISIN"},{id:"globalQuantity",accessorKey:"globalQuantity",header:"Global Quantity"},{id:"holdingQuantity",accessorKey:"holdingQuantity",header:"Holding Quantity"}];var n=r(47282),d=r(67328),c=r(85147),o=r(30084),u=r(73312),m=r(62060);let g=(0,r(77711).default)(()=>Promise.all([r.e(1122),r.e(3740),r.e(3930),r.e(343),r.e(9690),r.e(4390),r.e(2589),r.e(8007),r.e(5565),r.e(6143),r.e(2449),r.e(8417),r.e(4156),r.e(227),r.e(7555),r.e(5996),r.e(4409)]).then(r.bind(r,75996)),{loadableGenerated:{webpack:()=>[75996]},ssr:!1,loading:()=>(0,t.jsx)(c.A,{columns:4,rows:10})});function p(){let[e,a]=(0,s.useState)([]),[r,p]=(0,s.useState)(!0),[h,x]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),[N,j]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1);(0,s.useRef)(null);let[w,S]=(0,s.useState)(null),C=(0,s.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e),S({tradeDate:"",scripName:null==e?void 0:e.scripName,scrip:null==e?void 0:e.scripSymbol,isin:null==e?void 0:e.isin,buySell:"B",narration:"",quantity:0,rate:"",holdingQuantity:null==e?void 0:e.holdingQuantity,globalQuantity:null==e?void 0:e.globalQuantity,fromEquity:!1}),v(a),j(!0)},[]);(0,s.useEffect)(()=>{(async()=>{p(!0),f(null);try{let e=await (0,n._HT)();if(!(0,d.k9)(e)){x(!0);return}let r="string"==typeof e.data.data?JSON.parse(e.data.data):e.data.data;if(r)a(r);else throw Error(r["Error Description"]||"Failed to fetch Holdings data.")}catch(e){f(e.message||"An error occurred while fetching data.")}finally{p(!1)}})()},[]);let q=(0,s.useCallback)((e,a,r)=>{"action"===r&&C(a)},[C]),A=i.filter(e=>"actions"!==e.id).concat({id:"actions",accessorKey:"",header:"Actions",cell:e=>{let{row:a}=e;return(0,t.jsxs)(u.$,{variant:"ghost",size:"icon",className:"action-btn","data-action":"action",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Add to Portfolio"})]})}});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(l.ZB,{children:"Holding Mismatch"}),(0,t.jsxs)(u.$,{variant:"ghost",onClick:()=>C({tradeDate:"",scripName:"",scrip:"",isin:"",buySell:"B",narration:"",quantity:0,rate:"",holdingQuantity:"",globalQuantity:"",fromEquity:!1},!0),children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),"Add to Portfolio"]})]}),(0,t.jsx)(l.Wu,{children:r?(0,t.jsx)(c.A,{columns:4,rows:10}):y?(0,t.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-100 rounded-md",children:y}):(0,t.jsx)(g,{columns:A,data:e,showAllRows:!0,getActionButtonDetails:q,viewColumns:!1,downloadExcel:!1})})]}),(0,t.jsx)(o.g,{isOpen:N,onClose:()=>j(!1),rowData:w,isFromCardHeader:b}),h&&(0,t.jsx)(d.Bs,{})]})}},30084:(e,a,r)=>{r.d(a,{g:()=>x});var t=r(95155),s=r(12115),l=r(51344),i=r(73312),n=r(33900),d=r(98986),c=r(30814),o=r(21567);function u(e){let{options:a,value:r,onChange:s,name:l}=e;return(0,t.jsx)("div",{className:"flex rounded-md shadow-sm",children:a.map(e=>(0,t.jsxs)("label",{className:(0,o.cn)("flex items-center justify-center px-3 py-1 text-sm font-medium border cursor-pointer","first:rounded-l-md last:rounded-r-md","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",r===e.value?"".concat(e.color," text-primary-foreground"):"bg-background text-foreground border-input hover:bg-accent hover:text-accent-foreground"),children:[(0,t.jsx)("input",{type:"radio",name:l,value:e.value,checked:r===e.value,onChange:()=>s(e.value),className:"sr-only"}),e.label]},e.value))})}var m=r(47282),g=r(67328),p=r(17733),h=r(97586);function x(e){let{isOpen:a,onClose:r,rowData:o,isFromCardHeader:x}=e,[y,f]=(0,s.useState)({tradeDate:"",scripName:"",scrip:"",isin:"",buySell:"B",narration:"",quantity:0,rate:0,fromEquity:!1}),[N,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(o){var e;f({tradeDate:"",scrip:(null==o?void 0:null===(e=o.scrip)||void 0===e?void 0:e.toString())||"",scripName:o.scripName,isin:o.isin,narration:"",buySell:o.fromEquity?"B":o.quantity?"S":o.holdingQuantity-o.globalQuantity>0?"B":"S",quantity:o.quantity?o.quantity:Math.abs(o.holdingQuantity-o.globalQuantity),rate:0,fromEquity:!1})}},[o]);let b=async e=>{e.preventDefault();try{let e={...y,tradeDate:(0,p.GP)((0,h.H)(y.tradeDate),"dd/MM/yyyy")},a=await (0,m.Ggk)(e);if(!(0,g.k9)(a)){j(!0);return}c.oR.success("Portfolio added successfully"),f({tradeDate:"",scrip:"",isin:"",scripName:"",buySell:"B",narration:"",quantity:0,rate:0,fromEquity:!1}),r()}catch(e){console.error("Error adding portfolio:",e),c.oR.error("Failed to add portfolio")}},v=e=>{let{name:a,value:r}=e.target;f(e=>({...e,[a]:"rate"===a?parseFloat(r)||0:r}))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.lG,{open:a,onOpenChange:r,children:(0,t.jsxs)(l.Cf,{children:[(0,t.jsxs)(l.c7,{children:[(0,t.jsx)(l.L3,{children:"Add to Portfolio"}),(0,t.jsx)(l.rr,{children:"Add to Portfolio with these values!"})]}),(0,t.jsxs)("form",{onSubmit:b,children:[(0,t.jsxs)("h3",{className:"font-semibold text-md m-2 text-center",children:[y.scripName||""," "]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"tradeDate",className:"text-right",children:"Trade Date"}),(0,t.jsx)(n.p,{id:"tradeDate",name:"tradeDate",type:"date",value:y.tradeDate,onChange:v,className:"col-span-3",required:!0,max:new Date().toISOString().split("T")[0]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"scrip",className:"text-right",children:"Scrip"}),(0,t.jsx)(n.p,{id:"scrip",name:"scrip",value:y.scrip,onChange:v,className:"col-span-3",required:!0,readOnly:!x,disabled:!x})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"isin",className:"text-right",children:"ISIN"}),(0,t.jsx)(n.p,{id:"isin",name:"isin",value:y.isin,onChange:v,className:"col-span-3 ".concat(x?"":"disabled:opacity-90"),required:!0,readOnly:!x,disabled:!x})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"buySell",className:"text-right",children:"Buy/Sell"}),(0,t.jsx)("div",{className:"col-span-auto",children:(0,t.jsx)(u,{options:[{value:"B",label:"Buy",color:"bg-green-600"},{value:"S",label:"Sell",color:"bg-red-600"}],value:y.buySell,onChange:e=>{f(a=>({...a,buySell:e}))},name:"buySell"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"narration",className:"text-right",children:"Narration"}),(0,t.jsx)(n.p,{id:"narration",name:"narration",value:y.narration,onChange:v,className:"col-span-3",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"quantity",className:"text-right",children:"Quantity"}),(0,t.jsx)(n.p,{id:"quantity",name:"quantity",type:"number",value:y.quantity,onChange:v,className:"col-span-3",required:!0,min:"1",step:"1"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(d.J,{htmlFor:"rate",className:"text-right",children:"Rate"}),(0,t.jsx)(n.p,{id:"rate",name:"rate",type:"number",value:y.rate,onChange:v,className:"col-span-3",required:!0,min:"0",step:"0.01"})]})]}),(0,t.jsx)(l.Es,{className:"border-t p-2",children:(0,t.jsx)(i.$,{type:"submit",className:"m-2",children:"Add to Portfolio"})})]})]})}),N&&(0,t.jsx)(g.Bs,{})]})}},85147:(e,a,r)=>{r.d(a,{A:()=>l});var t=r(95155);r(12115);var s=r(87081);let l=e=>{let{columns:a,rows:r}=e;return(0,t.jsxs)("div",{className:"w-full p-4 space-y-4",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(a||4)].map((e,a)=>(0,t.jsx)("div",{className:"h-9 rounded-lg bg-gray-100 dark:bg-gray-800",children:(0,t.jsx)(s.E,{className:"w-full h-full"})},"header-".concat(a)))}),(0,t.jsx)("div",{className:"space-y-2",children:[...Array(r||10)].map((e,r)=>(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(a||4)].map((e,a)=>(0,t.jsx)("div",{className:"h-12 rounded-lg bg-gray-100 dark:bg-gray-800",children:(0,t.jsx)(s.E,{className:"w-full h-full"})},"cell-".concat(r,"-").concat(a)))},"row-".concat(r)))})]})}},22130:(e,a,r)=>{r.d(a,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>u});var t=r(95155),s=r(12115),l=r(21567);let i=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow mt-7",r),...s})});i.displayName="Card";let n=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-row lg:flex-row md:flex-col sm:flex-col md:items-center md:justify-between p-6 border-b bg-blue-500 mx-3 -mt-6 px-8 pt-4 pb-4 rounded-xl shadow-lg text-white space-y-4 md:space-y-0 mb-4",r),...s})});n.displayName="CardHeader";let d=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted",r),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-3 pt-0",r),...s})});o.displayName="CardContent";let u=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-3 pt-0",r),...s})});u.displayName="CardFooter"},98986:(e,a,r)=>{r.d(a,{J:()=>c});var t=r(95155),s=r(12115),l=r(46195),i=r(31027),n=r(21567);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(l.b,{ref:a,className:(0,n.cn)(d(),r),...s})});c.displayName=l.b.displayName},87081:(e,a,r)=>{r.d(a,{E:()=>l});var t=r(95155),s=r(21567);function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-primary/10",a),...r})}},21567:(e,a,r)=>{r.d(a,{cn:()=>l});var t=r(43463),s=r(69795);function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,s.QP)((0,t.$)(a))}}}]);
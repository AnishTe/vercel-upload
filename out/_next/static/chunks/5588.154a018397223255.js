(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5588],{83686:()=>{},32383:()=>{},46829:(e,l,t)=>{"use strict";t.r(l),t.d(l,{DataTable:()=>y});var a=t(95155),n=t(12115),r=t(89789),s=t(19083),o=t(72508),i=t(57485),d=t(33900),c=t(73312),u=t(2291),m=t(46967),h=t(51719),g=t(98435),f=t(93518),p=t(89095),x=t(70719),v=t.n(x),j=t(53601);t(10142),t(92340);var w=t(38003),b=t(7660),N=t(97307),C=t(5565);function y(e){var l,t,x,y;let{columns:S,data:k,showAllRows:R=!1,filterColumn:A,filterPlaceholder:_="Filter...",selectableRows:E=!1,onSelectedRowsChange:F,hiddenColumns:I=[],downloadFileName:M="data",expenseDataDetails:z}=e,[D,V]=n.useState([]),[P,H]=n.useState([]),[T,B]=n.useState({}),[O,W]=n.useState({}),[$,L]=n.useState(window.innerHeight-240),G=n.useRef(null),[J,K]=n.useState(k),{userDetails:U,currentUser:X}=(0,N.J)(),Z=n.useRef(O);n.useMemo(()=>v()(e=>{F&&F(e)},200),[F]);let Q=(0,a.jsxs)("div",{className:"flex items-center space-x-2 m-2",children:[(0,a.jsx)(j.Bc,{children:(0,a.jsxs)(j.m_,{children:[(0,a.jsx)(j.k$,{asChild:!0,children:(0,a.jsx)(C.default,{src:"/images/SVG/csv.svg",alt:"Excel icon",width:22,height:22,priority:!0,onClick:()=>er(),className:"cursor-pointer m-2"})}),(0,a.jsx)(j.ZI,{children:(0,a.jsx)("p",{children:"Download CSV"})})]})}),(0,a.jsx)(j.Bc,{children:(0,a.jsxs)(j.m_,{children:[(0,a.jsx)(j.k$,{asChild:!0,children:(0,a.jsx)(C.default,{src:"/images/SVG/excel.svg",alt:"Excel icon",width:30,height:30,priority:!0,onClick:()=>es(),className:"cursor-pointer m-2"})}),(0,a.jsx)(j.ZI,{children:(0,a.jsx)("p",{children:"Download Excel"})})]})})]});n.useEffect(()=>{let e=()=>{L(window.innerHeight-240)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let q=e=>null==e||""===e?"-":"number"==typeof e?e:"string"!=typeof e||isNaN(e)?"string"==typeof e&&e.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}\.\d{3}$/)?e.split(" ")[0]:e:e.startsWith("0")||e.length>e.replace(/^0+/,"").length?e:Number.parseFloat(e),Y=n.useMemo(()=>S.filter(e=>{if(e.conditionalColumn){for(let[l,t]of e.conditionalColumn)if(k.some(e=>t.some(t=>e[l]===t.value)))return!1}return!e.hidden}).map(e=>({...e,cell:l=>{let{row:t,...a}=l,n=q(t.getValue(e.id));return ea(t,e,a,n)}})),[S,k]),ee=(0,r.N4)({data:J,columns:E?[{id:"select",header:e=>{let{table:l}=e;return(0,a.jsx)(u.S,{checked:l.getIsAllPageRowsSelected(),onCheckedChange:e=>l.toggleAllPageRowsSelected(!!e),"aria-label":"Select all"})},cell:e=>{let{row:l}=e;return(0,a.jsx)(u.S,{checked:l.getIsSelected(),onCheckedChange:e=>l.toggleSelected(!!e),"aria-label":"Select row"})},enableSorting:!1},...Y]:Y,getCoreRowModel:(0,s.HT)(),getGroupedRowModel:(0,s.cU)(),onSortingChange:V,onColumnFiltersChange:H,getPaginationRowModel:(0,s.kW)(),getSortedRowModel:(0,s.h5)(),getFilteredRowModel:(0,s.hM)(),onColumnVisibilityChange:B,onRowSelectionChange:W,state:{sorting:D,columnFilters:P,columnVisibility:T,rowSelection:O},meta:{updateData:(e,l,t,a)=>{K(n=>n.map((n,r)=>r===e?{...n,[a||l]:t}:n))}},enableRowSelection:!0}),el=n.useRef(J);n.useEffect(()=>{el.current=J},[J]);let et=n.useCallback(v()(e=>{F&&F(Object.keys(e).filter(l=>e[l]).map(e=>{let l=Number.parseInt(e,10);return el.current[l]}))},200),[]);n.useEffect(()=>{JSON.stringify(Z.current)!==JSON.stringify(O)&&(Z.current=O,et(O))},[O,et]),n.useEffect(()=>{R?ee.setPageSize(k.length):ee.setPageSize(10)},[R,null==k?void 0:k.length,ee]),n.useEffect(()=>{let e={};S.forEach(l=>{e[l.id]=!l.deselected}),B(e)},[S]);let ea=(e,l,t,n)=>{let r="function"==typeof l.cell?l.cell({row:e,...t}):n,s=(l.hiddenColumns||[]).map(l=>{let t=S.find(e=>e.id===l),a=(null==t?void 0:t.header)||l,n=e.original[l];return t&&void 0!==n?{header:a,value:n}:null}).filter(e=>null!==e);return(0,a.jsxs)("div",{className:"flex items-center",children:[r,s.length>0&&(0,a.jsxs)(p.AM,{children:[(0,a.jsx)(p.Wv,{asChild:!0,children:(0,a.jsx)(c.$,{variant:"ghost",size:"sm",className:"ml-2 h-4 w-4 p-0",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})}),(0,a.jsx)(p.hl,{className:"w-auto p-0",children:(0,a.jsx)(o.XI,{children:(0,a.jsx)(o.BF,{children:s.map((e,l)=>(0,a.jsxs)(o.Hj,{children:[(0,a.jsx)(o.nA,{className:"font-medium",children:null==e?void 0:e.header}),(0,a.jsx)(o.nA,{children:null==e?void 0:e.value})]},l))})})})]})]})},en=(e,l)=>{let t=l.columnDef.cell?l.columnDef.cell({row:e}):e.getValue(l.id);if(n.isValidElement(t)){let e=l=>{if("string"==typeof l||"number"==typeof l)return String(l);if(n.isValidElement(l)){var t;let a=l.props.children;return(null===(t=n.Children.map(a,e))||void 0===t?void 0:t.join(""))||""}return""};return e(t)}return"object"==typeof t&&null!==t?JSON.stringify(t):t||""},er=()=>{var e,l,t;let a=ee.getVisibleFlatColumns().map(e=>e.columnDef.header),n=e=>{let l=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return'"'.concat(l,'"')},r=new Blob(["\uFEFF"+[["Pune e Stock Broking Limited"],[""],["Name: ".concat(U.clientName,"          Client ID: ").concat(X)],[""],...z?[["Expenses"],...null!==(l=null==z?void 0:null===(e=z.rows)||void 0===e?void 0:e.map(e=>[e[z.rowKey],n(e[z.rowAmount])]))&&void 0!==l?l:[],["Total Expenses",n(null!==(t=null==z?void 0:z.total)&&void 0!==t?t:0)],[""]]:[],[a]].concat(ee.getRowModel().rows.map(e=>ee.getVisibleFlatColumns().map(l=>{let t=q(en(e,l));return/[,â‚¹]/.test(t)?'"'.concat(t,'"'):t}))).map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"});(0,w.saveAs)(r,"".concat(M,"_").concat(new Date().toISOString().slice(0,19).replace(/[:]/g,"-"),".csv"))},es=()=>{var e,l,t;let a=ee.getVisibleFlatColumns().map(e=>e.columnDef.header),n=ee.getRowModel().rows.map(e=>ee.getVisibleFlatColumns().map(l=>q(en(e,l)))).map(e=>{let l={};return a.forEach((t,a)=>{l[String(t)]=e[a]}),l}),r=function(e){let l=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=Array(a.length).fill("");return t[0]=e,{data:t,isMerged:l}},s=e=>({v:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),s:{font:{color:{rgb:e>=0?"008000":"FF0000"}}}}),o=[r("Pune e Stock Broking Limited"),r(""),r("Name: ".concat(U.clientName,"          Client ID: ").concat(X)),r(""),...z?[{data:["Expenses"],isSpecial:!0},...null!==(l=null==z?void 0:null===(e=z.rows)||void 0===e?void 0:e.map(e=>[e[z.rowKey],s(e[z.rowAmount])]))&&void 0!==l?l:[],["Total Expenses",s(null!==(t=null==z?void 0:z.total)&&void 0!==t?t:0)],r("")]:[]],i=b.Wp.aoa_to_sheet(o.map(e=>Array.isArray(e)?e:e.data||[]));[0,2].forEach(e=>{let l="A".concat(e+1);i[l]&&(i[l].s={font:{bold:!0,sz:0===e?16:14},alignment:{horizontal:"center",vertical:"center"}})});let d=o.map((e,l)=>"isMerged"in e&&e.isMerged?{s:{r:l,c:0},e:{r:l,c:a.length-1}}:null).filter(Boolean);i["!merges"]=d,i["!freeze"]={xSplit:0,ySplit:o.length},b.Wp.sheet_add_aoa(i,[a],{origin:-1}),b.Wp.sheet_add_aoa(i,n.map(e=>Object.values(e)),{origin:-1});let c=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19),u="".concat(M,"_").concat(c,".xlsx"),m=b.Wp.book_new();b.Wp.book_append_sheet(m,i,"Sheet1"),b._h(m,u)};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex items-center py-4 gap-2",children:[A&&(0,a.jsx)(d.p,{placeholder:_,value:null!==(y=null===(l=ee.getColumn(A))||void 0===l?void 0:l.getFilterValue())&&void 0!==y?y:"",onChange:e=>{var l;return null===(l=ee.getColumn(A))||void 0===l?void 0:l.setFilterValue(e.target.value)},className:"max-w-sm"}),(0,a.jsxs)(i.rI,{children:[(0,a.jsx)(i.ty,{asChild:!0,children:(0,a.jsxs)(c.$,{variant:"outline",className:"ml-auto",children:["View Columns ",(0,a.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})}),(0,a.jsx)(i.SQ,{align:"end",children:ee.getAllColumns().filter(e=>e.getCanHide()).map(e=>{let l=null==e?void 0:e.columnDef.disabled;return null==e||e.columnDef.deselected,(0,a.jsx)(i.hO,{className:"capitalize ".concat(l?"opacity-50 cursor-not-allowed":""),checked:T[e.id],disabled:l,onCheckedChange:t=>{l||e.toggleVisibility(!!t)},children:e.columnDef.header},e.id)})})]}),Q]}),(0,a.jsx)("div",{ref:G,className:"rounded-md border overflow-y-auto",style:{height:"".concat(Math.min($,(null==ee?void 0:null===(t=ee.getRowModel().rows)||void 0===t?void 0:t.length)*40+50),"px")},children:(0,a.jsxs)(o.XI,{children:[(0,a.jsx)(o.A0,{children:ee.getHeaderGroups().map(e=>(0,a.jsx)(o.Hj,{children:e.headers.map(e=>(0,a.jsx)(o.nd,{className:"p-2 text-foreground sticky top-0 bg-background z-10",children:e.isPlaceholder?null:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,r.Kv)(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&(0,a.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>e.column.toggleSorting(),className:"ml-1 h-4 w-4 p-0",children:(0,a.jsx)(g.A,{className:"h-1 w-1"})})]})},e.id))},e.id))}),(0,a.jsx)(o.BF,{children:(null===(x=ee.getRowModel().rows)||void 0===x?void 0:x.length)?ee.getRowModel().rows.map(e=>(0,a.jsx)(o.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(l=>(0,a.jsx)(o.nA,{children:(0,r.Kv)(l.column.columnDef.cell,l.getContext())},"cell_".concat(e.id,"_").concat(l.column.id)))},"row_".concat(e.id))):(0,a.jsx)(o.Hj,{children:(0,a.jsx)(o.nA,{colSpan:S.length,className:"h-24 text-center",children:"No results."})})})]})}),!R&&(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>ee.previousPage(),disabled:!ee.getCanPreviousPage(),children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>ee.nextPage(),disabled:!ee.getCanNextPage(),children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]})}},89095:(e,l,t)=>{"use strict";t.d(l,{AM:()=>o,Wv:()=>i,hl:()=>d});var a=t(95155),n=t(12115),r=t(38417),s=t(21567);let o=r.bL,i=r.l9;r.Mz;let d=n.forwardRef((e,l)=>{let{className:t,align:n="center",sideOffset:o=4,...i}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:l,align:n,sideOffset:o,className:(0,s.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});d.displayName=r.UC.displayName},72508:(e,l,t)=>{"use strict";t.d(l,{A0:()=>o,BF:()=>i,Hj:()=>d,XI:()=>s,nA:()=>u,nd:()=>c});var a=t(95155),n=t(12115),r=t(21567);let s=n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:l,className:(0,r.cn)("w-full caption-bottom text-sm",t),...n})})});s.displayName="Table";let o=n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("thead",{ref:l,className:(0,r.cn)("[&_tr]:border-b",t),...n})});o.displayName="TableHeader";let i=n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("tbody",{ref:l,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...n})});i.displayName="TableBody",n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("tfoot",{ref:l,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n})}).displayName="TableFooter";let d=n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("tr",{ref:l,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n})});d.displayName="TableRow";let c=n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("th",{ref:l,className:(0,r.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})});c.displayName="TableHead";let u=n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("td",{ref:l,className:(0,r.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n})});u.displayName="TableCell",n.forwardRef((e,l)=>{let{className:t,...n}=e;return(0,a.jsx)("caption",{ref:l,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...n})}).displayName="TableCaption"}}]);
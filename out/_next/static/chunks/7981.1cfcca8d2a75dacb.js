(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7981],{17981:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a=n(95155),r=n(12115),o=n(43932),s=n.n(o);n(23299),n(81956),n(4469),n(95198);var i=n(20853),l=n(40767),c=n(33900),d=n(73312);function u(e){let{data:t,columns:n,showPagination:o=!1,showAllRows:u=!1,selectableRows:p=!1,getActionButtonDetails:h,onRowRender:g}=e,m=(0,r.useRef)(null),f=(0,r.useRef)(null),b=(0,r.useRef)(!1),w=(0,r.useRef)(0),[x,v]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=f.current;if(!e)return;let t=()=>{let t=s()(e.table().body());try{t.unmark({done:()=>{x&&t.mark(x)}})}catch(e){console.error("Mark.js highlight error:",e)}};return e.on("draw.dt",t),()=>{e.off("draw.dt",t)}},[x]);let k=(0,r.useMemo)(()=>t.map(e=>({...e,segment:e.segment||"CM",clientName:e.clientName||"",pan:e.pan||"",orderStatus:e.orderStatus||"",BseStatus:e.BseStatus||"",boid:e.boid||""})),[t]),y=(0,r.useMemo)(()=>[{title:'<input type="checkbox" id="select-all-checkbox" class="select-all-checkbox" />',data:null,orderable:!1,className:"select-checkbox",width:"30px",render:(e,t,n)=>'<input type="checkbox" class="rowCheckbox" />'},{title:"",data:"",defaultContent:"",className:"dtr-control dtr-hidden",orderable:!1,visible:!0},...n.filter(e=>!0!==e.hidden).map(e=>({title:e.header,data:e.accessorKey||e.id,width:e.width||"auto",render:(t,n,a,r)=>{if("display"===n){var o,s,i,l;if("unpledgedQuantityInp"===e.id)return'<input \n                            name="quantity" \n                            autoComplete="off" \n                            id="quantity-'.concat(a.isin,'" \n                            type="text" \n                            inputMode="numeric" \n                            pattern="[0-9]*" \n                            placeholder="Pledge Quantity" \n                            class="transition-all duration-200 border border-gray-300 focus:ring-0 bg-white text-black rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 p-2 responsive-input"  \n                            value="').concat((null===(o=a.quantity)||void 0===o?void 0:o.toString())||(null===(s=a.unpledgedQuantity)||void 0===s?void 0:s.toString())||"",'" \n                        />');if("segment"===e.id){let e=a.segment||"CM";return'\n                            <div class="flex justify-center align-center gap-1">\n                            <select \n                                id="segment-'.concat(r.row,'" \n                                name="segment" \n                                title="segment" \n                                class="p-2 bg-white text-black border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 transition-all duration-200"\n                            >\n                                <option value="CM" ').concat("CM"===e?"selected":"",'>CASH</option>\n                                <option value="FO" ').concat("FO"===e?"selected":"",'>FO</option>\n                                <option value="CO" ').concat("CO"===e?"selected":"",'>MCX</option>\n                                <option value="CD" ').concat("CD"===e?"selected":"",'>CDS</option>\n                            </select>\n                            <button \n                                id="action-btn" \n                                class="px-2 py-1 h-8 text-xs action-btn hidden transition-opacity duration-200 rounded-md bg-primary text-primary-foreground hover:bg-primary/90" \n                                data-action="applySeg" \n                                data-id="').concat(a.id||"",'" \n                                title="Apply same segment to all"\n                            >\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="lucide lucide-plus-circle"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>\n                            </button>\n                            </div>\n                        ')}if("applyQuantityInp"===e.id)return'<input \n                            name="quantity" \n                            autoComplete="off" \n                            id="quantity-'.concat(a.isin,'" \n                            type="text" \n                            inputMode="numeric" \n                            pattern="[0-9]*" \n                            placeholder="Quantity" \n                            class="transition-all duration-200 border border-gray-300 focus:ring-0 bg-white text-black rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 p-2 responsive-input"  \n                            value="').concat((null===(i=a.applied)||void 0===i?void 0:i.toString())||(null===(l=a.quantity)||void 0===l?void 0:l.toString())||"",'" \n                        />');if("clientNameInp"===e.id){let e=(null==a?void 0:a.clientName)||"",t=e?e.split(" ").map(e=>e[0]).join("").toUpperCase():"",n=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],r=Math.floor(Math.random()*n.length),o=n[r];return'\n                                <div class="flex items-center gap-2">\n                                    <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-white '.concat(o,'">\n                                        ').concat(t,'\n                                    </div>\n                                    <span class="truncate max-w-[150px] font-medium" title="').concat(e,'">\n                                        ').concat(e,"\n                                    </span>\n                                </div>\n                            ")}else if("boid"===e.id){let e=a.boidsDetails||[],t=e.length>0?e[0].boid:"";return'\n                                <select\n                                    name="boid" // Added name attribute\n                                    aria-label="Select BOID" // Added accessible name\n                                    class="w-[180px] p-2 bg-background text-foreground border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"\n                                    value="'.concat(t,'"\n                                    onchange="handleBoidChange(event, \'').concat(a.id,"')\"\n                                >\n                                    ").concat(e.length>0?e.map(e=>'<option value="'.concat(e.boid,'">').concat(e.boid,"</option>")).join(""):'<option value="" disabled>No BOIDs available</option>',"\n                                </select>\n                            ")}else if("amountInp"===e.id)return'<span id="amountCell_'.concat(a.isin,'">\n                            ').concat(a.amount,"\n                          </span>")}return t}}))],[n]);return(0,r.useEffect)(()=>{if(m.current&&0!==k.length){if(b.current)w.current!==k.length&&f.current&&(f.current.clear(),f.current.rows.add(k),f.current.draw(!1),w.current=k.length);else{let e=s()(m.current).DataTable({data:k,columns:y,columnDefs:[{targets:"_all",orderable:!0}],order:[[2,"asc"]],responsive:{details:{type:"column",target:p?1:0,renderer:(e,t,n)=>{let a=Array.isArray(n)?n.filter(e=>e.hidden&&0!==e.columnIndex):[];if(0===a.length)return!1;let r=document.createElement("ul");r.className="dtr-details",r.addEventListener("click",e=>{e.target.closest("button")||e.stopPropagation()});let o=document.createElement("li");return o.className="dtr-details-header",o.innerHTML='<div class="expand-hint"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="lucide lucide-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg> <span>Expanded Details</span></div>',r.appendChild(o),a.forEach(e=>{let t=document.createElement("li");t.className="dt-head-custom dt-body-custom";let n=document.createElement("span");n.className="dtr-title",n.textContent=e.title+":";let a=document.createElement("span");a.className="dtr-data",a.innerHTML=e.data,t.appendChild(n),t.appendChild(a),r.appendChild(t)}),r}},breakpoints:[{name:"desktop",width:Number.POSITIVE_INFINITY},{name:"tablet",width:1024},{name:"mobile",width:640}]},select:!!p&&{style:"multi",selector:"td:first-child"},paging:o,pageLength:u?-1:10,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{emptyTable:"No records available",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"Showing 0 to 0 of 0 entries",lengthMenu:"Show _MENU_ entries",search:"Search:",zeroRecords:"No matching records found",paginate:{first:"First",last:"Last",next:"Next",previous:"Previous"}},dom:'<"datatable-container"t><"datatable-footer"<"datatable-info"i><"datatable-pagination"p>>',autoWidth:!1,rowCallback:(e,t,n)=>{s()(e).css({"line-height":"1.2","font-size":"0.75rem"})},initComplete:function(){let e=this.api();s()(".dataTables_filter").hide();let t=s()(".datatable-pagination");e.on("draw",()=>{let n=e.page.info(),a=n.pages,r=n.page,o=Math.max(0,r-2),i=Math.min(a-1,o+4);i-o<4&&o>0&&(o=Math.max(0,i-4));let l="";for(let e=o;e<=i;e++)l+='\n                            <button class="pagination-button page-number '.concat(e===r?"active":"",'" \n                                    data-page="').concat(e,'">\n                            ').concat(e+1,"\n                            </button>\n                        ");let c='\n                            <div class="custom-pagination">\n                                <button class="pagination-button first-page '.concat(0===n.page?"disabled":"",'" \n                                        ').concat(0===n.page?"disabled":"",'>\n                                <span>\xab</span>\n                                </button>\n                                <button class="pagination-button previous-page ').concat(0===n.page?"disabled":"",'"\n                                        ').concat(0===n.page?"disabled":"",'>\n                                <span>‹</span>\n                                </button>\n                                \n                                <div class="pagination-numbers">\n                                ').concat(l,'\n                                </div>\n                                \n                                <button class="pagination-button next-page ').concat(n.page===n.pages-1?"disabled":"",'"\n                                        ').concat(n.page===n.pages-1?"disabled":"",'>\n                                <span>›</span>\n                                </button>\n                                <button class="pagination-button last-page ').concat(n.page===n.pages-1?"disabled":"",'"\n                                        ').concat(n.page===n.pages-1?"disabled":"",">\n                                <span>\xbb</span>\n                                </button>\n                            </div>\n                        ");n.pages>1?t.html(c).show():t.hide(),t.find(".first-page").on("click",function(){s()(this).hasClass("disabled")||e.page("first").draw("page")}),t.find(".previous-page").on("click",function(){s()(this).hasClass("disabled")||e.page("previous").draw("page")}),t.find(".next-page").on("click",function(){s()(this).hasClass("disabled")||e.page("next").draw("page")}),t.find(".last-page").on("click",function(){s()(this).hasClass("disabled")||e.page("last").draw("page")}),t.find(".page-number").on("click",function(){let t=Number.parseInt(s()(this).data("page"));e.page(t).draw("page")})});let n=s()(".datatable-length"),a=s()('<select class="custom-length-select"></select>');[10,25,50,100].forEach(t=>{a.append('<option value="'.concat(t,'" ').concat(e.page.len()===t?"selected":"",">\n                    ").concat(t," entries\n                </option>"))}),n.html('<div class="custom-length-container"><span>Show</span></div>'),n.find(".custom-length-container").append(a),n.find(".custom-length-container").append("<span>entries</span>"),a.on("change",function(){let t=s()(this).val();e.page.len(t).draw()});let r=s()(".datatable-info"),o=()=>{let t=e.page.info(),n=e.rows({selected:!0}).count(),a='\n                          <div class="custom-info">\n                            <span>Showing '.concat(t.start+1," to ").concat(t.end," of ").concat(t.recordsDisplay," entries</span>\n                            ").concat(t.recordsDisplay!==t.recordsTotal?'<span class="filtered-info">(filtered from '.concat(t.recordsTotal," total entries)</span>"):"","\n                            ").concat(n>0?'<span class="selected-info">('.concat(n," selected)</span>"):"","\n                          </div>\n                        ");r.html(a)};e.on("draw",o),e.on("select",o),e.on("deselect",o),e.draw(),s()(f.current).find("td.dtr-control").empty(),s()(f.current).find("td.dtr-control").html('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="lucide lucide-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'),e.on("responsive-display",(t,n,a,r)=>{let o=s()(a.node()).find("td.dtr-control");if(o.empty(),r){o.addClass("expanded"),s()(a.node()).addClass("expanded-row");let t=s()(a.node()).hasClass("selected"),n=e.rows({selected:!0}).count();if(t&&n>1){let e=s()(a.node()).next("tr.child").find("#action-btn");e.length&&e.removeClass("hidden")}}else o.removeClass("expanded"),s()(a.node()).removeClass("expanded-row")}),setTimeout(()=>{s()(".dtr-control").addClass("pulse-hint"),setTimeout(()=>{s()(".dtr-control").removeClass("pulse-hint")},3e3)},1e3)},createdRow:(e,t,n)=>{g&&g(t,e),s()(e).attr("data-row-data",JSON.stringify(t))}});f.current=e,b.current=!0,w.current=k.length,s()(m.current).on("click","[data-action]",function(e){e.stopPropagation();let t=s()(this).data("action"),n=JSON.parse(s()(this).closest("tr").attr("data-row-data")||"{}"),a=s()(this).closest("tr").find("input, select, textarea"),r={};a.each(function(){let e=s()(this).attr("name")||s()(this).attr("data-id");e&&(r[e]=s()(this).val())}),h&&h(e,{...n,inputs:r},t)}),p&&e.on("select deselect",()=>{let t=e.rows({selected:!0}).nodes();t.length>1?s()(t).find("#action-btn").removeClass("hidden"):s()('[id="action-btn"]').addClass("hidden"),m.current&&s()(m.current).find("input, select").css({"background-color":"white",color:"black"})}),s()(m.current).on("input",'input[name="quantity"]',function(){let e=s()(this),t=JSON.parse((e.closest("tr").hasClass("child")?e.closest("tr").prev():e.closest("tr")).attr("data-row-data")||"{}"),n=Number.parseInt(e.val()),a=Number.parseInt(t.totalQuantity);e.removeClass("border-red-500"),e.next(".error-message").remove(),isNaN(n)||n<=0?(e.addClass("border-red-500"),e.after('<span class="error-message text-red-500 mt-1">*Quantity should not be blank or zero.</span>')):n>a&&(e.addClass("border-red-500"),e.after('<span class="error-message text-red-500">*Cannot pledge more than '.concat(a," shares.</span>")))}),s()(m.current).on("click","#select-all-checkbox",function(){let e=s()(this).prop("checked");m.current&&s()(m.current).find(".rowCheckbox").prop("checked",e),p&&f.current&&(e?f.current.rows().select():f.current.rows().deselect()),e?m.current&&s()(m.current).find("#action-btn").removeClass("hidden"):s()('[id="action-btn"]').addClass("hidden"),m.current&&s()(m.current).find("input, select").css({"background-color":"white",color:"black"})}),s()(m.current).on("click",".rowCheckbox",function(e){e.stopPropagation();let t=m.current?s()(m.current).find(".rowCheckbox").length:0,n=m.current?s()(m.current).find(".rowCheckbox:checked").length:0;if(s()("#select-all-checkbox").prop({checked:n>0&&n===t,indeterminate:n>0&&n<t}),p&&f.current){let e=f.current.row(s()(this).closest("tr"));s()(this).prop("checked")?e.select():e.deselect()}s()(this).closest("tr").find("input, select").css({"background-color":"white",color:"black"})}),p&&f.current&&(f.current.on("select",(e,t,n,a)=>{if("row"===n){a.forEach(e=>{let t=f.current.row(e);s()(t.node()).find(".rowCheckbox").prop("checked",!0),s()(t.node()).find("input, select").css({"background-color":"white",color:"black"})});let e=m.current?s()(m.current).find(".rowCheckbox").length:0,t=m.current?s()(m.current).find(".rowCheckbox:checked").length:0;s()("#select-all-checkbox").prop({checked:t>0&&t===e,indeterminate:t>0&&t<e})}}),f.current.on("deselect",(e,t,n,a)=>{if("row"===n){a.forEach(e=>{let t=f.current.row(e);s()(t.node()).find(".rowCheckbox").prop("checked",!1)});let e=m.current?s()(m.current).find(".rowCheckbox").length:0,t=m.current?s()(m.current).find(".rowCheckbox:checked").length:0;s()("#select-all-checkbox").prop({checked:t>0&&t<e,indeterminate:t>0&&t<e})}}))}return s()("<style>").prop("type","text/css").html("\n    ".concat(o?"":"\n            .dataTables_info, .dataTables_paginate, .dataTables_length {\n                display: none !important;\n            }\n        ","\n    \n    /* Add responsive input styling */\n    .responsive-input {\n        width: 100%;\n        max-width: 150px;\n    }\n    \n    /* In child rows (responsive mode), ensure inputs are properly sized */\n    .dtr-details .dtr-data input.responsive-input {\n        width: 100%;\n        max-width: 100%;\n    }\n    \n    /* Style for the expanded control cell */\n    td.dtr-control.expanded {\n        background-color: rgba(59, 130, 246, 0.1) !important;\n    }\n    \n    /* Fix for error messages in responsive mode */\n    .error-message {\n        display: block;\n        white-space: normal !important;\n        word-break: break-word;\n        max-width: 100%;\n    }\n    \n    /* Ensure child rows handle error messages properly */\n    .dtr-details .dtr-data {\n        white-space: normal !important;\n        word-break: break-word;\n    }\n    \n    /* Prevent horizontal scrolling in child rows */\n    table.dataTable > tbody > tr.child {\n        white-space: normal !important;\n    }\n    \n    table.dataTable > tbody > tr.child ul.dtr-details > li {\n        white-space: normal !important;\n    }\n  ")).appendTo("head"),()=>{f.current&&b.current&&(m.current&&(s()(m.current).off("click","[data-action]"),s()(m.current).off("input",'input[name="quantity"]'),s()(m.current).off("click","#select-all-checkbox"),s()(m.current).off("click",".rowCheckbox")),f.current.destroy(),f.current=null,b.current=!1)}}},[y,o,u,p,h,k,g]),(0,r.useEffect)(()=>{f.current&&f.current.search(x).draw()},[x]),(0,a.jsxs)("div",{className:"w-full mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-2 bg-muted rounded-lg border border-border shadow-sm sm:justify-between",children:[(0,a.jsxs)("div",{className:"relative flex items-center w-full sm:w-auto max-w-sm ",children:[(0,a.jsx)(i.A,{className:"absolute left-2 h-3 w-3 text-muted-foreground"}),(0,a.jsx)(c.p,{type:"search",className:"w-full pl-8 pr-10 h-9 rounded-md border bg-background text-xs focus:ring focus:ring-ring custom-search-input",placeholder:"Search all columns...",value:x,onChange:e=>{v(e.target.value)}}),x&&(0,a.jsx)(d.$,{size:"sm",variant:"ghost",className:"absolute right-1 hover:text-foreground hover:bg-transparent",onClick:()=>v(""),children:(0,a.jsx)(l.A,{className:"h-1 w-1 p-0 m-0"})})]}),(0,a.jsx)("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto sm:flex-row sm:gap-4",children:o&&(0,a.jsxs)("div",{className:"ml-auto",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Show"}),(0,a.jsxs)("select",{title:"entries",className:"h-8 px-1 rounded-md border border-border bg-background text-xs mx-1",onChange:e=>{f.current&&f.current.page.len(Number.parseInt(e.target.value)).draw()},children:[(0,a.jsx)("option",{value:"10",children:"10"}),(0,a.jsx)("option",{value:"25",children:"25"}),(0,a.jsx)("option",{value:"50",children:"50"}),(0,a.jsx)("option",{value:"100",children:"100"})]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"entries"})]})})]}),(0,a.jsx)("div",{className:"w-full overflow-x-auto",children:(0,a.jsx)("table",{ref:m,className:"responsive nowrap w-full row-border hover cell-border",style:{width:"100%"},children:(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:n.filter(e=>!0!==e.hidden).map(e=>(0,a.jsx)("th",{children:e.header},e.id))})})})})]})}n(27071),n(54119)},27071:()=>{}}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[726],{64201:(e,t,r)=>{Promise.resolve().then(r.bind(r,53581))},65753:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},80175:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]])},93650:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]])},69660:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]])},3265:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("ReceiptText",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]])},45686:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},77711:(e,t,r)=>{"use strict";r.d(t,{default:()=>l.a});var a=r(21956),l=r.n(a)},21956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=r(60306)._(r(30580));function l(e,t){var r;let l={};"function"==typeof e&&(l.loader=e);let s={...l,...t};return(0,a.default)({...s,modules:null==(r=s.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=r(93719);function l(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return r}},30580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(95155),l=r(12115),s=r(39827),n=r(79214);function d(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(d(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},r=(0,l.lazy)(()=>t.loader().then(d)),o=t.loading;function c(e){let d=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?l.Suspense:l.Fragment,u=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(c,{...i?{fallback:d}:{},children:u})}return c.displayName="LoadableComponent",c}},79214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return d}});let a=r(95155),l=r(47650),s=r(75861),n=r(18284);function d(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=s.workAsyncStorage.getStore();if(void 0===r)return null;let d=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files;d.push(...t)}}return 0===d.length?null:(0,a.jsx)(a.Fragment,{children:d.map(e=>{let t=r.assetPrefix+"/_next/"+(0,n.encodeURIPath)(e);return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,l.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},53581:(e,t,r)=>{"use strict";r.d(t,{default:()=>S});var a=r(95155),l=r(12115),s=r(22130),n=r(73312),d=r(15157),i=r(25121),o=r(37528),c=r(30814),u=r(47282),h=r(67328),f=r(12711),p=r(85147),m=r(55546),y=r(17733);let x=[{id:"clientId",accessorKey:"clientId",header:"Client ID",cell:e=>{var t;let{row:r}=e,l=null!==(t=r.original.clientId)&&void 0!==t?t:"-";return(0,a.jsx)("div",{className:"font-medium",children:l})}},{id:"boid",accessorKey:"boid",header:"BOID"},{id:"isin",accessorKey:"isin",header:"ISIN",hidden:!0},{id:"branchcode",accessorKey:"branchcode",header:"Branch Code"},{id:"quantity",accessorKey:"quantity",header:"Total Quantity"},{id:"applied",accessorKey:"applied",header:"Applied Quantity"},{id:"orderStatus",accessorKey:"orderStatus",header:"Order Status",cell:e=>{let{row:t}=e,r=t.original.orderStatus;if(!r)return"-";let l=r.toLowerCase(),s="";return s="processed"===l?"bg-green-100 text-green-800 hover:bg-green-200 border border-green-200":"applied"===l?"bg-amber-50 text-amber-700 hover:bg-amber-100 border border-amber-200":"cancelled"===l?"bg-red-100 text-red-800 hover:bg-red-200 border border-red-200":"bg-gray-100 text-gray-800 hover:bg-gray-200 border border-gray-200",(0,a.jsx)(i.E,{className:s,children:r})}},{id:"appliedDate",accessorKey:"appliedDate",header:"Time",cell:e=>{let{row:t}=e,r=t.original.appliedDate;return r?(0,y.GP)(new Date(r),"yyyy-MM-dd HH:mm:ss"):"-"}}];var b=r(45686),g=r(93650),j=r(65753),k=r(69660),v=r(72508),w=r(43932),N=r.n(w),C=r(77711),P=r(74317),A=r(68678);let M=(0,C.default)(()=>Promise.all([r.e(1122),r.e(3930),r.e(343),r.e(9690),r.e(4390),r.e(2449),r.e(8417),r.e(4156),r.e(227),r.e(5996),r.e(3694)]).then(r.bind(r,75996)),{loadableGenerated:{webpack:()=>[75996]},ssr:!1});function S(){let[e,t]=(0,l.useState)([]),[r,y]=(0,l.useState)(!1),[w,C]=(0,l.useState)(null),[S,E]=(0,l.useState)(!1);(0,m.U)("(max-width: 640px)");let[I,R]=(0,l.useState)(!1),[O,D]=(0,l.useState)([]),[_,L]=(0,l.useState)(""),[F,H]=(0,l.useState)(null),[T,q]=(0,l.useState)([]),[B,K]=(0,l.useState)(!1),[z,V]=(0,l.useState)(null),Z=(0,l.useRef)(null),Q=(0,l.useRef)([]),U=(0,l.useRef)(null),G=(0,l.useCallback)(()=>{if(!Z.current)return[];let e=N()(Z.current).find("table");if(!e)return[];let t=e.DataTable(),r=t.rows({selected:!0}).nodes();return t.rows({selected:!0}).data().toArray().map((e,t)=>{let a=N()(r[t]),l=a.next("tr.child"),s={};return a.add(l).find("input, select, textarea").each(function(){let e=N()(this).attr("name")||N()(this).attr("data-id");e&&(s[e]=this.value)}),{...e,inputs:s}})},[]),J=(0,l.useCallback)(async()=>{y(!0),C(null);try{let e=await (0,u.D5k)();if(!(0,h.k9)(e)){E(!0);return}let t="string"==typeof e.data.data?JSON.parse(e.data.data):e.data.data;if(t)D(t.map(e=>({scrip:e.scrip,value:e.buybackid.toString(),isin:e.isin,fromdate:e.fromdate,todate:e.todate,buybackprice:e.buybackprice,nsesettno:e.nsesettno,bsesettno:e.bsesettno})));else throw Error(t["Error Description"]||"Failed to fetch template data.")}catch(e){C(e.message||"An error occurred while fetching data.")}finally{y(!1)}},[]);(0,l.useEffect)(()=>{J()},[J]);let W=(0,l.useCallback)(async e=>{y(!0),C(null);try{let r=await (0,u.QDm)({isin:e});if(!(0,h.k9)(r)){E(!0);return}let a="string"==typeof r.data.data?JSON.parse(r.data.data):r.data.data;t(a&&Array.isArray(a)&&a.length>0?a:[])}catch(e){C(e.message||"An error occurred while fetching data.")}finally{y(!1)}},[]),X=(0,l.useCallback)(async()=>{let e=T.length>0?T:Q.current;if(I||0===e.length){c.oR.error("Please select orders to delete.");return}R(!0);try{if(!(null==F?void 0:F.scrip)||!_){c.oR.error("Please select a company first.");return}let t=e.length>0?e:z?[z]:[];if(0===t.length){c.oR.error("No orders selected for deletion");return}let r=t.map(e=>({boid:e.boid,scrip:F.scrip,isin:e.original.isin,buybackid:Number.parseInt(_),clientId:e.clientId.toString(),quantity:e.quantity.toString(),applied:e.applied.toString(),id:e.original.id})),a=await (0,u.hZ6)({data:r});if(!(0,h.k9)(a)){E(!0);return}let l=a.data;l&&l.data?l.data.every(e=>!0===e.status)?(c.oR.success("Order deleted successfully"),await W(F.isin)):c.oR.error("Failed to delete order. Please check and try again."):c.oR.error("Failed to delete order: ".concat(a.data.message||"Unknown error"))}catch(e){console.error("Error deleting order:",e),c.oR.error("An error occurred while deleting the order: ".concat(e.message||"Unknown error"))}finally{var t;R(!1),K(!1),null===(t=U.current)||void 0===t||t.close()}},[T,I,F,_,z,W]);return(0,l.useEffect)(()=>{if(!Z.current||0===e.length)return;let t=N()(Z.current);return t.off("select.dt"),t.on("select.dt",(e,t,r,a)=>{if("row"===r){if(1===a.length){let e=a[0],r=t.row(e).data(),l=t.row(e).node();if(["PROCESSED"].includes(r.original.orderStatus)){N()(l).data("suppressCheckbox",!0),t.row(e).deselect(),c.oR.warning("Cannot select order for ".concat(r.original.clientId||"this client"," - Please only select orders with the 'APPLIED' status."),{position:"top-center",duration:5e3}),N()(l).find(".rowCheckbox").prop("checked",!1);return}if(["CANCELLED"].includes(r.original.orderStatus)){N()(l).data("suppressCheckbox",!0),t.row(e).deselect(),c.oR.warning("Cannot select order for ".concat(r.original.clientId||"this client"," - The order is already cancelled. Please only select orders with the 'APPLIED' order status."),{position:"top-center",duration:5e3}),N()(l).find(".rowCheckbox").prop("checked",!1);return}}else if(a.length>1){let e=[];if(a.forEach(r=>{var a,l;let s=t.row(r).data(),n=t.row(r).node();["PROCESSED","CANCELLED"].includes(s.original.orderStatus)?(N()(n).data("suppressCheckbox",!0),t.row(r).deselect(),e.push((null==s?void 0:null===(l=s.original)||void 0===l?void 0:l.clientId)||"this client"),N()(n).find(".rowCheckbox").prop("checked",!1)):["APPLIED"].includes(null==s?void 0:null===(a=s.original)||void 0===a?void 0:a.orderStatus)&&(N()(n).find(".rowCheckbox").prop("checked",!0),N()(n).data("shouldCheck",!0))}),e.length>0){let t=e.slice(0,3),r=e.length-3;r>0?c.oR.warning("Cannot select orders for clients: ".concat(t.join(", ")," and ").concat(r," more - Please only select orders with the 'APPLIED' status."),{position:"top-center",duration:5e3}):c.oR.warning("Cannot select order".concat(t.length>1?"s":""," for ").concat(t.join(", ")," - Please only select orders with the 'APPLIED' status."),{position:"top-center",duration:5e3})}}}}),()=>{Z.current&&t.off("select.dt")}},[e]),(0,a.jsxs)(f.default,{children:[(0,a.jsxs)(s.Zp,{className:"w-full",children:[(0,a.jsx)(s.aR,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-2 sm:space-y-0",children:(0,a.jsx)(s.ZB,{children:"Manage Orders"})}),(0,a.jsxs)(s.Wu,{children:[(0,a.jsx)("div",{className:"bg-slate-50 rounded-md p-1 mb-2",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-start md:items-center justify-between",children:[(0,a.jsx)("div",{className:"w-full md:w-auto",children:(0,a.jsx)("div",{className:"relative w-full md:w-[260px]",children:(0,a.jsxs)(o.l6,{value:_,onValueChange:e=>{if(!e||"NONE"===e){c.oR.error("Please select a company."),L(""),t([]),H(null);return}L(e);let r=O.find(t=>t.value===e);r&&(H(r),W(r.isin))},children:[(0,a.jsx)(o.bq,{className:"w-full bg-white h-9",children:(0,a.jsx)(o.yv,{placeholder:"Select a company"})}),(0,a.jsxs)(o.gC,{children:[(0,a.jsx)(o.eb,{value:"NONE",children:"Select a company"}),O.map(e=>(0,a.jsx)(o.eb,{value:e.value,children:e.scrip},e.value))]})]})})}),F&&"NONE"!==_?(0,a.jsx)(a.Fragment,{children:e.length>0&&(0,a.jsxs)(n.$,{variant:"destructive",size:"sm",onClick:()=>{var e;let t=G();if(0===t.length){c.oR.error("Please select at least one order to delete");return}Q.current=t,q(t),null===(e=U.current)||void 0===e||e.open()},className:"whitespace-nowrap",children:[" ",(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Delete Order"]})}):null]})}),(0,a.jsx)(A.A,{selectedCompanyDetails:F}),_&&"NONE"!==_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.w,{}),r?(0,a.jsx)(p.A,{columns:4,rows:10}):w?(0,a.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-100 rounded-md",children:w}):(0,a.jsx)(a.Fragment,{children:0===e.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 text-center bg-muted/20 rounded-md border border-dashed border-muted-foreground/20 my-4",children:[(0,a.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,a.jsx)(g.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No records found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4 max-w-md",children:"There are no records available for this criteria."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",ref:Z,children:(0,a.jsx)(M,{columns:x,data:e,selectableRows:!0,showPagination:!0,filterColumn:"clientId"},"buyback_table_".concat(e.length))})})]})]})]}),(0,a.jsx)(P.A,{ref:U,title:"Confirm Delete ?",onConfirm:X,confirmLoading:I,confirmText:"Delete",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-base font-medium",children:"Are you sure you want to delete the selected buyback order(s)?"}),F&&(0,a.jsx)("div",{className:"flex flex-col space-y-2 p-3 bg-slate-50 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 flex-shrink-0 text-blue-500"}),(0,a.jsx)("span",{className:"font-semibold",children:F.scrip}),F.buybackprice>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 ml-auto",children:[(0,a.jsx)(k.A,{className:"h-5 w-5 flex-shrink-0 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"ISIN:"}),(0,a.jsx)(i.E,{variant:"secondary",className:"font-medium",children:F.isin})]})]})})]}),(0,a.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,a.jsxs)(v.XI,{children:[(0,a.jsx)(v.A0,{children:(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nd,{className:"w-1/3",children:"ClientId"}),(0,a.jsx)(v.nd,{className:"w-1/4",children:"Applied Quantity"})]})}),(0,a.jsx)(v.BF,{children:T&&T.length>0?T.map((e,t)=>{var r;return(0,a.jsxs)(v.Hj,{children:[(0,a.jsx)(v.nA,{className:"font-medium",children:e.clientId}),(0,a.jsx)(v.nA,{className:"font-medium",children:(null===(r=e.original)||void 0===r?void 0:r.applied)||"-"})]},t)}):(0,a.jsx)(v.Hj,{children:(0,a.jsx)(v.nA,{colSpan:3,className:"text-center py-4",children:"No scrip selected"})})})]})}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground mt-2",children:(0,a.jsx)("p",{children:"Please review the details before confirming."})})]})}),S&&(0,a.jsx)(h.Bs,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3740,1181,8526,8562,164,2589,814,8007,5565,9526,6143,4015,8665,6527,7733,6137,7555,7328,9086,1816,8441,1517,7358],()=>t(64201)),_N_E=e.O()}]);
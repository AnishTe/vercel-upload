(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853,9237],{10316:(e,t,a)=>{Promise.resolve().then(a.bind(a,68654))},87364:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(67401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},61594:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(67401).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},16233:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(67401).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},20853:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(67401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1466:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(67401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},77711:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var l=a(21956),r=a.n(l)},21956:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let l=a(60306)._(a(30580));function r(e,t){var a;let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,l.default)({...n,modules:null==(a=n.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39827:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let l=a(93719);function r(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return a}},30580:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let l=a(95155),r=a(12115),n=a(39827),s=a(79214);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},a=(0,r.lazy)(()=>t.loader().then(i)),d=t.loading;function c(e){let i=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?r.Suspense:r.Fragment,u=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(s.PreloadChunks,{moduleIds:t.modules}):null,(0,l.jsx)(a,{...e})]}):(0,l.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(a,{...e})});return(0,l.jsx)(c,{...o?{fallback:i}:{},children:u})}return c.displayName="LoadableComponent",c}},79214:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}});let l=a(95155),r=a(47650),n=a(75861),s=a(18284);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=n.workAsyncStorage.getStore();if(void 0===a)return null;let i=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files;i.push(...t)}}return 0===i.length?null:(0,l.jsx)(l.Fragment,{children:i.map(e=>{let t=a.assetPrefix+"/_next/"+(0,s.encodeURIPath)(e);return e.endsWith(".css")?(0,l.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,r.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},68654:(e,t,a)=>{"use strict";a.d(t,{default:()=>G});var l=a(95155),r=a(12115),n=a(43932),s=a.n(n),i=a(22130),o=a(12711),d=a(67328),c=a(47282),u=a(35055),m=a(33900),p=a(21567);let f=e=>{let{boids:t}=e,[a,n]=(0,r.useState)(t.length>0?t[0].boid:"");return(0,l.jsx)("select",{name:"boid","aria-label":"Select BOID",className:"w-[180px] p-2 bg-background text-foreground border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:a,onChange:e=>n(e.target.value),children:t.length>0?t.map(e=>(0,l.jsx)("option",{value:e.boid,children:e.boid},e.boid)):(0,l.jsx)("option",{value:"",disabled:!0,children:"No BOIDs available"})})},h=e=>!!e&&""!==e.trim()&&/^[a-zA-Z0-9.\-_]{2,256}@[a-zA-Z]{2,64}$/.test(e),x=e=>{let{row:t}=e,[a,n]=(0,r.useState)(""),[s,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!1);return(0,l.jsxs)("div",{children:[(0,l.jsx)(m.p,{name:"upiId",id:"upiId_".concat(t.original.client_id),"aria-label":"Enter UPI ID",type:"text",autoComplete:"off",className:"w-[200px] p-2 bg-background text-foreground border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 \n                          ".concat(s?"border-gray-300":"border-red-500"),value:a,onChange:e=>{e.stopPropagation(),e.preventDefault();let t=e.target.value;n(t),i(""===t.trim()||h(t)),d(""!==t.trim())},onBlur:()=>d(""!==a.trim()),placeholder:"username@bank"}),o&&!s&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Please enter a valid UPI ID (username@bank)"}),o&&s&&""!==a.trim()&&(0,l.jsx)("p",{className:"text-green-500 text-xs mt-1",children:"Valid UPI ID"})]})},v=[{id:"client_id",accessorKey:"client_id",header:"Client ID",cell:e=>{var t;let{row:a}=e,r=null!==(t=a.original.client_id)&&void 0!==t?t:"-";return(0,l.jsx)("span",{children:r})}},{id:"clientName",accessorKey:"clientName",header:"Client Name",cell:e=>{let{row:t}=e,a=t.original.clientName,r=a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"",n=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],s=Math.floor(Math.random()*n.length),i=n[s];return(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(u.eu,{className:"w-8 h-8",children:(0,l.jsx)(u.q5,{className:(0,p.cn)("w-full h-full flex items-center justify-center font-bold",i),children:r})}),(0,l.jsx)("span",{className:"truncate max-w-[150px] font-medium",title:a,children:a})]})}},{id:"pan",accessorKey:"pan",header:"PAN"},{id:"boid",header:"BOID",cell:e=>{var t;let{row:a}=e,r=(null==a?void 0:null===(t=a.original)||void 0===t?void 0:t.boidsDetails)||[];return(0,l.jsx)(f,{boids:r})}},{id:"upiId",header:"UPI ID",cell:e=>{let{row:t}=e;return(0,l.jsx)(x,{row:t})}},{id:"lot",header:"Lot"},{id:"amount",header:"Amount"},{id:"orderStatus",accessorKey:"orderStatus",header:"Order Status",cell:e=>{let{row:t}=e,a=t.original.ipoAppliedStatus.orderStatus;return(0,l.jsx)("span",{children:a||""})}},{id:"bseStatus",accessorKey:"BseStatus",header:"Status",cell:e=>{let{row:t}=e,a=t.original.ipoAppliedStatus.BseStatus;return(0,l.jsx)("span",{children:a||""})}}];var g=a(85147),b=a(76046),j=a(83469),y=a(85672),N=a(77711),w=a(73312),I=a(30814),C=a(51344),S=a(74317),k=a(69606),P=a(85060),D=a(43415),O=a(44870),A=a(2291),R=a(37528),E=a(87081),B=a(20853),F=a(1466),_=a(16233),L=a(87364),M=a(61594),q=a(25121),z=a(98986),V=a(1541);function $(e){var t,a,n,s,i,o;let{disabled:p}=e,[f,h]=(0,r.useState)(!1),[x,v]=(0,r.useState)(null),[g,N]=(0,r.useState)(!1),[S,$]=(0,r.useState)(null),[J,T]=(0,r.useState)(0),[U,K]=(0,r.useState)(["1","2","3","4","5"]),[Z,G]=(0,r.useState)(null),[H,Y]=(0,r.useState)(!1),[W,Q]=(0,r.useState)(""),[X,ee]=(0,r.useState)(!1),[et,ea]=(0,r.useState)(!1),[el,er]=(0,r.useState)(!1),{selectedIPO:en}=(0,y.y)(),es=(0,b.useSearchParams)(),ei=(0,b.useRouter)(),[eo,ed]=(0,r.useState)(!1),[ec,eu]=(0,r.useState)(!1),[em,ep]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=es.get("ipoId");e?v(e.replace(/\.html$/,"")):ei.push((0,j.K)("/branch/dashboard/ipo"))},[ei,es]);let ef=D.Ik({bankAccountNO:D.Yj().optional(),bankName:D.Yj().optional(),depositoryId:D.Yj().min(1,"Depository ID is required"),beneficiaryId:D.Yj().min(1,"Beneficiary ID is required"),selectedBOID:D.Yj().min(1,"BOID is required"),lot:D.Yj().min(1,"Lot is required"),quantity:D.ai().int().positive("Quantity must be a positive integer"),rate:D.ai().positive().nullable().optional(),autoCutOff:D.zM()}).superRefine((e,t)=>{e.autoCutOff||null!==e.rate||t.addIssue({code:D.eq.custom,path:["rate"],message:"Rate is required when Auto Cut-off is not enabled"});let a=(null==en?void 0:en.minpricerange)?Number(en.minpricerange):0,l=(null==en?void 0:en.maxpricerange)?Number(en.maxpricerange):0;void 0!==e.rate&&null!==e.rate&&(e.rate<a||e.rate>l)&&t.addIssue({code:D.eq.custom,path:["rate"],message:"Rate must be between ".concat(a," and ").concat(l)})}),eh=(0,k.mN)({resolver:(0,P.u)(ef),defaultValues:{bankAccountNO:"",bankName:"",depositoryId:"",beneficiaryId:"",selectedBOID:"",lot:"1",quantity:15,rate:(null==en?void 0:en.maxpricerange)?Number.parseFloat(en.maxpricerange):0,autoCutOff:!0}});(0,r.useEffect)(()=>{en&&X&&(eh.setValue("lot","1"),eb())},[en,X,eh]);let ex=eh.watch("autoCutOff"),ev=eh.watch("lot"),eg=async()=>{if(!W.trim()){ee(!1),I.oR.error("Please enter a Client ID / BOID");return}$(null),ee(!1),T(0),eh.reset({bankAccountNO:"",bankName:"",depositoryId:"",beneficiaryId:"",selectedBOID:"",lot:"1",quantity:15,rate:(null==en?void 0:en.maxpricerange)?Number.parseFloat(en.maxpricerange):0,autoCutOff:!0}),N(!0),G(null);try{let n=await (0,c.T7E)({clientId:W.trim(),ipoId:x});if(!(0,d.k9)(n)){er(!0);return}let s="string"==typeof n.data.data?JSON.parse(n.data.data):n.data.data;if(s){var e,t,a,l,r;if(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.data){if((null==s?void 0:s.status)===!1)I.oR.error((null==s?void 0:s.message)||"Failed to fetch client data. Please try again."),ee(!1);else{let e=n.data.data;(null===(t=e.ipoAppliedStatus)||void 0===t?void 0:t.allowToApply)===!1&&(ea(!1),ed(!0),eu(!0));let s=(null===(a=e.applicantBoId)||void 0===a?void 0:a.find(e=>"CDSL"===e.depository))||(null===(l=e.applicantBoId)||void 0===l?void 0:l[0]);s&&(eh.setValue("selectedBOID",s.boid),eh.setValue("depositoryId",s.dpid),eh.setValue("beneficiaryId",s.boid));let i=null===(r=e.bankDetails)||void 0===r?void 0:r.find(e=>"Yes"===e.defaultAccount);i&&(eh.setValue("bankAccountNO",i.accountNumber),eh.setValue("bankName",i.bankName)),$(e),ee(!0),eb()}}else throw Error("Invalid API response format.")}else throw Error("Failed to fetch client data")}catch(e){G(e.message||"An error occurred while fetching data.")}finally{N(!1)}},eb=()=>{if(en){let e=Number.parseInt(en.noofequitysharesbid||"0"),t=Number.parseFloat(en.cutoffprice||"0"),a=Number.parseInt(en.maxlotsize||"0"),l=Number.parseFloat(en.maxpricerange||"0"),r=Array.from({length:a},(e,t)=>(t+1).toString()),n=e*(Number.parseInt(eh.getValues("lot"))||1);T(n*t),K(r),eh.setValue("quantity",n),ex?eh.setValue("rate",l):eh.setValue("rate",null)}};(0,r.useEffect)(()=>{eb()},[en,ex,eh.watch("lot")]);let ej=async e=>{Y(!0)},ey=()=>{ea(!0)},eN=async function(){var e,t,a,l,r,n,s,i,o,u,m,p,f,v,g,b;let j=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ep(!0),N(!0),G(null);let y=eh.getValues(),w=null==S?void 0:null===(e=S.applicantBoId)||void 0===e?void 0:e.find(e=>e.boid===y.selectedBOID),C=[{boid:y.selectedBOID,dpid:y.depositoryId,depository:(null==w?void 0:w.depository)||"CDSL",companyname:null==en?void 0:en.companyname,ipocompanymasterId:x,name:null==S?void 0:null===(t=S.clientDetails)||void 0===t?void 0:t.clientName,upiId:"",lotsapplied:y.lot,clientId:null==S?void 0:null===(a=S.clientDetails)||void 0===a?void 0:a.clientId,mobile:null==S?void 0:null===(l=S.clientDetails)||void 0===l?void 0:l.mobile,pan:null==S?void 0:null===(r=S.clientDetails)||void 0===r?void 0:r.pan,email:null==S?void 0:null===(n=S.clientDetails)||void 0===n?void 0:n.email,applicationno:"",quantity:y.quantity.toString(),rate:y.autoCutOff?null==en?void 0:en.maxpricerange:y.rate,formtype:"offline",cuttoffflag:"0",category:(null==en?void 0:en.category)||"Retail",companySymbol:null==en?void 0:en.companysymbol,actionCode:"n",Exchange:null==en?void 0:en.companylogoex}];try{let e=await (0,c.tRN)({data:C});if(!(0,d.k9)(e)){er(!0);return}if(console.log(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.data),null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.data){let t=e.data.data;(null===(o=t[0])||void 0===o?void 0:o.orderstatus)===!0&&(I.oR.success("IPO application submitted successfully."),j?(sessionStorage.setItem("category",(null==en?void 0:en.category)||""),sessionStorage.setItem("companyname",(null==en?void 0:en.companyname)||""),sessionStorage.setItem("companyAddress",(null==en?void 0:en.companyAddress)||""),sessionStorage.setItem("logolink",(null==en?void 0:en.logolink)||""),sessionStorage.setItem("cutoffprice",(null==en?void 0:en.cutoffprice)||""),sessionStorage.setItem("mobile",null==S?void 0:null===(u=S.clientDetails)||void 0===u?void 0:u.mobile),sessionStorage.setItem("BankName",(null===(m=y.bankName)||void 0===m?void 0:m.toString())||""),sessionStorage.setItem("isin",(null==en?void 0:en.isin)||""),sessionStorage.setItem("pan",null==S?void 0:null===(p=S.clientDetails)||void 0===p?void 0:p.pan),sessionStorage.setItem("applicationno",null===(f=t[0])||void 0===f?void 0:f.applicationNo),sessionStorage.setItem("calculatedAmount",J.toString()||"0"),sessionStorage.setItem("AccNo",(null===(v=y.bankAccountNO)||void 0===v?void 0:v.toString())||""),sessionStorage.setItem("clientName",null==S?void 0:null===(g=S.clientDetails)||void 0===g?void 0:g.clientName),sessionStorage.setItem("email",null==S?void 0:null===(b=S.clientDetails)||void 0===b?void 0:b.email),sessionStorage.setItem("calculatedQuantity",y.quantity.toString()),sessionStorage.setItem("depository",w.depository),sessionStorage.setItem("CDSLboid",w.boid),sessionStorage.setItem("NSDLboid",w.boid),sessionStorage.setItem("NSDLdpid",w.dpid),setTimeout(()=>{let e=J>5e5?"/printBackend.html":"/print_form.html";window.open(e,"_blank")},1e3)):I.oR.success("Application submitted successfully!"))}else throw Error("Invalid API response format.")}catch(e){G(e.message||"An error occurred while submitting the application."),I.oR.error(e.message||"An error occurred while submitting the application.")}finally{N(!1),ep(!1),et&&ea(!1),H&&Y(!1),h(!1)}},ew=(0,r.useCallback)(e=>{if(!en)return;let t=Number.parseInt(en.noofequitysharesbid||"0"),a=Number.parseFloat(en.cutoffprice||"0"),l=t*Number.parseInt(e||"1");eh.setValue("quantity",l,{shouldDirty:!0,shouldTouch:!0}),T(l*a)},[eh,en]);return(0,r.useEffect)(()=>{ev&&ew(ev)},[ev,ew]),(0,l.jsxs)("div",{children:[(0,l.jsxs)(C.lG,{open:f,onOpenChange:h,children:[(0,l.jsx)(C.zM,{asChild:!0,children:(0,l.jsx)(w.$,{disabled:p,children:"Print IPO Form"})}),(0,l.jsxs)(C.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto pb-0",children:[(0,l.jsxs)(C.c7,{children:[(0,l.jsxs)(C.L3,{children:["Apply for IPO: ",null==en?void 0:en.companyname]}),(0,l.jsx)(C.rr,{children:"Enter client details to apply for the IPO"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsxs)("div",{className:"flex flex-col space-y-2 mb-4 w-full sm:w-96",children:[(0,l.jsx)(z.J,{htmlFor:"clientId",children:"ClientID / BOID:"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,l.jsx)(m.p,{id:"clientId",type:"text",placeholder:"Enter Client ID/BOID",value:W,onChange:e=>Q(e.target.value),onKeyDown:e=>{"Enter"===e.key&&eg()},className:"w-full bg-white text-black placeholder-gray-400"}),(0,l.jsx)(w.$,{onClick:eg,disabled:g,size:"sm",children:(0,l.jsx)(B.A,{className:"h-4 w-4"})})]})]}),g&&(0,l.jsx)("p",{className:"text-center mt-4",children:"Searching..."})]}),X&&(0,l.jsxs)(l.Fragment,{children:[S&&(0,l.jsx)("div",{className:"mb-6 bg-muted/30 dark:bg-muted/10 p-4 rounded-lg border dark:border-slate-800 transition-all duration-200",children:(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[(0,l.jsx)("div",{children:g?(0,l.jsx)(E.E,{className:"w-16 h-16 rounded-full"}):(0,l.jsx)(u.eu,{className:"w-16 h-16 border-2 border-primary/10",children:(0,l.jsx)(u.q5,{className:"bg-primary/5 text-primary",children:(0,l.jsx)(F.A,{className:"w-8 h-8"})})})}),(0,l.jsx)("div",{children:g?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E.E,{className:"h-6 w-48 mb-2"}),(0,l.jsx)(E.E,{className:"h-4 w-32"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h3",{className:"text-xl font-bold capitalize",children:null===(t=S.clientDetails)||void 0===t?void 0:t.clientName}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,l.jsx)(q.E,{variant:"outline",className:"text-sm font-medium py-1 px-2",children:null===(a=S.clientDetails)||void 0===a?void 0:a.clientId}),(0,l.jsxs)(q.E,{variant:"outline",className:"text-sm font-medium py-1 px-2 flex items-center gap-1",children:[(0,l.jsx)(_.A,{className:"w-3.5 h-3.5"}),null===(n=S.clientDetails)||void 0===n?void 0:n.pan]})]})]})})]}),(0,l.jsx)("div",{className:"w-full md:w-auto mt-4 md:mt-0",children:g?(0,l.jsx)(E.E,{className:"h-10 w-full md:w-64"}):(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Select BOID"}),(0,l.jsxs)(R.l6,{onValueChange:e=>{var t;eh.setValue("selectedBOID",e);let a=null===(t=S.applicantBoId)||void 0===t?void 0:t.find(t=>t.boid===e);a&&(eh.setValue("depositoryId",a.dpid),eh.setValue("beneficiaryId",a.boid))},value:eh.watch("selectedBOID"),disabled:g,children:[(0,l.jsx)(R.bq,{className:"w-full md:w-64",children:(0,l.jsx)(R.yv,{placeholder:"Select BOID"})}),(0,l.jsx)(R.gC,{children:null===(s=S.applicantBoId)||void 0===s?void 0:s.map(e=>(0,l.jsx)(R.eb,{value:e.boid,children:e.boid},e.boid))})]})]})})]})}),(0,l.jsx)(O.lV,{...eh,children:(0,l.jsx)("form",{onSubmit:eh.handleSubmit(ej),children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"bg-muted/30 dark:bg-muted/10 p-4 rounded-lg border dark:border-slate-800 transition-all duration-200",children:[(0,l.jsx)("div",{className:"flex items-center gap-2 text-base font-medium mb-4",children:(0,l.jsx)("span",{children:"\uD83D\uDCB0 Payment Method"})}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[(0,l.jsx)(O.zB,{control:eh.control,name:"bankAccountNO",render:e=>{let{field:t}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Bank Account Number"}),(0,l.jsx)(O.MJ,{children:(0,l.jsx)(m.p,{...t,disabled:!0})}),(0,l.jsx)(O.C5,{})]})}}),(0,l.jsx)(O.zB,{control:eh.control,name:"bankName",render:e=>{var t;let{field:a}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Bank Name"}),(0,l.jsxs)(R.l6,{onValueChange:e=>{let[t,l]=e.split("|");a.onChange(t),eh.setValue("bankAccountNO",l)},value:a.value&&eh.getValues("bankAccountNO")?"".concat(a.value,"|").concat(eh.getValues("bankAccountNO")):"",children:[(0,l.jsx)(O.MJ,{children:(0,l.jsx)(R.bq,{children:(0,l.jsx)(R.yv,{placeholder:"Select bank"})})}),(0,l.jsx)(R.gC,{children:null==S?void 0:null===(t=S.bankDetails)||void 0===t?void 0:t.map((e,t)=>(0,l.jsxs)(R.eb,{value:"".concat(e.bankName,"|").concat(e.accountNumber),children:[e.bankName," ","Yes"===e.defaultAccount?"(Default)":""," -"," ",e.accountNumber]},"".concat(e.bankName,"-").concat(e.accountNumber,"-").concat(t)))})]}),(0,l.jsx)(O.C5,{})]})}})]})]}),(0,l.jsxs)("div",{className:"bg-muted/30 dark:bg-muted/10 p-4 rounded-lg border dark:border-slate-800 transition-all duration-200",children:[(0,l.jsx)("div",{className:"flex items-center gap-2 text-base font-medium mb-4",children:(0,l.jsx)("span",{children:"\uD83C\uDFE6 Depository Details"})}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsx)(O.zB,{control:eh.control,name:"depositoryId",render:e=>{let{field:t}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Depository ID"}),(0,l.jsx)(O.MJ,{children:(0,l.jsx)(m.p,{...t,disabled:!0})}),(0,l.jsx)(O.C5,{})]})}}),(0,l.jsx)(O.zB,{control:eh.control,name:"beneficiaryId",render:e=>{let{field:t}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Beneficiary ID"}),(0,l.jsx)(O.MJ,{children:(0,l.jsx)(m.p,{...t,disabled:!0})}),(0,l.jsx)(O.C5,{})]})}})]})]}),(0,l.jsxs)("div",{className:"bg-muted/30 dark:bg-muted/10 p-4 rounded-lg border dark:border-slate-800 transition-all duration-200",children:[(0,l.jsx)("div",{className:"flex items-center gap-2 text-base font-medium mb-4",children:(0,l.jsx)("span",{children:"\uD83D\uDCC8 Investment Details"})}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsx)(O.zB,{control:eh.control,name:"lot",render:e=>{let{field:t}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Select Lot"}),(0,l.jsx)(O.MJ,{children:(0,l.jsxs)("select",{...t,onChange:e=>{t.onChange(e.target.value),eh.setValue("lot",e.target.value),ew(e.target.value)},className:"w-full border border-input bg-background text-sm rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Select lot"}),U.map(e=>(0,l.jsxs)("option",{value:e,children:["Lot: ",e]},e))]})}),(0,l.jsx)(O.Rr,{children:"Number of lots to apply for"}),(0,l.jsx)(O.C5,{})]})}}),(0,l.jsx)(O.zB,{control:eh.control,name:"quantity",render:e=>{let{field:t}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Quantity"}),(0,l.jsx)(O.MJ,{children:(0,l.jsx)(m.p,{type:"number",...t,onChange:e=>t.onChange(Number.parseInt(e.target.value)),disabled:!0})}),(0,l.jsx)(O.Rr,{children:"Total shares based on selected lot"}),(0,l.jsx)(O.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[(0,l.jsx)(O.zB,{control:eh.control,name:"rate",render:e=>{var t;let{field:a}=e;return(0,l.jsxs)(O.eI,{className:"space-y-2",children:[(0,l.jsx)(O.lR,{children:"Rate"}),(0,l.jsx)(O.MJ,{children:(0,l.jsx)(m.p,{type:"number",...a,onChange:e=>{let t=e.target.value?Number.parseFloat(e.target.value):null;a.onChange(t)},value:null!==(t=a.value)&&void 0!==t?t:"",placeholder:"Enter rate (".concat(null==en?void 0:en.minpricerange,"-").concat(null==en?void 0:en.maxpricerange,")"),disabled:ex,min:null==en?void 0:en.minpricerange,max:null==en?void 0:en.maxpricerange})}),(0,l.jsx)(O.Rr,{children:ex?"Using cut-off price automatically":"Range: ".concat(null==en?void 0:en.minpricerange," - ").concat(null==en?void 0:en.maxpricerange)}),(0,l.jsx)(O.C5,{})]})}}),(0,l.jsx)(O.zB,{control:eh.control,name:"autoCutOff",render:e=>{let{field:t}=e;return(0,l.jsxs)(O.eI,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 shadow-sm",children:[(0,l.jsx)(O.MJ,{children:(0,l.jsx)(A.S,{checked:t.value,onCheckedChange:e=>{t.onChange(e),e?eh.setValue("rate",Number(null==en?void 0:en.maxpricerange)||null):eh.setValue("rate",null)}})}),(0,l.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,l.jsx)(O.lR,{children:"Auto Cut-off Pricing"}),(0,l.jsx)(O.Rr,{children:"Use cut-off price automatically"})]})]})}})]})]}),(0,l.jsx)("div",{className:"bg-muted/30 dark:bg-muted/10 p-6 rounded-lg border dark:border-slate-800 transition-all duration-200",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h3",{className:"text-base font-medium mb-2",children:"\uD83D\uDCB5 Total Amount Payable"}),(0,l.jsx)("div",{className:"text-2xl font-bold",children:g?(0,l.jsx)(E.E,{className:"h-8 w-40 mx-auto"}):(0,l.jsx)(V.A,{animateOn:"view",revealDirection:"center",characters:"12345678",text:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Number.parseFloat(J.toFixed(2)))})}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[eh.watch("lot")," lot(s) \xd7 ",eh.watch("quantity")," shares"]})]})})]})})})]})]}),(0,l.jsxs)("div",{className:"sticky bottom-0 bg-background dark:bg-background py-4 border-t flex flex-col sm:flex-row justify-between gap-3 z-10",children:[(0,l.jsxs)(w.$,{type:"button",variant:"outline",onClick:()=>ei.push((0,j.K)("/branch/dashboard/ipo")),className:"w-full sm:w-auto",children:[(0,l.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"Back to IPO List"]}),(0,l.jsx)(w.$,{type:"button",className:"w-full sm:w-auto",onClick:()=>ey(),disabled:em||eo||!X||ec,children:em?"Processing...":(0,l.jsx)(l.Fragment,{children:"\uD83D\uDDA8️ Print IPO Form"})})]})]})]}),eo&&(0,l.jsx)(C.lG,{open:eo,onOpenChange:ed,children:(0,l.jsxs)(C.Cf,{className:"max-w-[425px]",children:[(0,l.jsx)(C.c7,{children:(0,l.jsxs)(C.L3,{className:"flex items-center gap-2 font-bold text-lg",children:[(0,l.jsx)(M.A,{className:"h-5 w-5 text-destructive"}),"IPO Application Restriction"]})}),(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsxs)("p",{className:"mb-4",children:["Client ",(0,l.jsx)("span",{className:"font-bold",children:W})," has already applied for this"," ",(0,l.jsx)("span",{className:"font-bold",children:(null==S?void 0:null===(i=S.ipoAppliedStatus)||void 0===i?void 0:i.companyName)||""})," IPO. Please check in View Orders for details."]}),(0,l.jsx)("div",{className:"bg-muted/50 dark:bg-muted/20 p-3 rounded-md mb-4",children:(0,l.jsxs)("p",{children:["Order Status: ",(0,l.jsx)("span",{className:"font-bold",children:(null==S?void 0:null===(o=S.ipoAppliedStatus)||void 0===o?void 0:o.orderStatus)||""})]})})]}),(0,l.jsxs)(C.Es,{className:"flex flex-col sm:flex-row gap-2 sm:gap-0",children:[(0,l.jsx)(w.$,{variant:"outline",onClick:()=>ei.push((0,j.K)("/branch/dashboard/ipo")),className:"w-full sm:w-auto",children:"Go to IPO Page"}),(0,l.jsx)(w.$,{onClick:()=>ei.push((0,j.K)("/branch/dashboard/ipo/view-ordersBranch?ipoId=".concat(null==en?void 0:en.ipoid))),className:"w-full sm:w-auto",children:"View History"})]})]})}),et&&(0,l.jsx)(C.lG,{open:et,onOpenChange:ea,children:(0,l.jsxs)(C.Cf,{className:"sm:max-w-[425px]",children:[(0,l.jsxs)(C.c7,{children:[(0,l.jsx)(C.L3,{children:"Print IPO Form"}),(0,l.jsx)(C.rr,{className:"pt-4",children:"Are you sure you want to submit and print this IPO application?"})]}),(0,l.jsxs)("div",{className:"py-4",children:[(0,l.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Company:"}),(0,l.jsx)("span",{className:"font-medium",children:null==en?void 0:en.companyname})]}),(0,l.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Bank:"}),(0,l.jsx)("span",{className:"font-medium",children:eh.watch("bankName")})]}),(0,l.jsxs)("div",{className:"flex justify-between py-2",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,l.jsx)("span",{className:"font-medium",children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Number.parseFloat(J.toFixed(2)))})]})]}),(0,l.jsxs)(C.Es,{children:[(0,l.jsx)(w.$,{variant:"outline",onClick:()=>ea(!1),children:"Cancel"}),(0,l.jsx)(w.$,{onClick:()=>eN(!0),disabled:em,children:em?"Processing...":"Submit & Print"})]})]})}),el&&(0,l.jsx)(d.Bs,{}),H&&(0,l.jsx)(C.lG,{open:H,onOpenChange:Y,children:(0,l.jsxs)(C.Cf,{className:"sm:max-w-[425px]",children:[(0,l.jsxs)(C.c7,{children:[(0,l.jsx)(C.L3,{children:"Apply IPO Confirmation"}),(0,l.jsx)(C.rr,{className:"py-2",children:"Are you sure you want to submit the IPO application?"})]}),(0,l.jsxs)(C.Es,{children:[(0,l.jsx)(w.$,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),(0,l.jsx)(w.$,{onClick:()=>eN(),disabled:g,children:g?"Submitting...":"Submit"})]})]})})]})}var J=a(58690);let T=(0,N.default)(()=>Promise.all([a.e(1122),a.e(3930),a.e(343),a.e(9690),a.e(4390),a.e(2449),a.e(8417),a.e(4156),a.e(227),a.e(5996),a.e(3302)]).then(a.bind(a,75996)),{loadableGenerated:{webpack:()=>[75996]},ssr:!1}),U=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),K=e=>{let{selectedIPO:t,clientId:a}=e;if(!t)return;let r=Array.from({length:Math.floor(5e5/(Number.parseInt((null==t?void 0:t.noofequitysharesbid)||"0")*Number.parseFloat((null==t?void 0:t.cutoffprice)||"0")))||0},(e,t)=>(t+1).toString());return(0,l.jsx)("select",{name:"lotDrp",id:"lotDropdown_".concat(a),"aria-label":"Select Lot",className:"w-[100px] p-2 bg-background text-foreground border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",defaultValue:"1",children:null==r?void 0:r.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})},Z=e=>{let{clientId:t,selectedIPO:a}=e,r=Number.parseInt((null==a?void 0:a.noofequitysharesbid)||"0"),n=Number.parseFloat((null==a?void 0:a.cutoffprice)||"0");return(0,l.jsx)("span",{id:"amountCell_".concat(t),children:U(1*r*n||0)})};function G(){let[e,t]=(0,r.useState)(null),a=(0,b.useSearchParams)(),n=(0,b.useRouter)(),[u,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[h,x]=(0,r.useState)([]),{selectedIPO:N,setSelectedIPO:k}=(0,y.y)(),P=(0,r.useRef)(null),[D,O]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),E=(0,r.useRef)([]),B=(0,r.useRef)(null),[F,_]=(0,r.useState)([]),[L,M]=(0,r.useState)({}),[q,z]=(0,r.useState)({});(0,r.useEffect)(()=>{let e=a.get("ipoId");e?t(e.replace(/\.html$/,"")):n.push((0,j.K)("/branch/dashboard/ipo"))},[n,a]),(0,r.useEffect)(()=>{(async()=>{if(e){m(!0),f(null);try{let t=await (0,c.HMN)({ipoId:e});if(!(0,d.k9)(t)){O(!0);return}let a="string"==typeof t.data.data?JSON.parse(t.data.data):t.data.data;if(a&&a.clientDetails){x(a.clientDetails);let e={},t={};a.clientDetails.forEach(a=>{a.upiId&&(e[a.client_id]=a.upiId,t[a.client_id]=!0)}),z(e),M(t)}else throw Error("Failed to fetch Branch Holding data")}catch(e){f(e instanceof Error?e.message:"An error occurred while fetching data.")}finally{m(!1)}}})()},[e]),(0,r.useEffect)(()=>{if(!P.current||!N||0===h.length)return;let e=/^[a-zA-Z0-9.\-_]{2,256}@[a-zA-Z]{2,64}$/,t=(e,t)=>{let a=Number.parseInt((null==N?void 0:N.noofequitysharesbid)||"0"),l=Number.parseFloat((null==N?void 0:N.cutoffprice)||"0");s()("#amountCell_".concat(e)).text(U(t*a*l))};return s()(P.current).off("change",'[id^="lotDropdown_"]').on("change",'[id^="lotDropdown_"]',function(){var e;t((null===(e=s()(this).attr("id"))||void 0===e?void 0:e.split("_")[1])||"",Number(s()(this).val())||1)}),s()('[id^="lotDropdown_"]').each(function(){var e;t((null===(e=s()(this).attr("id"))||void 0===e?void 0:e.split("_")[1])||"",Number(s()(this).val())||1)}),s()(P.current).on("select.dt",(t,a,l,r)=>{"row"===l&&r.forEach(t=>{var l,r,n,i,o;let d=a.row(t).data(),c=a.row(t).node(),u=s()(c).find("input[name='upiId']"),m=null===(l=u.val())||void 0===l?void 0:l.toString().trim();if((null==d?void 0:null===(n=d.original)||void 0===n?void 0:null===(r=n.ipoAppliedStatus)||void 0===r?void 0:r.allowToApply)===!1){a.row(t).deselect(),I.oR.error("Client ".concat(d.original.clientName||"this client","-").concat(d.original.client_id||""," has already applied for this ").concat((null==d?void 0:null===(o=d.original)||void 0===o?void 0:null===(i=o.ipoAppliedStatus)||void 0===i?void 0:i.companyName)||""," IPO. Please\n                                check in View Orders for details."),{position:"top-center",duration:3e3}),s()(c).find(".rowCheckbox").prop("checked",!1);return}m&&e.test(m)?u.removeClass("border-red-500"):(a.row(t).deselect(),I.oR.error("Invalid UPI ID. Please enter a valid UPI ID before selecting.",{position:"top-center",duration:3e3}),s()(c).find(".rowCheckbox").prop("checked",!1),u.addClass("border-red-500"))})}),()=>{P.current&&(s()(P.current).off("change",'[id^="lotDropdown_"]'),s()(P.current).off("select.dt"))}},[h,N]);let V=(0,r.useMemo)(()=>v.map(e=>"amount"===e.id?{...e,cell:e=>{let{row:t}=e,a=t.original.client_id;return(0,l.jsx)(Z,{clientId:a,selectedIPO:N})}}:"lot"===e.id?{...e,cell:e=>{let{row:t}=e,a=t.original.client_id;return(0,l.jsx)(K,{selectedIPO:N,clientId:a})}}:e),[N]),G=(0,r.useCallback)(()=>{if(!P.current)return[];let e=s()(P.current).find("table");if(!e)return[];let t=e.DataTable(),a=t.rows({selected:!0}).nodes(),l=t.rows({selected:!0}).data().toArray().map((e,t)=>{let l=s()(a[t]),r=l.next("tr.child"),n={};return l.add(r).find("input, select, textarea").each(function(){let e=s()(this).attr("name")||s()(this).attr("data-id");e&&(n[e]=this.value)}),{...e,inputs:n}});return E.current=l,_(l),l},[]),H=async()=>{var t,a,l,r,s;let i=E.current;if(0===i.length){I.oR.error("Please select at least one client",{position:"top-center"}),R(!1);return}m(!0),f(null);let o=i.map(t=>{var a;let l=t.client_id,r=t.inputs.lotDrp||1,n=null===(a=t.original.boidsDetails)||void 0===a?void 0:a.find(e=>e.boid===t.inputs.boid),s=(null==n?void 0:n.dpid)||"",i=t.inputs.upiId;return{boid:t.inputs.boid,dpid:s||"",depository:n.depository||"CDSL",companyname:null==N?void 0:N.companyname,ipocompanymasterId:e,name:t.clientName,upiId:i||"",lotsapplied:r||1,clientId:l.toString(),mobile:t.original.mobile||"",pan:t.pan||"",email:t.original.email||"",applicationno:"",quantity:(r*Number.parseInt((null==N?void 0:N.noofequitysharesbid)||"0")).toString(),rate:(null==N?void 0:N.cutoffprice)||"0",formtype:i?"online":"offline",cuttoffflag:"0",category:(null==N?void 0:N.category)||"Retail",companySymbol:null==N?void 0:N.companysymbol,actionCode:"n",Exchange:null==N?void 0:N.companylogoex}});try{let e=await (0,c.tRN)({data:o});if(!(0,d.k9)(e)){O(!0);return}if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.data){let t=e.data.data;(null===(a=t[0])||void 0===a?void 0:a.orderstatus)===!0?((0,J.ZB)("applicationno",null===(r=t[0])||void 0===r?void 0:r.applicationNo),I.oR.success("IPO application submitted successfully.",{position:"top-center"}),setTimeout(()=>{n.push((0,j.K)("/branch/dashboard/ipo")),k(null)},3e3)):(null===(l=t[0])||void 0===l?void 0:l.orderstatus)===!1?setTimeout(()=>{var e;I.oR.error((null===(e=t[0])||void 0===e?void 0:e.error)||"Failed to submit IPO application. Please try again."),n.push((0,j.K)("/branch/dashboard/ipo")),k(null)},3e3):I.oR.error("Failed to submit IPO application. Please try again.",{position:"top-center"})}else throw Error("Invalid API response format.")}catch(e){f(e instanceof Error?e.message:"An error occurred while fetching data.")}finally{m(!1),R(!1),null===(s=B.current)||void 0===s||s.close()}},Y=e=>{let t=s()(e),a=t.val().trim();return a?/^[a-zA-Z0-9.\-_]{2,}@[a-zA-Z]{2,}$/.test(a)?(Q(t),!0):(W(t,"*Invalid UPI ID format. Example: user@upi"),!1):(W(t,"*UPI ID should not be blank."),!1)},W=(e,t)=>{e.addClass("border-red-500"),e.next(".error-message").length||e.after('<span class="error-message text-red-500" style="display: block;">'.concat(t,"</span>"))},Q=e=>{e.removeClass("border-red-500"),e.next(".error-message").remove()};return(0,r.useEffect)(()=>{if(!P.current||0===h.length)return;let e=null;return s()(P.current).on("input","input[name='upiId']",function(){Y(this)}),s()(P.current).on("focus","input[name='upiId']",function(){e&&(clearTimeout(e),e=null),s()(".upi-suggestion-dropdown").remove();let t=s()(this),a=t.closest("tr").data("row-data"),l=t.val(),r=q[a.client_id];if(!l&&r){let e=t.offset(),a=t.outerHeight(),l=s()('\n                    <div class="upi-suggestion-dropdown absolute z-50 bg-white dark:bg-background border rounded-md shadow-md p-1 dark:border-slate-700" style="min-width: '.concat(t.outerWidth(),'px;">\n                        <div class="cursor-pointer p-1.5 hover:bg-muted rounded flex items-center gap-2 text-sm">\n                            <svg class="h-3.5 w-3.5 text-green-500" fill="currentColor" viewBox="0 0 20 20">\n                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 00-1.414 0L9 11.586 6.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l7-7a1 1 0 000-1.414z" clip-rule="evenodd" />\n                            </svg>\n                            ').concat(r,"\n                        </div>\n                    </div>\n                "));l.css({top:e.top+a,left:e.left,position:"absolute"}),l.find("div").on("click",()=>{t.val(r).trigger("input"),l.remove()}),s()("body").append(l)}}),s()(P.current).on("blur","input[name='upiId']",function(){e=setTimeout(()=>{s()(".upi-suggestion-dropdown").remove(),e=null},200)}),()=>{P.current&&(s()(P.current).off("input","input[name='upiId']"),s()(P.current).off("focus","input[name='upiId']"),s()(P.current).off("blur","input[name='upiId']"))}},[h]),(0,r.useEffect)(()=>{let e=e=>{let t=e.target;t&&!s()(t).closest(".upi-suggestion-dropdown, input[name='upiId']").length&&s()(".upi-suggestion-dropdown").remove()},t=e=>{"Escape"===e.key&&s()(".upi-suggestion-dropdown").remove()},a=()=>{s()(".upi-suggestion-dropdown").remove()};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),document.addEventListener("scroll",a),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t),document.removeEventListener("scroll",a)}},[]),(0,r.useEffect)(()=>{if(P.current)return s()(P.current).on("select.dt deselect.dt",()=>{G()}),()=>{P.current&&s()(P.current).off("select.dt deselect.dt")}},[h]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.default,{children:(0,l.jsx)("div",{className:"space-y-4",children:(0,l.jsxs)(i.Zp,{className:"w-full shadow-lg",children:[(0,l.jsxs)(i.aR,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)(i.ZB,{className:"text-lg",children:["Apply for Client IPO: ",null==N?void 0:N.companyname]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsx)(w.$,{onClick:function(){var e;let t=G();if(0===t.length){I.oR.error("Please select at least one client",{position:"top-center"});return}let a=t.filter(e=>{var t;return!(null===(t=e.inputs.upiId)||void 0===t?void 0:t.trim())});if(a.length>0){I.oR.error((0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Invalid UPI ID:"}),(0,l.jsx)("ul",{className:"mt-2",children:a.map((e,t)=>(0,l.jsxs)("li",{className:"text-red-500",children:["• ",e.clientName||e.client_id||"Unknown Client",": Invalid UPI ID"]},t))})]}),{position:"top-center",duration:4e3});return}E.current=t,_(t),null===(e=B.current)||void 0===e||e.open()},children:"Apply for IPO"}),(0,l.jsx)($,{disabled:F.length>0})]})]}),(0,l.jsx)(i.Wu,{children:u?(0,l.jsx)(g.A,{columns:4,rows:10}):p?p&&(0,l.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-100 rounded-md",children:p}):(0,l.jsxs)("div",{ref:P,children:[(0,l.jsx)(T,{columns:V,data:h,showPagination:!0,selectableRows:!0,viewColumns:!1,onRowRender:(e,t)=>{s()(t).attr("data-row-data",JSON.stringify(e))},selectAllCheckbox:!1}),(0,l.jsx)(w.$,{onClick:()=>n.push((0,j.K)("/branch/dashboard/ipo")),className:"mt-4",children:"Back to IPO List"})]})})]})})}),D&&(0,l.jsx)(d.Bs,{}),A&&(0,l.jsx)(C.lG,{open:A,onOpenChange:R,children:(0,l.jsxs)(C.Cf,{className:"sm:max-w-[425px]",children:[(0,l.jsxs)(C.c7,{children:[(0,l.jsx)(C.L3,{children:"Apply IPO Confirmation?"}),(0,l.jsx)(C.rr,{className:"py-2",children:"Are you sure you want to submit the IPO application?"})]}),(0,l.jsxs)(C.Es,{children:[(0,l.jsx)(w.$,{variant:"destructive",onClick:()=>R(!1),children:"Cancel"}),(0,l.jsx)(w.$,{variant:"outline",onClick:H,disabled:u,children:u?"Submitting...":"Submit"})]})]})}),(0,l.jsx)(S.A,{ref:B,title:"Apply IPO Confirmation?",onConfirm:H,confirmLoading:u,children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("p",{children:"Are you sure you want to submit the IPO application for the following clients?"}),F.length>0&&(0,l.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md p-2",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{className:"bg-muted",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-2 text-left",children:"Client ID"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Client Name"}),(0,l.jsx)("th",{className:"p-2 text-left",children:"Lots"}),(0,l.jsx)("th",{className:"p-2 text-right",children:"Amount"})]})}),(0,l.jsx)("tbody",{children:F.map((e,t)=>{let a=e.client_id,r=Number(e.inputs.lotDrp||1),n=Number.parseInt((null==N?void 0:N.noofequitysharesbid)||"0"),s=Number.parseFloat((null==N?void 0:N.cutoffprice)||"0");return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"p-2",children:a}),(0,l.jsx)("td",{className:"p-2",children:e.clientName||a}),(0,l.jsx)("td",{className:"p-2",children:r}),(0,l.jsx)("td",{className:"p-2 text-right",children:U(r*n*s)})]},t)})})]})}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground",children:["This action will submit the IPO application for ",F.length," selected client(s)."]})]})})]})}},85147:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(95155);a(12115);var r=a(87081);let n=e=>{let{columns:t,rows:a}=e;return(0,l.jsxs)("div",{className:"w-full p-4 space-y-4",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(t||4)].map((e,t)=>(0,l.jsx)("div",{className:"h-9 rounded-lg bg-gray-100 dark:bg-gray-800",children:(0,l.jsx)(r.E,{className:"w-full h-full"})},"header-".concat(t)))}),(0,l.jsx)("div",{className:"space-y-2",children:[...Array(a||10)].map((e,a)=>(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(t||4)].map((e,t)=>(0,l.jsx)("div",{className:"h-12 rounded-lg bg-gray-100 dark:bg-gray-800",children:(0,l.jsx)(r.E,{className:"w-full h-full"})},"cell-".concat(a,"-").concat(t)))},"row-".concat(a)))})]})}},74317:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var l=a(95155),r=a(12115),n=a(51344),s=a(73312);let i=(0,r.forwardRef)((e,t)=>{let{title:a,children:i,onConfirm:o,confirmText:d="Submit",confirmLoading:c,maxContentHeight:u="60vh"}=e,[m,p]=(0,r.useState)(!1);return(0,r.useImperativeHandle)(t,()=>({open:()=>p(!0),close:()=>p(!1)})),(0,l.jsx)(n.lG,{open:m,onOpenChange:p,children:(0,l.jsxs)(n.Cf,{className:"flex flex-col max-w-md w-full md:max-w-lg lg:max-w-xl mx-auto",children:[(0,l.jsx)(n.c7,{className:"relative border-b pb-2",children:(0,l.jsx)(n.L3,{className:"pr-8",children:a})}),(0,l.jsx)("div",{className:"py-4 text-sm text-muted-foreground overflow-y-auto",style:{maxHeight:u,scrollbarWidth:"thin",scrollbarColor:"rgba(155, 155, 155, 0.5) transparent"},children:i}),(0,l.jsxs)(n.Es,{className:"flex justify-end space-x-2 border-t pt-2 mt-auto",children:[(0,l.jsx)(s.$,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),o&&(0,l.jsx)(s.$,{onClick:o,disabled:c,children:c?"Submitting...":d})]})]})})});i.displayName="CustomDialog";let o=i},1541:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(95155),r=a(12115),n=a(25427);function s(e){let{text:t,speed:a=50,maxIterations:s=10,sequential:i=!1,revealDirection:o="start",useOriginalCharsOnly:d=!1,characters:c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!@#$%^&*()_+",className:u="",parentClassName:m="",encryptedClassName:p="",animateOn:f="hover",...h}=e,[x,v]=(0,r.useState)(t),[g,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)(new Set),[I,C]=(0,r.useState)(!1),S=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e;let l=0,r=e=>{let a=t.length;switch(o){case"start":default:return e.size;case"end":return a-1-e.size;case"center":{let t=Math.floor(a/2),l=Math.floor(e.size/2),r=e.size%2==0?t+l:t-l-1;if(r>=0&&r<a&&!e.has(r))return r;for(let t=0;t<a;t++)if(!e.has(t))return t;return 0}}},n=d?Array.from(new Set(t.split(""))).filter(e=>" "!==e):c.split(""),u=(e,t)=>{if(!d)return e.split("").map((a,l)=>" "===a?" ":t.has(l)?e[l]:n[Math.floor(Math.random()*n.length)]).join("");{let a=e.split("").map((e,a)=>({char:e,isSpace:" "===e,index:a,isRevealed:t.has(a)})),l=a.filter(e=>!e.isSpace&&!e.isRevealed).map(e=>e.char);for(let e=l.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[l[e],l[t]]=[l[t],l[e]]}let r=0;return a.map(t=>t.isSpace?" ":t.isRevealed?e[t.index]:l[r++]).join("")}};return g?(y(!0),e=setInterval(()=>{w(a=>{if(!i)return v(u(t,a)),++l>=s&&(clearInterval(e),y(!1),v(t)),a;if(!(a.size<t.length))return clearInterval(e),y(!1),a;{let e=r(a),l=new Set(a);return l.add(e),v(u(t,l)),l}})},a)):(v(t),w(new Set),y(!1)),()=>{e&&clearInterval(e)}},[g,t,a,s,i,o,c,d]),(0,r.useEffect)(()=>{if("view"!==f)return;let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&!I&&(b(!0),C(!0))})},{root:null,rootMargin:"0px",threshold:.1}),t=S.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[f,I]),(0,l.jsxs)(n.P.span,{ref:S,className:"inline-block whitespace-pre-wrap relative ".concat(m),..."hover"===f?{onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)}:{},...h,children:[(0,l.jsx)("span",{className:"sr-only",children:x}),(0,l.jsx)("span",{"aria-hidden":"true",children:x.split("").map((e,t)=>{let a=N.has(t)||!j||!g;return(0,l.jsx)("span",{className:a?u:p,children:e},t)})})]})}},25121:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var l=a(95155);a(12115);var r=a(31027),n=a(21567);let s=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,l.jsx)("div",{className:(0,n.cn)(s({variant:a}),t),...r})}},22130:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>s,aR:()=>i,wL:()=>u});var l=a(95155),r=a(12115),n=a(21567);let s=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow mt-7",a),...r})});s.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-row lg:flex-row md:flex-col sm:flex-col md:items-center md:justify-between p-6 border-b bg-blue-500 mx-3 -mt-6 px-8 pt-4 pb-4 rounded-xl shadow-lg text-white space-y-4 md:space-y-0 mb-4",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("p-3 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-3 pt-0",a),...r})});u.displayName="CardFooter"},44870:(e,t,a)=>{"use strict";a.d(t,{C5:()=>g,MJ:()=>x,Rr:()=>v,eI:()=>f,lR:()=>h,lV:()=>d,zB:()=>u});var l=a(95155),r=a(12115),n=a(14707),s=a(69606),i=a(21567),o=a(98986);let d=s.Op,c=r.createContext({}),u=e=>{let{...t}=e;return(0,l.jsx)(c.Provider,{value:{name:t.name},children:(0,l.jsx)(s.xI,{...t})})},m=()=>{let e=r.useContext(c),t=r.useContext(p),{getFieldState:a,formState:l}=(0,s.xW)(),n=a(e.name,l);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},p=r.createContext({}),f=r.forwardRef((e,t)=>{let{className:a,...n}=e,s=r.useId();return(0,l.jsx)(p.Provider,{value:{id:s},children:(0,l.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",a),...n})})});f.displayName="FormItem";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e,{error:n,formItemId:s}=m();return(0,l.jsx)(o.J,{ref:t,className:(0,i.cn)(n&&"text-destructive",a),htmlFor:s,...r})});h.displayName="FormLabel";let x=r.forwardRef((e,t)=>{let{...a}=e,{error:r,formItemId:s,formDescriptionId:i,formMessageId:o}=m();return(0,l.jsx)(n.DX,{ref:t,id:s,"aria-describedby":r?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!r,...a})});x.displayName="FormControl";let v=r.forwardRef((e,t)=>{let{className:a,...r}=e,{formDescriptionId:n}=m();return(0,l.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",a),...r})});v.displayName="FormDescription";let g=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e,{error:s,formMessageId:o}=m(),d=s?String(null==s?void 0:s.message):r;return d?(0,l.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",a),...n,children:d}):null});g.displayName="FormMessage"},98986:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var l=a(95155),r=a(12115),n=a(46195),s=a(31027),i=a(21567);let o=(0,s.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),a),...r})});d.displayName=n.b.displayName},37528:(e,t,a)=>{"use strict";a.d(t,{bq:()=>m,eb:()=>x,gC:()=>h,l6:()=>c,yv:()=>u});var l=a(95155),r=a(12115),n=a(54066),s=a(51719),i=a(91902),o=a(98867),d=a(21567);let c=n.bL;n.YJ;let u=n.WT,m=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,l.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,l.jsx)(n.In,{asChild:!0,children:(0,l.jsx)(s.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,l.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=n.PP.displayName;let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,l.jsx)(s.A,{className:"h-4 w-4"})})});f.displayName=n.wn.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,position:s="popper",...i}=e;return(0,l.jsx)(n.ZL,{children:(0,l.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...i,children:[(0,l.jsx)(p,{}),(0,l.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,l.jsx)(f,{})]})})});h.displayName=n.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(n.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=n.JU.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...s}=e;return(0,l.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(n.VF,{children:(0,l.jsx)(o.A,{className:"h-4 w-4"})})}),(0,l.jsx)(n.p4,{children:r})]})});x.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},87081:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var l=a(95155),r=a(21567);function n(e){let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},85672:(e,t,a)=>{"use strict";a.d(t,{IPOProvider:()=>i,y:()=>o});var l=a(95155),r=a(58690),n=a(12115);let s=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[c,u]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!c)try{let e=(0,r.Lg)("selectedIPO");if(e){let t=JSON.parse(e);i(t)}u(!0)}catch(e){console.error("Error loading IPO data from localStorage:",e),u(!0)}},[c]);let m=async e=>new Promise(t=>{i(e),setTimeout(()=>{if(e)try{let t={...e,clientDetails:o};(0,r.ZB)("selectedIPO",JSON.stringify(t))}catch(e){console.error("Error saving IPO data to localStorage:",e)}else(0,r.$1)("selectedIPO");t()},100)});return(0,n.useEffect)(()=>{if(a&&c)try{let e={...a,clientDetails:o};(0,r.ZB)("selectedIPO",JSON.stringify(e))}catch(e){console.error("Error updating IPO data in localStorage:",e)}},[o,a,c]),(0,l.jsx)(s.Provider,{value:{selectedIPO:a,setSelectedIPO:m,clientDetails:o,setClientDetailsIPO:d},children:t})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useIPO must be used within an IPOProvider");return e}},21567:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var l=a(43463),r=a(69795);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,l.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[3740,1181,8526,8562,164,2589,814,8007,5565,9526,6143,4015,8665,6527,7518,5427,6137,7555,7328,9086,8441,1517,7358],()=>t(10316)),_N_E=e.O()}]);
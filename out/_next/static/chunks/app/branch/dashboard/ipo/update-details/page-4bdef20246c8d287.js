(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6352],{73040:(e,t,s)=>{Promise.resolve().then(s.bind(s,78426))},73239:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(67401).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},78426:(e,t,s)=>{"use strict";s.d(t,{default:()=>A});var r=s(95155),a=s(12115),o=s(69606),i=s(85060),n=s(73312),l=s(33900),d=s(98986),c=s(22130),m=s(12711);let u=(0,s(67401).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var p=s(73239),f=s(75340),x=s(43415),g=s(30814),y=s(85672),v=s(47282),h=s(76046),N=s(25121),b=s(67328),S=s(83469);let j=x.z.object({category:x.z.string(),ApplicationFormNoStart:x.z.string().optional(),ApplicationFormNoEnd:x.z.string().optional()}).refine(e=>!e.ApplicationFormNoStart&&!e.ApplicationFormNoEnd||e.ApplicationFormNoStart&&e.ApplicationFormNoEnd,{message:"Both fields are required if one is filled",path:["ApplicationFormNoStart","ApplicationFormNoEnd"]}),w=x.z.object({companyname:x.z.string().min(1,{message:"Company name is required"}),ISIN:x.z.string().min(1,{message:"ISIN is required"}),CompanyAddress:x.z.string().min(1,{message:"Company address is required"}),TypeOfIssue:x.z.string().min(1,{message:"Type of issue is required"}),IssueSize:x.z.string().min(1,{message:"Issue size is required"}),MaxLotSize:x.z.string().min(0,{message:"Max lot size must be a non-negative number"}),RunningApplNo:x.z.string().optional(),categories:x.z.array(j)});function A(){var e;let[t,s]=(0,a.useState)(!1),[x,j]=(0,a.useState)(!1),{selectedIPO:A,setSelectedIPO:I}=(0,y.y)(),[z,E]=(0,a.useState)(""),C=(0,h.useRouter)(),[F,O]=(0,a.useState)(()=>({CompanyAddress:(null==A?void 0:A.companyAddress)||"",RunningApplNo:"",TypeOfIssue:(null==A?void 0:A.typeofissue)||"",IssueSize:(null==A?void 0:A.issuesize)||"",MaxLotSize:(null==A?void 0:A.maxlotsize)||"",companyname:(null==A?void 0:A.companyname)||"",ISIN:(null==A?void 0:A.isin)||"",categories:(null==A?void 0:A.categories)||[]})),P=(0,o.mN)({resolver:(0,i.u)(w),defaultValues:F,mode:"onChange"});(0,a.useEffect)(()=>{let e={CompanyAddress:(null==A?void 0:A.companyAddress)||"",RunningApplNo:"",TypeOfIssue:(null==A?void 0:A.typeofissue)||"",IssueSize:(null==A?void 0:A.issuesize)||"",MaxLotSize:(null==A?void 0:A.maxlotsize)||"",companyname:(null==A?void 0:A.companyname)||"",ISIN:(null==A?void 0:A.isin)||"",categories:(null==A?void 0:A.categories)||[]};O(e),P.reset(e),j(!1)},[A,P]),(0,a.useEffect)(()=>{let e=P.watch(e=>{j(JSON.stringify(e)!==JSON.stringify(F))});return()=>e.unsubscribe()},[P,P.watch,F]),(0,a.useEffect)(()=>{var e,t,s;let r=null===(e=P.watch("categories"))||void 0===e?void 0:e.findIndex(e=>e.category===(null==A?void 0:A.category));-1!==r&&(P.setValue("categories.".concat(r,".ApplicationFormNoStart"),null!==(t=null==A?void 0:A.applicationformnostart)&&void 0!==t?t:void 0),P.setValue("categories.".concat(r,".ApplicationFormNoEnd"),null!==(s=null==A?void 0:A.applicationformnoend)&&void 0!==s?s:void 0))},[A,P]),(0,a.useEffect)(()=>{fetch("https://api.ipify.org?format=json").then(e=>e.json()).then(e=>{E(e.ip)}).catch(e=>console.error("Error fetching IP address:",e))},[]);let R=P.formState.isValid,k=()=>{let e=P.getValues("categories")||[];return(null==A?void 0:A.companylogoex)==="NSE"||e.some(e=>e.ApplicationFormNoStart&&e.ApplicationFormNoEnd)},T=async e=>{if((null==A?void 0:A.companylogoex)!=="NSE"&&!k()){g.oR.error("At least one category must have both start and end application form numbers.");return}try{let t={companyname:e.companyname,ISIN:e.ISIN,CompanyAddress:e.CompanyAddress,TypeOfIssue:e.TypeOfIssue,IssueSize:e.IssueSize,MaxLotSize:e.MaxLotSize,MachineIP:z},r=e.categories.filter(e=>e.ApplicationFormNoStart&&e.ApplicationFormNoEnd).map(e=>({...t,Category:e.category,ApplicationFormNoStart:e.ApplicationFormNoStart,ApplicationFormNoEnd:e.ApplicationFormNoEnd,RunningApplNo:e.ApplicationFormNoStart,Status:"Active"})),a=await (0,v.yLT)({data:r});if(!(0,b.k9)(a)){s(!0);return}let o=a.data.data;if((null==o?void 0:o.status)==="success")g.oR.success("IPO details updated successfully."),I(null),j(!1),E(""),C.push((0,S.K)("/branch/dashboard/ipo"));else throw Error((null==o?void 0:o.error)||"Failed to update IPO details")}catch(e){g.oR.error(e instanceof Error?e.message:"An error occurred while updating the IPO details.")}},L=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];P.formState.errors;let i=e.includes(".")?e.split(".").reduce((e,t)=>e&&e[t],P.formState.errors):P.formState.errors[e];return P.formState.dirtyFields[e],(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d.J,{htmlFor:e,className:"text-sm font-medium ".concat(i?"text-red-500":""),children:[t," ",a&&"*"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.xI,{name:e,control:P.control,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(l.p,{...a,type:s,className:"pr-10 ".concat(i?"border-red-500 focus:ring-red-500 focus:border-red-500":""),value:(null===(t=a.value)||void 0===t?void 0:t.toString())||"",min:"number"===s?0:void 0})}}),(0,r.jsx)(u,{className:"h-4 w-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),i&&(0,r.jsx)("p",{className:"text-sm text-red-500 mt-1",children:"string"==typeof i.message?i.message:"This field is required"})]})},M=!!P.formState.errors.categories;return(0,a.useEffect)(()=>{x&&P.trigger()},[x,P]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.default,{children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(c.Zp,{className:"shadow-lg",children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)(c.ZB,{children:["Update IPO Details: ",null==A?void 0:A.companyname]})}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-6 space-y-2 sm:space-y-0 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Exchange:"}),(0,r.jsx)(N.E,{variant:"outline",className:"text-sm py-1",children:(null==A?void 0:A.companylogoex)||"N/A"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Status:"}),(null==A?void 0:A.status)==="Active"?(0,r.jsx)(p.A,{className:"h-5 w-5 text-green-500"}):(0,r.jsx)(f.A,{className:"h-5 w-5 text-red-500"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat((null==A?void 0:A.status)==="Active"?"text-green-500":"text-red-500"),children:(null==A?void 0:A.status)||"Unknown"})]})]}),(0,r.jsxs)("form",{onSubmit:P.handleSubmit(T),children:[!R&&x&&P.formState.submitCount>0&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mx-6 mb-4",children:[(0,r.jsx)("p",{className:"font-medium",children:"Please fix the following errors:"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm mt-1",children:Object.keys(P.formState.errors).map(e=>(0,r.jsx)("li",{children:"categories"===e?"Category information is incomplete":"".concat(e," is required")},e))})]}),(0,r.jsxs)(c.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6 container mx-auto py-8",children:[L("companyname","Company Name"),L("ISIN","ISIN"),L("CompanyAddress","Company Address"),L("TypeOfIssue","Type of Issue"),L("IssueSize","Issue Size"),L("MaxLotSize","Max Lot Size","number")]}),(null==A?void 0:A.companylogoex)!=="NSE"&&(0,r.jsxs)("div",{className:"container mx-auto px-6 mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-4",children:"Category Information"}),M&&(0,r.jsx)("div",{className:"text-red-500 mb-4 text-sm",children:"At least one category must have both start and end application form numbers."}),null===(e=P.watch("categories"))||void 0===e?void 0:e.map((e,t)=>(0,r.jsxs)("div",{className:"space-y-4 flex flex-col sm:flex-row items-center justify-between w-full max-w-2xl p-4 mx-auto border rounded-md mb-4",children:[(0,r.jsxs)("h3",{className:"font-semibold w-full sm:w-auto",children:[e.category,":"]}),(0,r.jsx)("div",{className:"w-full sm:w-auto",children:L("categories.".concat(t,".ApplicationFormNoStart"),"Application Form No. Start","text",!1)}),(0,r.jsx)("div",{className:"w-full sm:w-auto",children:L("categories.".concat(t,".ApplicationFormNoEnd"),"Application Form No. End","text",!1)})]},t))]}),(0,r.jsx)("div",{className:"space-y-4 flex flex-col sm:flex-row items-center justify-between container w-full max-w-2xl p-4 mx-auto",children:(0,r.jsx)(n.$,{type:"submit",className:"w-full md:w-auto mx-auto",disabled:!x||!R&&P.formState.submitCount>0,children:P.formState.isSubmitting?"Submitting...":"Submit Changes"})})]})]})})}),t&&(0,r.jsx)(b.Bs,{})]})}},25121:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(95155);s(12115);var a=s(31027),o=s(21567);let i=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)(i({variant:s}),t),...a})}},22130:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>m});var r=s(95155),a=s(12115),o=s(21567);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow mt-7",s),...a})});i.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-row lg:flex-row md:flex-col sm:flex-col md:items-center md:justify-between p-6 border-b bg-blue-500 mx-3 -mt-6 px-8 pt-4 pb-4 rounded-xl shadow-lg text-white space-y-4 md:space-y-0 mb-4",s),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-3 pt-0",s),...a})});c.displayName="CardContent";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-3 pt-0",s),...a})});m.displayName="CardFooter"},98986:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var r=s(95155),a=s(12115),o=s(46195),i=s(31027),n=s(21567);let l=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(o.b,{ref:t,className:(0,n.cn)(l(),s),...a})});d.displayName=o.b.displayName},87081:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(95155),a=s(21567);function o(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},85672:(e,t,s)=>{"use strict";s.d(t,{IPOProvider:()=>n,y:()=>l});var r=s(95155),a=s(58690),o=s(12115);let i=(0,o.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,o.useState)(null),[l,d]=(0,o.useState)(null),[c,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!c)try{let e=(0,a.Lg)("selectedIPO");if(e){let t=JSON.parse(e);n(t)}m(!0)}catch(e){console.error("Error loading IPO data from localStorage:",e),m(!0)}},[c]);let u=async e=>new Promise(t=>{n(e),setTimeout(()=>{if(e)try{let t={...e,clientDetails:l};(0,a.ZB)("selectedIPO",JSON.stringify(t))}catch(e){console.error("Error saving IPO data to localStorage:",e)}else(0,a.$1)("selectedIPO");t()},100)});return(0,o.useEffect)(()=>{if(s&&c)try{let e={...s,clientDetails:l};(0,a.ZB)("selectedIPO",JSON.stringify(e))}catch(e){console.error("Error updating IPO data in localStorage:",e)}},[l,s,c]),(0,r.jsx)(i.Provider,{value:{selectedIPO:s,setSelectedIPO:u,clientDetails:l,setClientDetailsIPO:d},children:t})}function l(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useIPO must be used within an IPOProvider");return e}},21567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>o});var r=s(43463),a=s(69795);function o(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,8526,8562,164,2589,814,8007,5565,9526,6143,4015,8665,7518,6137,7555,7328,9086,8441,1517,7358],()=>t(73040)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4876],{8026:(e,r,s)=>{Promise.resolve().then(s.bind(s,38074))},87364:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(67401).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},93650:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(67401).A)("FileX",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]])},45686:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=(0,s(67401).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},38074:(e,r,s)=>{"use strict";s.d(r,{default:()=>v});var a=s(95155),t=s(12115),d=s(47282),l=s(12711),n=s(22130),i=s(67328),c=s(85147),o=s(30814),m=s(45686),x=s(87364),u=s(93650),h=s(73312),p=s(76046),g=s(25121),f=s(17733),b=s(74317),y=s(83469);function v(){let e=(0,p.useRouter)(),[r,s]=(0,t.useState)(!1),[v,j]=(0,t.useState)(!0),[N,w]=(0,t.useState)(null),[k,C]=(0,t.useState)([]),[A,D]=(0,t.useState)(null),E=(0,t.useRef)(null),[R,S]=(0,t.useState)(!1);(0,t.useEffect)(()=>{let e=()=>{S(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let O=(0,t.useCallback)(async e=>{try{j(!0);let r={boid:e.boid,scrip:e.Scrip,isin:e.isin,buybackid:Number.parseInt(e.buybackId),clientId:e.clientId.toString(),quantity:e.quantity.toString(),applied:e.applied.toString(),id:e.id},a=await (0,d.xRE)({data:[r]});if(!(0,i.k9)(a)){s(!0);return}let t=a.data;t&&t.data?t.data.every(e=>!0===e.status)?(o.oR.success("Order deleted successfully"),await I()):o.oR.error("Failed to delete order. Please check and try again."):o.oR.error("Failed to delete order: ".concat(a.data.message||"Unknown error"))}catch(e){console.error("Error deleting order:",e),o.oR.error("An error occurred while deleting the order: ".concat(e.message||"Unknown error"))}finally{var r;j(!1),D(null),null===(r=E.current)||void 0===r||r.close()}},[]),H=(0,t.useCallback)(e=>{var r,s;let a=(null===(r=e.orderStatus)||void 0===r?void 0:r.toLowerCase())||"";if("processed"===a){o.oR.error("Cannot delete a processed order",{description:"Orders that have been processed cannot be deleted."});return}if("cancelled"===a){o.oR.error("Cannot delete a cancelled order",{description:"Orders that have been cancelled cannot be deleted."});return}"applied"===a?(D(e),null===(s=E.current)||void 0===s||s.open()):O(e)},[O]),I=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log(e),j(!0),w(null);try{let e=await (0,d.WF_)({_t:new Date().getTime()});if(!(0,i.k9)(e)){s(!0);return}let r="string"==typeof e.data.data?JSON.parse(e.data.data):e.data.data;if(r){let e=r.map(e=>({...e,onDelete:H}));C(e)}else throw Error("Failed to fetch Records :(")}catch(e){w(e.message||"An error occurred while fetching data.")}finally{j(!1)}},[H]);(0,t.useEffect)(()=>{I()},[I]);let M=e=>{if(!e)return"-";let r=e.toLowerCase(),s="";return s="processed"===r?"bg-green-100 text-green-800 hover:bg-green-200 border border-green-200":"applied"===r?"bg-amber-50 text-amber-700 hover:bg-amber-100 border border-amber-200":"cancelled"===r?"bg-red-100 text-red-800 hover:bg-red-200 border border-red-200":"bg-gray-100 text-gray-800 hover:bg-gray-200 border border-gray-200",(0,a.jsx)(g.E,{className:s,children:e})},T=(e,r)=>(0,a.jsx)("div",{className:"rounded-md mb-2 border border-gray-200 hover:border-primary/30 hover:shadow-sm transition-all duration-200",children:(0,a.jsx)("div",{className:"p-3",children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.Scrip}),(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)(g.E,{variant:"outline",className:"text-[10px] bg-blue-50 text-blue-700 border-blue-200",children:e.clientId}),(0,a.jsx)("span",{className:"mx-1 text-gray-400",children:"â€¢"}),(0,a.jsxs)(g.E,{variant:"outline",className:"text-[10px] bg-gray-50 text-gray-700 border-gray-200",children:["BOID: ",e.boid]})]})]})}),(0,a.jsx)("div",{children:M(e.orderStatus)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,a.jsxs)("div",{className:"text-xs bg-gray-50 p-1 rounded",children:[(0,a.jsx)("span",{className:"text-gray-800 font-medium",children:"Total Qty:"})," ",(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.quantity})]}),(0,a.jsxs)("div",{className:"text-xs bg-gray-50 p-1 rounded",children:[(0,a.jsx)("span",{className:"text-gray-800 font-medium",children:"Applied Qty:"})," ",(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.applied})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Time: ",e.appliedDate?(0,f.GP)(new Date(e.appliedDate),"yyyy-MM-dd HH:mm:ss"):"-"]}),(0,a.jsx)(h.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>e.onDelete&&e.onDelete(e),children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.Scrip}),(0,a.jsxs)("div",{className:"flex items-center mt-1 space-x-1",children:[(0,a.jsx)(g.E,{variant:"outline",className:"text-[10px] bg-blue-50 text-blue-700 border-blue-200",children:e.clientId}),(0,a.jsxs)(g.E,{variant:"outline",className:"text-[10px] bg-gray-50 text-gray-700 border-gray-200",children:["BOID: ",e.boid]})]})]})}),(0,a.jsxs)("div",{className:"col-span-3 flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"text-xs bg-gray-50 px-2 py-1 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-800 font-medium",children:"Total Qty:"})," ",(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.quantity})]}),(0,a.jsxs)("div",{className:"text-xs bg-gray-50 px-2 py-1 rounded-md",children:[(0,a.jsx)("span",{className:"text-gray-800 font-medium",children:"Applied Qty:"})," ",(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.applied})]})]}),(0,a.jsx)("div",{className:"col-span-2 flex justify-center",children:M(e.orderStatus)}),(0,a.jsxs)("div",{className:"col-span-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Time: ",e.appliedDate?(0,f.GP)(new Date(e.appliedDate),"yyyy-MM-dd HH:mm:ss"):"-"]}),(0,a.jsx)(h.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:()=>e.onDelete&&e.onDelete(e),children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]})})},"order-".concat(e.id,"-").concat(r));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(n.Zp,{className:"w-full shadow-lg",children:[(0,a.jsx)(n.aR,{className:"flex flex-row items-center space-x-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(h.$,{variant:"ghost",size:"sm",className:"mr-2 p-0 h-8 w-8",onClick:()=>e.push((0,y.K)("/client/dashboard/buyback")),children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Back"})]}),(0,a.jsx)(n.ZB,{className:R?"text-base":"text-lg",children:"View Buyback Orders"})]})}),(0,a.jsxs)(n.Wu,{children:[N&&(0,a.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-100 rounded-md",children:N}),v?(0,a.jsx)(c.A,{columns:4,rows:10}):(0,a.jsx)(a.Fragment,{children:null===k?(0,a.jsx)("p",{children:"No data available"}):k.length>0?(0,a.jsx)("div",{className:"space-y-1",children:k.map((e,r)=>T(e,r))}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 text-center bg-muted/20 rounded-md border border-dashed border-muted-foreground/20 my-4",children:[(0,a.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,a.jsx)(u.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No records found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4 max-w-md",children:"There are no records available for this criteria."})]})})]})]})})}),(0,a.jsx)(b.A,{ref:E,title:"Confirm Delete Order",onConfirm:()=>A&&O(A),confirmText:"Delete",confirmLoading:v,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm",children:"Are you sure you want to delete this order? This action cannot be undone."}),A&&(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded-md text-xs space-y-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Client ID:"})," ",A.clientId]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"BOID:"})," ",A.boid]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Applied Quantity:"})," ",A.applied]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Applied Date:"})," ",A.appliedDate?(0,f.GP)(new Date(A.appliedDate),"yyyy-MM-dd HH:mm:ss"):"-"]})]})}),(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-2 text-amber-700 text-xs",children:(0,a.jsx)("p",{children:'Note: Only orders with "Applied" status can be deleted.'})})]})}),r&&(0,a.jsx)(i.Bs,{})]})}},85147:(e,r,s)=>{"use strict";s.d(r,{A:()=>d});var a=s(95155);s(12115);var t=s(87081);let d=e=>{let{columns:r,rows:s}=e;return(0,a.jsxs)("div",{className:"w-full p-4 space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(r||4)].map((e,r)=>(0,a.jsx)("div",{className:"h-9 rounded-lg bg-gray-100 dark:bg-gray-800",children:(0,a.jsx)(t.E,{className:"w-full h-full"})},"header-".concat(r)))}),(0,a.jsx)("div",{className:"space-y-2",children:[...Array(s||10)].map((e,s)=>(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(r||4)].map((e,r)=>(0,a.jsx)("div",{className:"h-12 rounded-lg bg-gray-100 dark:bg-gray-800",children:(0,a.jsx)(t.E,{className:"w-full h-full"})},"cell-".concat(s,"-").concat(r)))},"row-".concat(s)))})]})}},74317:(e,r,s)=>{"use strict";s.d(r,{A:()=>i});var a=s(95155),t=s(12115),d=s(51344),l=s(73312);let n=(0,t.forwardRef)((e,r)=>{let{title:s,children:n,onConfirm:i,confirmText:c="Submit",confirmLoading:o,maxContentHeight:m="60vh"}=e,[x,u]=(0,t.useState)(!1);return(0,t.useImperativeHandle)(r,()=>({open:()=>u(!0),close:()=>u(!1)})),(0,a.jsx)(d.lG,{open:x,onOpenChange:u,children:(0,a.jsxs)(d.Cf,{className:"flex flex-col max-w-md w-full md:max-w-lg lg:max-w-xl mx-auto",children:[(0,a.jsx)(d.c7,{className:"relative border-b pb-2",children:(0,a.jsx)(d.L3,{className:"pr-8",children:s})}),(0,a.jsx)("div",{className:"py-4 text-sm text-muted-foreground overflow-y-auto",style:{maxHeight:m,scrollbarWidth:"thin",scrollbarColor:"rgba(155, 155, 155, 0.5) transparent"},children:n}),(0,a.jsxs)(d.Es,{className:"flex justify-end space-x-2 border-t pt-2 mt-auto",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),i&&(0,a.jsx)(l.$,{onClick:i,disabled:o,children:o?"Submitting...":c})]})]})})});n.displayName="CustomDialog";let i=n},25121:(e,r,s)=>{"use strict";s.d(r,{E:()=>n});var a=s(95155);s(12115);var t=s(31027),d=s(21567);let l=(0,t.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:r,variant:s,...t}=e;return(0,a.jsx)("div",{className:(0,d.cn)(l({variant:s}),r),...t})}},22130:(e,r,s)=>{"use strict";s.d(r,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>l,aR:()=>n,wL:()=>m});var a=s(95155),t=s(12115),d=s(21567);let l=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow mt-7",s),...t})});l.displayName="Card";let n=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("flex flex-row lg:flex-row md:flex-col sm:flex-col md:items-center md:justify-between p-6 border-b bg-blue-500 mx-3 -mt-6 px-8 pt-4 pb-4 rounded-xl shadow-lg text-white space-y-4 md:space-y-0 mb-4",s),...t})});n.displayName="CardHeader";let i=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("font-semibold leading-none tracking-tight",s),...t})});i.displayName="CardTitle";let c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("text-sm text-muted",s),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("p-3 pt-0",s),...t})});o.displayName="CardContent";let m=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,d.cn)("flex items-center p-3 pt-0",s),...t})});m.displayName="CardFooter"},87081:(e,r,s)=>{"use strict";s.d(r,{E:()=>d});var a=s(95155),t=s(21567);function d(e){let{className:r,...s}=e;return(0,a.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-primary/10",r),...s})}},21567:(e,r,s)=>{"use strict";s.d(r,{cn:()=>d});var a=s(43463),t=s(69795);function d(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[1181,8526,8562,164,2589,814,8007,5565,9526,6143,4015,8665,7733,6137,7555,7328,9086,8441,1517,7358],()=>r(8026)),_N_E=e.O()}]);
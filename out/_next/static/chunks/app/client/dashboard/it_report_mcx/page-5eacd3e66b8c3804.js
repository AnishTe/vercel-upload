(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2135],{77929:(e,t,a)=>{Promise.resolve().then(a.bind(a,29543))},29543:(e,t,a)=>{"use strict";a.d(t,{default:()=>M});var r=a(95155),n=a(12115),s=a(77594),l=a(20853),c=a(35765),o=a(48617),i=a(17733),d=a(69606),u=a(43415),m=a(85060),x=a(73312),h=a(22130),y=a(44870),p=a(37528),f=a(12711),N=a(85147),g=a(1541),j=a(30814),b=a(67328),w=a(33900),v=a(53601),S=a(42020),T=a(77711),A=a(47282);let I=[{id:"SCRIP_SYMBOL",accessorKey:"SCRIP_SYMBOL",header:"Scrip Symbol",enableSorting:!1,disabled:!0},{id:"BUYQTY",accessorKey:"BUYQTY",header:"Buy Quantity",enableSorting:!1},{id:"BUYRATE",accessorKey:"BUYRATE",header:"Buy Rate",enableSorting:!1,dtRender:function(e,t,a){let r=parseFloat(e),n=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r);return"display"===t?'<span data-sort="'.concat(r,'">').concat(n,"</span>"):r}},{id:"BUYAMT",accessorKey:"BUYAMT",header:"Buy Amount",enableSorting:!1,dtRender:function(e,t,a){let r=parseFloat(e),n=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r);return"display"===t?'<span data-sort="'.concat(r,'">').concat(n,"</span>"):r}},{id:"SALEQTY",accessorKey:"SALEQTY",header:"Sell Quantity",enableSorting:!1},{id:"SALERATE",accessorKey:"SALERATE",header:"Sell Rate",enableSorting:!1,dtRender:function(e,t,a){let r=parseFloat(e),n=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r);return"display"===t?'<span data-sort="'.concat(r,'">').concat(n,"</span>"):r}},{id:"SALEAMT",accessorKey:"SALEAMT",header:"Sell Amount",enableSorting:!1,dtRender:function(e,t,a){let r=parseFloat(e),n=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r);return"display"===t?'<span data-sort="'.concat(r,'">').concat(n,"</span>"):r}},{id:"NOTIONAL",accessorKey:"NOTIONAL",header:"Net Amount",dtRender:function(e,t,a){let r=parseFloat(null!==a.original.LONGQTY||null!==a.original.SHORTQTY?a.original.NOTIONAL:a.original.NET_PLAMT),n=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r);return"display"===t?'<span data-sort="'.concat(r,'" class="').concat(r>=0?"text-green-600":"text-red-600",'">').concat(n,"</span>"):r}},{id:"INSTRUMENT_TYPE",accessorKey:"INSTRUMENT_TYPE",header:"Instrument Type",deselected:!0},{id:"EXPIRY_DATE",accessorKey:"EXPIRY_DATE",header:"Expiry Date",deselected:!0},{id:"SCRIP_NAME",accessorKey:"SCRIP_NAME",header:"Scrip Name",deselected:!0}],R=(0,T.default)(()=>Promise.all([a.e(1122),a.e(3740),a.e(3930),a.e(343),a.e(9690),a.e(4390),a.e(2449),a.e(8417),a.e(4156),a.e(227),a.e(5996),a.e(3302)]).then(a.bind(a,75996)),{loadableGenerated:{webpack:()=>[75996]},ssr:!1,loading:()=>(0,r.jsx)(N.A,{columns:4,rows:10})});function M(){let[e,t]=(0,n.useState)(!1),[a,T]=(0,n.useState)(null),[M,D]=(0,n.useState)([]),[E,Y]=(0,n.useState)(!1),[P,_]=(0,n.useState)([]),F=e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})},O=(()=>{let e=new Date,t=e.getMonth(),a=e.getFullYear(),r=t<3?a-1:a;return Array.from({length:5},(e,t)=>{let a=r-t;return{label:"".concat(a,"-").concat(a+1),value:"".concat(a,"-").concat(a+1),fromDate:(0,i.GP)(new Date(a,3,1),"dd/MM/yyyy"),toDate:(0,i.GP)(new Date(a+1,2,31),"dd/MM/yyyy")}})})(),C=u.Ik({financialYear:u.Ik({fromDate:u.Yj(),toDate:u.Yj(),value:u.Yj()}),toDate:u.Yj().nonempty("To Date is required")}),L=(0,d.mN)({resolver:(0,m.u)(C),defaultValues:{financialYear:O[0],toDate:O[0].toDate}}),{watch:B,setValue:K}=L;(0,n.useEffect)(()=>{let e=B((e,t)=>{let{name:a}=t;if("financialYear"===a){var r;K("toDate",(null===(r=e.financialYear)||void 0===r?void 0:r.toDate)||O[0].toDate)}});return()=>e.unsubscribe()},[B,O,K]);let G=async(e,a)=>{T(null),t(!0);try{let t=await (0,A.mJ6)({fromDate:e,toDate:a});if(!(0,b.k9)(t)){Y(!0);return}let r="string"==typeof t.data.data?JSON.parse(t.data.data):t.data.data;if("True"===r.Success){j.oR.success("Data fetched successfully!");let e=r["Success Description"],t=e.filter(e=>"2"===e.SR),a=e.filter(e=>"2"!==e.SR);_(t),D(a)}else throw Error(r["Error Description"]||"Failed to fetch data.")}catch(e){T(e.message||"An error occurred.")}finally{t(!1)}};(0,n.useEffect)(()=>{let{fromDate:e,toDate:t}=O[0];G(e,t)},[]);let k=null==M?void 0:M.reduce((e,t)=>e+parseFloat(null!==t.LONGQTY||null!==t.SHORTQTY?t.NOTIONAL.toString():t.NET_PLAMT.toString()||"0"),0),Q=null==P?void 0:P.reduce((e,t)=>{var a;return e+parseFloat((null===(a=t.PL_AMT)||void 0===a?void 0:a.toString())||"0")},0),U=e=>e.replace(/^\*|\*$/g,""),z=(()=>{let e={};P.forEach(t=>{let{SCRIP_NAME:a,PL_AMT:r}=t,n=U(a),s="CGST"===n||"SGST"===n?"GST":n;e[s]||(e[s]={SCRIP_NAME:s,PL_AMT:0}),e[s].PL_AMT+=Math.abs(Number(r))});let t=Object.values(e),a=["STT","STAMP DUTY","GST"];return t.sort((e,t)=>{let r=a.indexOf(e.SCRIP_NAME),n=a.indexOf(t.SCRIP_NAME);return -1!==r&&-1!==n?r-n:-1!==r?-1:-1!==n?1:0})})(),V=k-Math.abs(Number(Q));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.default,{children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)(h.Zp,{children:[(0,r.jsxs)(h.aR,{className:"flex flex-col md:flex-col sm:flex-col  mb-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)(h.ZB,{children:"IT Report MCX"})}),(0,r.jsx)("div",{className:"flex-shrink-0 m-0",children:(0,r.jsx)(y.lV,{...L,children:(0,r.jsxs)("form",{onSubmit:L.handleSubmit(e=>{let{financialYear:t,toDate:a}=e;G(t.fromDate,a)}),className:"flex gap-3",children:[(0,r.jsx)(y.zB,{control:L.control,name:"financialYear",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(y.eI,{className:"w-[200px]",children:[(0,r.jsxs)(p.l6,{onValueChange:e=>{let t=O.find(t=>t.value===e);a.onChange(t)},defaultValue:(null===(t=a.value)||void 0===t?void 0:t.value)||"",children:[(0,r.jsx)(y.MJ,{children:(0,r.jsx)(p.bq,{children:(0,r.jsx)(p.yv,{placeholder:"Select year"})})}),(0,r.jsx)(p.gC,{children:O.map(e=>(0,r.jsx)(p.eb,{value:e.value,children:e.label},e.value))})]}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsx)(y.zB,{control:L.control,name:"toDate",render:e=>{let{field:t}=e;return(0,r.jsxs)(y.eI,{className:"w-[150px]",children:[(0,r.jsx)(y.MJ,{children:(0,r.jsx)(w.p,{type:"date",className:"flex h-10 w-full rounded-md border text-white bg-transparent px-3 py-2 text-sm ",value:(0,i.GP)(new Date(t.value.split("/").reverse().join("-")),"yyyy-MM-dd"),min:(0,i.GP)(new Date(L.watch("financialYear").fromDate.split("/").reverse().join("-")),"yyyy-MM-dd"),max:(0,i.GP)(new Date(L.watch("financialYear").toDate.split("/").reverse().join("-")),"yyyy-MM-dd"),onChange:e=>{let a=new Date(e.target.value);t.onChange((0,i.GP)(a,"dd/MM/yyyy"))}})}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsx)(x.$,{type:"submit",disabled:e,children:e?(0,r.jsx)(s.A,{}):(0,r.jsx)(l.A,{className:"h-5 w-5"})})]})})})]}),(0,r.jsxs)(h.Wu,{children:[e?(0,r.jsx)(N.A,{columns:4,rows:10}):a?(0,r.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-100 rounded-md",children:a}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-start gap-3",children:[(0,r.jsxs)("h2",{className:"text-lg font-bold flex gap-2 items-center",children:["Realized",(0,r.jsx)("p",{className:"text-sm font-regular ",children:V>=0?"Profit":"Loss"}),(0,r.jsx)("p",{className:"text-sm font-regular ".concat(V>=0?"text-green-600":"text-red-600"),children:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(V).replace(/^(\D?)(.+)$/,(e,t,a)=>"(".concat(t).concat(a,")"))})]}),(0,r.jsxs)("div",{className:"flex flex-wrap border gap-2 items-center justify-between cursor-pointer hover:bg-accent hover:text-accent-foreground p-2 rounded-md transition-all duration-300 ease-in-out group shadow-sm hover:shadow-md",onClick:()=>F("trading"),children:[(0,r.jsx)("h3",{className:"text-sm font-semibold group-hover:underline transition-all duration-200",children:"Other Trading"}),(0,r.jsx)("p",{className:"text-xs font-regular",children:k>=0?"Profit":"Loss"}),(0,r.jsxs)("p",{className:"text-xs ".concat(k>=0?"text-green-600":"text-red-600"," transition-colors duration-300 flex gap-2"),children:[(0,r.jsx)(g.A,{animateOn:"view",revealDirection:"center",characters:"123456789",text:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2,minimumFractionDigits:2}).format(Math.abs(Number(k)))}),(0,r.jsx)(c.A,{size:15,className:"text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap border gap-2 items-center justify-between cursor-pointer hover:bg-accent hover:text-accent-foreground p-2 rounded-md transition-all duration-300 ease-in-out group shadow-sm hover:shadow-md",onClick:()=>F("expenses"),children:[(0,r.jsx)("h3",{className:"text-sm font-semibold group-hover:underline transition-all duration-200",children:"Expenses"}),(0,r.jsxs)("p",{className:"text-xs ".concat(Q>=0?"text-green-600":"text-red-600"," transition-colors duration-300 flex gap-2"),children:[(0,r.jsx)(g.A,{animateOn:"view",revealDirection:"center",characters:"123456789",text:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2,minimumFractionDigits:2}).format(Math.abs(Number(Q)))}),(0,r.jsx)(c.A,{size:15,className:"text-gray-500 opacity-0 group-hover:opacity-100 transition-opacity duration-200"})]})]})]}),(0,r.jsxs)("div",{id:"trading",className:"my-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center gap-6",children:[(0,r.jsx)("div",{className:"flex gap-1 items-center",children:(0,r.jsxs)("div",{className:"flex gap-1 items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold ",children:"Other Trading"}),(0,r.jsxs)(v.m_,{children:[(0,r.jsx)(v.k$,{asChild:!0,children:(0,r.jsx)("div",{className:"cursor-pointer",children:(0,r.jsx)(o.A,{size:16})})}),(0,r.jsx)(v.ZI,{className:"min-w-[50px] max-w-[250px] p-4 m-2 bg-gray-800 text-white rounded-md shadow-md",children:(0,r.jsx)("p",{children:"Represents derivative trading in Futures and Options (F&O) contracts, including both intraday and positional trades. These trades are settled based on margin requirements and expiry dates."})})]})]})}),(0,r.jsxs)("p",{className:"font-semibold flex flex-wrap gap-2 justify-end ",children:["Other Trading:",(0,r.jsx)("span",{className:"".concat(k>=0?"text-green-600":"text-red-600"),children:(0,r.jsx)(g.A,{animateOn:"view",revealDirection:"center",characters:"123456789",text:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(Math.abs(k))})})]})]}),(0,r.jsx)(R,{columns:I,data:M,filterColumn:"SCRIP_NAME",filterPlaceholder:"Filter Scrip...",includeFileData:!0,showAllRows:!0,showPagination:!1,downloadFileName:"IT_Report_MCX",year:L.watch("financialYear").value,fromDate:L.watch("financialYear").fromDate,toDate:L.watch("toDate"),moreDetails:{Realized:{rowKey:"category",rowAmount:"amount",rows:[{category:"Other Trading",amount:k},{category:"Expenses",amount:Q}],total:V},Expenses:{rowKey:"SCRIP_NAME",rowAmount:"PL_AMT",rows:z,total:Math.abs(Q)}}})]},"trading")]}),(0,r.jsx)(S.A,{processedExpensesData:z,totalExpenses:Q,expenseRowKey:"SCRIP_NAME",expenseRowAmount:"PL_AMT"})]})]})})}),E&&(0,r.jsx)(b.Bs,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,8526,8562,164,2589,814,8007,5565,9526,6143,4015,8665,6527,7518,5427,7733,6137,7555,7328,9086,5960,8441,1517,7358],()=>t(77929)),_N_E=e.O()}]);
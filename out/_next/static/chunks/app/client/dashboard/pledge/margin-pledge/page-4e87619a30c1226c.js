(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9614],{50036:(e,t,s)=>{Promise.resolve().then(s.bind(s,77412))},99577:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(67401).A)("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]])},98435:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(67401).A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},96771:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(67401).A)("HandCoins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]])},48686:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(67401).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},77711:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var n=s(21956),a=s.n(n)},21956:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=s(60306)._(s(30580));function a(e,t){var s;let a={};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,n.default)({...l,modules:null==(s=l.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39827:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=s(93719);function a(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return s}},30580:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=s(95155),a=s(12115),l=s(39827),r=s(79214);function i(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},d=function(e){let t={...c,...e},s=(0,a.lazy)(()=>t.loader().then(i)),d=t.loading;function o(e){let i=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,c=!t.ssr||!!t.loading,o=c?a.Suspense:a.Fragment,u=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(r.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(s,{...e})]}):(0,n.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(s,{...e})});return(0,n.jsx)(o,{...c?{fallback:i}:{},children:u})}return o.displayName="LoadableComponent",o}},79214:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}});let n=s(95155),a=s(47650),l=s(75861),r=s(18284);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=l.workAsyncStorage.getStore();if(void 0===s)return null;let i=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files;i.push(...t)}}return 0===i.length?null:(0,n.jsx)(n.Fragment,{children:i.map(e=>{let t=s.assetPrefix+"/_next/"+(0,r.encodeURIPath)(e);return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,a.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},77412:(e,t,s)=>{"use strict";s.d(t,{default:()=>M});var n=s(95155),a=s(12115),l=s(22130),r=s(73312),i=s(30814),c=s(47282),d=s(67328),o=s(12711),u=s(48686),m=s(48617),x=s(61594),h=s(96771),p=s(93650),f=s(51710),g=s(94696),j=s(72157),y=s(98435),v=s(99577);let b=(0,s(67401).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var N=s(85147),w=s(72508),C=s(33900),k=s(25121),A=s(2291),S=s(37528),q=s(77711),D=s(74317);(0,q.default)(()=>Promise.all([s.e(2226),s.e(7690),s.e(9190),s.e(1122),s.e(3740),s.e(2449),s.e(7981),s.e(853)]).then(s.bind(s,17981)),{loadableGenerated:{webpack:()=>[17981]},ssr:!1});let I=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),P=e=>{let{itemKey:t,currentValue:s,hasError:a,maxQuantity:l,onChange:i}=e;return(0,n.jsxs)("div",{className:"relative w-32",children:[(0,n.jsx)(C.p,{name:"quantity",type:"number",step:"1",min:"1","data-id":"quantity-".concat(t),placeholder:"Qty",value:s||"",className:"h-7 text-right pr-6 text-xs ".concat(a?"border-destructive bg-red-50":"border-gray-300 bg-white focus:border-primary focus:ring-1 focus:ring-primary"),onClick:e=>e.stopPropagation(),onKeyDown:e=>{("."===e.key||","===e.key)&&e.preventDefault()},onChange:e=>{i(t,e.target.value,l)}}),(0,n.jsx)(r.$,{variant:"ghost",size:"icon",className:"h-4 w-4 absolute right-1 top-1.5 p-0 text-primary hover:text-primary/80",onClick:e=>{e.stopPropagation();let s=document.querySelector('input[data-id="quantity-'.concat(t,'"]'));s&&s.focus()},children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,n.jsx)("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"})})})]})};function M(){let[e,t]=(0,a.useState)([]),[s,C]=(0,a.useState)(!0),[q,M]=(0,a.useState)(null),[O,Q]=(0,a.useState)(!1),[E,F]=(0,a.useState)(!1),[R,_]=(0,a.useState)([]),[z,L]=(0,a.useState)({}),[B,H]=(0,a.useState)({}),[T,V]=(0,a.useState)(!1),[Z,U]=(0,a.useState)(""),[W,X]=(0,a.useState)(null),[G,K]=(0,a.useState)(null),[$,J]=(0,a.useState)("amount-high-low"),[Y,ee]=(0,a.useState)(!1),et=(0,a.useRef)(null),es=(0,a.useRef)([]),en=(0,a.useRef)(null),[ea,el]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=()=>{el(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let er=(0,a.useCallback)(()=>R.map(e=>{let t=e.inputs||{};return{...e,inputs:t}}),[R]),ei=(0,a.useCallback)(()=>{let t=[...e];switch($){case"amount-high-low":return t.sort((e,t)=>t.amount-e.amount);case"script-a-z":return t.sort((e,t)=>e.scriptName.localeCompare(t.scriptName));case"script-z-a":return t.sort((e,t)=>t.scriptName.localeCompare(e.scriptName));case"amount-low-high":return t.sort((e,t)=>e.amount-t.amount);default:return t}},[e,$]),ec=async()=>{C(!0),M(null);try{let e=await (0,c.OLR)();if(!(0,d.k9)(e)){F(!0);return}let s=e.data.data,n={};s.forEach(e=>{n["".concat(e.boID,"-").concat(e.isin)]={quantity:e.unpledgedQuantity,segment:e.segment||"CM"}}),H(n),t(s),0===s.length&&i.oR.info("No pledge data available.")}catch(e){M(e.message||"An error occurred while fetching data."),i.oR.error("Failed to fetch pledge data. Please try again later.")}finally{C(!1)}};(0,a.useEffect)(()=>{ec()},[]);let ed=(t,s,n)=>{let a=Number.parseInt(s,10);H(e=>({...e,[t]:{...e[t],quantity:a||0}})),ep(t,a,n);let[l,r]=t.split("-"),i=R.findIndex(e=>e.boID===l&&e.isin===r);if(i>=0){var c;let e=[...R];e[i]={...e[i],inputs:{...e[i].inputs,quantity:a,segment:(null===(c=B[t])||void 0===c?void 0:c.segment)||"CM"}},_(e)}let d=document.getElementById("amount-".concat(t));if(d){let t=e.find(e=>e.boID===l&&e.isin===r);if(t){let e=t.amount,s=t.unpledgedQuantity;d.textContent=I(s>0?e*a/s:0)}}},eo=(e,t)=>{H(s=>({...s,[e]:{...s[e],segment:t}})),K(t);let[s,n]=e.split("-"),a=R.findIndex(e=>e.boID===s&&e.isin===n);if(a>=0){var l;let s=[...R];s[a]={...s[a],inputs:{...s[a].inputs,segment:t,quantity:(null===(l=B[e])||void 0===l?void 0:l.quantity)||0}},_(s)}},eu=e=>{switch(e){case"CM":return"CASH";case"FO":return"FO";case"CO":return"MCX";case"CD":return"CDS";default:return e}},em=(e,t)=>{let s="".concat(t.boID,"-").concat(t.isin);if(e){var n,a;_([...R,{...t,inputs:{quantity:(null===(n=B[s])||void 0===n?void 0:n.quantity)||t.unpledgedQuantity,segment:(null===(a=B[s])||void 0===a?void 0:a.segment)||t.segment||"CM"}}])}else _(R.filter(e=>!(e.boID===t.boID&&e.isin===t.isin)))},ex=(e,t)=>{var s,a,l,r;let i="".concat(e.boID,"-").concat(e.isin),c="".concat(i,"-quantity"),d=!!z[c],o=R.some(t=>t.boID===e.boID&&t.isin===e.isin),h=(null===(s=B[i])||void 0===s?void 0:s.quantity)!==void 0?B[i].quantity:e.unpledgedQuantity,p=(null===(a=B[i])||void 0===a?void 0:a.segment)||e.segment||"CM";return(0,n.jsx)("div",{className:"rounded-md mb-2 transition-all duration-200 ".concat(o?"bg-primary/5 border border-primary/20 shadow":"border border-gray-200 hover:border-primary/30 hover:shadow-sm"),children:(0,n.jsxs)("div",{className:"p-2",children:[ea?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(A.S,{id:"select-".concat(t),checked:o,onCheckedChange:t=>em(!!t,e)}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:e.scriptName}),(0,n.jsx)(k.E,{variant:"outline",className:"ml-2 text-[10px] bg-blue-50 text-blue-700 border-blue-200",children:e.isin})]})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 ml-6 mb-2",children:[(0,n.jsxs)("div",{className:"text-xs bg-gray-50 p-1 rounded",children:[(0,n.jsx)("span",{className:"text-gray-700 font-medium",children:"BOID:"})," ",(0,n.jsx)("span",{className:"font-medium",children:e.boID})]}),(0,n.jsxs)("div",{className:"text-xs bg-gray-50 p-1 rounded",children:[(0,n.jsx)("span",{className:"text-gray-700 font-medium",children:"Amount:"})," ",(0,n.jsx)("span",{id:"amount-".concat(i),className:"font-medium",children:I((null===(l=B[i])||void 0===l?void 0:l.quantity)&&e.unpledgedQuantity>0?e.amount*B[i].quantity/e.unpledgedQuantity:e.amount)})]}),(0,n.jsxs)("div",{className:"text-xs flex items-center bg-green-50 p-1 rounded",children:[(0,n.jsx)(u.A,{className:"h-3 w-3 text-green-600 mr-1"}),(0,n.jsx)("span",{className:"text-gray-700 font-medium",children:"Total:"})," ",(0,n.jsx)("span",{className:"font-medium ml-1",children:e.totalQuantity})]}),(0,n.jsxs)("div",{className:"text-xs flex items-center bg-amber-50 p-1 rounded",children:[(0,n.jsx)(m.A,{className:"h-3 w-3 text-amber-500 mr-1"}),(0,n.jsx)("span",{className:"text-gray-700 font-medium",children:"Unpledged:"})," ",(0,n.jsx)("span",{className:"font-medium ml-1",children:e.unpledgedQuantity})]})]}),(0,n.jsx)("div",{className:"flex items-center justify-between ml-6",children:(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-[10px] text-gray-700 font-medium block mb-1",children:"Segment"}),(0,n.jsxs)(S.l6,{value:p,onValueChange:e=>eo(i,e),children:[(0,n.jsx)(S.bq,{className:"h-7 w-24 text-xs font-medium",children:(0,n.jsx)(S.yv,{placeholder:"Select"})}),(0,n.jsxs)(S.gC,{children:[(0,n.jsx)(S.eb,{value:"CM",children:"CASH"}),(0,n.jsx)(S.eb,{value:"FO",children:"FO"}),(0,n.jsx)(S.eb,{value:"CO",children:"MCX"}),(0,n.jsx)(S.eb,{value:"CD",children:"CDS"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-[10px] text-gray-700 font-medium block mb-1",children:"Pledge Quantity"}),(0,n.jsx)(P,{itemKey:i,currentValue:h,hasError:d,maxQuantity:e.unpledgedQuantity,onChange:ed})]})]})})]}):(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[(0,n.jsxs)("div",{className:"col-span-4 flex items-center space-x-2",children:[(0,n.jsx)(A.S,{id:"select-".concat(t),checked:o,onCheckedChange:t=>em(!!t,e)}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:e.scriptName}),(0,n.jsx)(k.E,{variant:"outline",className:"ml-2 text-[10px] bg-blue-50 text-blue-700 border-blue-200",children:e.isin})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,n.jsxs)("span",{className:"bg-gray-100 px-1 py-0.5 rounded font-medium text-gray-800",children:["BOID: ",e.boID]}),(0,n.jsx)("span",{children:"â€¢"}),(0,n.jsxs)("span",{className:"bg-gray-100 px-1 py-0.5 rounded font-medium text-gray-800",children:["Amount:"," ",(0,n.jsx)("span",{id:"amount-".concat(i),children:I((null===(r=B[i])||void 0===r?void 0:r.quantity)&&e.unpledgedQuantity>0?e.amount*B[i].quantity/e.unpledgedQuantity:e.amount)})]})]})]})]}),(0,n.jsxs)("div",{className:"col-span-4 flex items-center justify-center space-x-3",children:[(0,n.jsxs)("div",{className:"flex items-center bg-green-50 px-2 py-1 rounded-md",children:[(0,n.jsx)(u.A,{className:"h-3 w-3 text-green-600 mr-1"}),(0,n.jsxs)("span",{className:"text-xs font-medium text-green-700",children:["Total: ",e.totalQuantity]})]}),(0,n.jsxs)("div",{className:"flex items-center bg-amber-50 px-2 py-1 rounded-md",children:[(0,n.jsx)(m.A,{className:"h-3 w-3 text-amber-500 mr-1"}),(0,n.jsxs)("span",{className:"text-xs font-medium text-amber-700",children:["Unpledged: ",e.unpledgedQuantity]})]})]}),(0,n.jsxs)("div",{className:"col-span-4 flex items-center justify-end space-x-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("span",{className:"text-[10px] font-medium text-gray-700",children:"Segment"}),(0,n.jsxs)(S.l6,{value:p,onValueChange:e=>eo(i,e),children:[(0,n.jsx)(S.bq,{className:"h-7 w-24 text-xs mt-1 font-medium",children:(0,n.jsx)(S.yv,{placeholder:"Select"})}),(0,n.jsxs)(S.gC,{children:[(0,n.jsx)(S.eb,{value:"CM",children:"CASH"}),(0,n.jsx)(S.eb,{value:"FO",children:"FO"}),(0,n.jsx)(S.eb,{value:"CO",children:"MCX"}),(0,n.jsx)(S.eb,{value:"CD",children:"CDS"})]})]})]}),(0,n.jsx)("div",{className:"col-span-4 flex items-center justify-end",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("span",{className:"text-[10px] font-medium text-gray-700",children:"Apply Qty"}),(0,n.jsx)(P,{itemKey:i,currentValue:h,hasError:d,maxQuantity:e.unpledgedQuantity,onChange:ed})]})})]})]}),d&&(0,n.jsxs)("div",{className:"mt-1 ml-6 flex items-center text-destructive text-[10px] bg-red-50 p-1 rounded",children:[(0,n.jsx)(x.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,n.jsx)("span",{className:"truncate",children:z[c]})]})]})},"".concat(i,"-").concat(t))},eh=async()=>{if(0===R.length){i.oR.error("Please select at least one item.");return}if(R.length>49){i.oR.error("Please select less than 50 items.");return}C(!0),M(null);try{let e=R.map(e=>{var t;let s=e.boID,n=e.isin,a="".concat(s,"-").concat(n),l=e.inputs.quantity||"",r=(null===(t=document.getElementById("amount-".concat(a)))||void 0===t?void 0:t.textContent)||"0",i=parseFloat(r.replace(/[^0-9.]/g,"")||"0").toFixed(2);return{clientid:e.clientId.toString()||"",boid:s,isin:n,quantity:l.toString(),amount:i,segment:e.inputs.segment}}),t=await (0,c.OGO)({record:e});if(!(0,d.k9)(t)){F(!0);return}let s=JSON.parse(t.data.data);if(s.reqid)_([]),localStorage.setItem("pledgeReturnUrl",window.location.pathname),U(s.url),X({pledgedtls:s.pledgedtls,dpid:s.dpid,version:s.version,reqid:s.reqid}),ee(!0);else throw Error((null==s?void 0:s.error)||"Failed to pledge stock")}catch(e){console.error("Error during pledge application:",e),i.oR.error(e instanceof Error?e.message:"An error occurred while pledging the stock")}finally{var e;C(!1),Q(!1),null===(e=en.current)||void 0===e||e.close()}};(0,a.useEffect)(()=>{if(Y&&Z&&W){let e=setTimeout(()=>{let e=document.getElementById("pledgeForm");if(e){e.pledgeDtls.value=W.pledgedtls,e.dpid.value=W.dpid,e.version.value=W.version,e.reqid.value=W.reqid;let t=e.querySelector('button[type="submit"]');t&&(t.click(),ee(!1))}},3e3);return()=>clearTimeout(e)}},[Y,Z,W]);let ep=(e,t,s)=>{let n="".concat(e,"-quantity");return isNaN(t)||t<=0||!Number.isInteger(t)?(L(e=>({...e,[n]:"Quantity should not be blank or zero."})),!1):t>s?(L(e=>({...e,[n]:"Quantity cannot exceed the unpledged quantity (".concat(s,")")})),!1):(L(e=>{let t={...e};return delete t[n],t}),!0)},ef=()=>{let e=!0,t={};return R.forEach(s=>{var n;let a="".concat(s.boID,"-").concat(s.isin),l=(null===(n=B[a])||void 0===n?void 0:n.quantity)||0,r="".concat(a,"-quantity");isNaN(l)||l<=0||!Number.isInteger(l)?(t[r]="Quantity should not be blank or zero.",e=!1):l>s.unpledgedQuantity&&(t[r]="Quantity cannot exceed the unpledged quantity (".concat(s.unpledgedQuantity,")"),e=!1)}),L(t),e};return(0,n.jsxs)(o.default,{children:[(0,n.jsxs)(l.Zp,{children:[(0,n.jsxs)(l.aR,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-2 sm:space-y-0",children:[(0,n.jsx)(l.ZB,{children:"Margin Pledge"}),e.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded-md px-2 py-1 flex items-center mx-auto",children:[(0,n.jsx)(x.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,n.jsxs)("p",{className:"sm:whitespace-nowrap",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Note:"})," Do not pledge stocks you plan to sell today or have already sold. Pledging such stocks can lead to settlement issues or short delivery."]})]}),(0,n.jsxs)(r.$,{onClick:()=>{let e=er();if(0===e.length){i.oR.error("Please select at least one item");return}if(e.length>49){i.oR.error("Please select less than 50 items.");return}if(es.current=e,_(e),ef()){var t;null===(t=en.current)||void 0===t||t.open()}else i.oR.error("Please review the details before confirming.",{icon:(0,n.jsx)(x.A,{className:"h-5 w-5 text-destructive"})})},size:"sm",className:"bg-primary hover:bg-primary/90 whitespace-nowrap",children:[(0,n.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Apply Pledge"]})]})]}),(0,n.jsx)(l.Wu,{children:s?(0,n.jsx)(N.A,{columns:4,rows:10}):q?(0,n.jsx)("div",{className:"text-center text-red-500 p-4 bg-red-100 rounded-md",children:q}):(0,n.jsx)(n.Fragment,{children:0===e.length?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 text-center bg-muted/20 rounded-md border border-dashed border-muted-foreground/20 my-4",children:[(0,n.jsx)("div",{className:"rounded-full bg-muted p-3 mb-4",children:(0,n.jsx)(p.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,n.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No records found"}),(0,n.jsx)("p",{className:"text-muted-foreground mb-4 max-w-md",children:"There are no records available for this criteria."})]}):(0,n.jsxs)("div",{className:"space-y-1",ref:et,children:[(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between p-2 bg-muted/10 rounded-md mb-3 shadow-sm gap-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(A.S,{id:"select-all",checked:R.length===e.length,onCheckedChange:t=>{t?_(e.map(e=>{var t,s;let n="".concat(e.boID,"-").concat(e.isin);return{...e,inputs:{quantity:(null===(t=B[n])||void 0===t?void 0:t.quantity)||e.unpledgedQuantity,segment:(null===(s=B[n])||void 0===s?void 0:s.segment)||e.segment||"CM"}}})):_([])}}),(0,n.jsx)("label",{htmlFor:"select-all",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Select All"})]}),(0,n.jsx)("div",{className:"".concat(ea?"w-[140px]":R.length>1&&G?"flex-1 flex justify-center":"flex-1 flex justify-end"),children:(0,n.jsx)("div",{className:"".concat(ea?"w-full":"max-w-[200px] w-full mx-auto"),children:(0,n.jsxs)(S.l6,{value:$,onValueChange:J,children:[(0,n.jsx)(S.bq,{className:"".concat(ea?"h-7 text-xs px-2":"h-8 text-xs"),children:(0,n.jsxs)(S.yv,{placeholder:"Sort by",children:["default"===$&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(f.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Default"})]}),"script-a-z"===$&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(g.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Script Name (A-Z)"})]}),"script-z-a"===$&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(j.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Script Name (Z-A)"})]}),"amount-low-high"===$&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(y.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Amount (Low-High)"})]}),"amount-high-low"===$&&(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(v.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Amount (High-Low)"})]})]})}),(0,n.jsxs)(S.gC,{children:[(0,n.jsx)(S.eb,{value:"default",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(f.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Default"})]})}),(0,n.jsx)(S.eb,{value:"script-a-z",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(g.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Script Name (A-Z)"})]})}),(0,n.jsx)(S.eb,{value:"script-z-a",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(j.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Script Name (Z-A)"})]})}),(0,n.jsx)(S.eb,{value:"amount-low-high",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(y.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Amount (Low-High)"})]})}),(0,n.jsx)(S.eb,{value:"amount-high-low",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(v.A,{className:"h-3.5 w-3.5 mr-2"}),(0,n.jsx)("span",{children:"Amount (High-Low)"})]})})]})]})})}),R.length>1&&G&&(0,n.jsxs)(r.$,{variant:"outline",size:"sm",onClick:()=>{if(!G||R.length<=1)return;let e={...B};R.forEach(t=>{let s="".concat(t.boID,"-").concat(t.isin);e[s]={...e[s],segment:G}}),H(e),_(R.map(e=>{var t;return{...e,inputs:{...e.inputs,segment:G,quantity:(null===(t=B["".concat(e.boID,"-").concat(e.isin)])||void 0===t?void 0:t.quantity)||e.unpledgedQuantity}}})),i.oR.success("Applied ".concat(eu(G)," segment to ").concat(R.length," selected items"))},className:"bg-blue-50 border-blue-200 hover:bg-blue-50 text-blue-700 text-xs px-2 py-1 ".concat(ea?"h-7 text-[10px] whitespace-nowrap":"h-7"),children:[(0,n.jsx)(b,{className:"".concat(ea?"h-2.5 w-2.5 mr-1":"h-3 w-3 mr-1")}),ea?"Apply":"Apply ".concat(eu(G))]})]}),ei().map((e,t)=>ex(e,t))]})})})]}),(0,n.jsx)(D.A,{ref:en,title:"Confirm Pledge",onConfirm:eh,confirmLoading:s,confirmText:"Confirm",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Are you sure you want to pledge the following shares?"}),(0,n.jsx)("div",{className:"rounded-md border overflow-hidden shadow-sm",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)(w.XI,{children:[(0,n.jsx)(w.A0,{className:"bg-primary/5",children:(0,n.jsxs)(w.Hj,{children:[(0,n.jsx)(w.nd,{className:"w-1/3 text-xs",children:"Script Name"}),(0,n.jsx)(w.nd,{className:"w-1/4 text-xs",children:"Quantity"}),(0,n.jsx)(w.nd,{className:"w-1/4 text-xs",children:"Segment"})]})}),(0,n.jsx)(w.BF,{children:R&&R.length>0?R.map((e,t)=>{var s,a;let l="".concat(e.boID,"-").concat(e.isin);return(0,n.jsxs)(w.Hj,{className:t%2==0?"bg-gray-50":"bg-white",children:[(0,n.jsx)(w.nA,{className:"text-xs",children:e.scriptName}),(0,n.jsx)(w.nA,{className:"text-xs",children:(0,n.jsx)(k.E,{variant:"secondary",className:"bg-green-100 text-green-700 text-[10px]",children:(null===(s=B[l])||void 0===s?void 0:s.quantity)||"-"})}),(0,n.jsx)(w.nA,{className:"text-xs",children:(0,n.jsx)(k.E,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-[10px]",children:eu((null===(a=B[l])||void 0===a?void 0:a.segment)||"CM")})})]},t)}):(0,n.jsx)(w.Hj,{children:(0,n.jsx)(w.nA,{colSpan:3,className:"text-center py-4 text-xs",children:"No scripts selected"})})})]})})}),(0,n.jsxs)("div",{className:"text-xs text-gray-700 mt-2 bg-amber-50 p-2 rounded-md border border-amber-200 flex items-start",children:[(0,n.jsx)(m.A,{className:"h-3 w-3 text-amber-500 mr-2 mt-0.5"}),(0,n.jsx)("p",{children:"Please review the details before confirming."})]})]})}),E&&(0,n.jsx)(d.Bs,{}),Y&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:(0,n.jsx)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Redirecting to CDSL page..."}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Please Wait! You will be redirected shortly."}),(0,n.jsx)("div",{className:"flex justify-center mb-4",children:(0,n.jsxs)("svg",{className:"animate-spin h-10 w-10 text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})})}),(0,n.jsxs)("form",{name:"frmpledge",id:"pledgeForm",method:"POST",action:Z,style:{display:"none"},children:[(0,n.jsx)("input",{type:"hidden",name:"pledgeDtls"}),(0,n.jsx)("input",{type:"hidden",name:"dpid"}),(0,n.jsx)("input",{type:"hidden",name:"version"}),(0,n.jsx)("input",{type:"hidden",name:"reqid"}),(0,n.jsx)("button",{type:"submit",children:"Submit Pledge"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,8526,8562,164,2589,814,8007,5565,9526,6143,4015,8665,6527,6137,7555,7328,9086,2536,8441,1517,7358],()=>t(50036)),_N_E=e.O()}]);
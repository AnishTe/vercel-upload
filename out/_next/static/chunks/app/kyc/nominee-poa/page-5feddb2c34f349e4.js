(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3009],{82245:(e,n,r)=>{Promise.resolve().then(r.bind(r,67677))},67677:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>eu});var l=r(95155),a=r(12115),o=r(24672),s=r(22130),d=r(62153),t=r(85060),i=r(69606),c=r(43415),m=r(57517),u=r(1466),h=r(42640),x=r(98867),p=r(61594),g=r(84226),v=r(33473),j=r(90185),f=r(45686),b=r(91902),N=r(51719),y=r(48617),C=r(32423),S=r(14505),M=r(73312),A=r(44870),w=r(33900),P=r(84179),I=r(37528),H=r(89095),F=r(26510),B=r(97586),D=r(17733),T=r(21567),R=r(65564),k=r(9534);let O=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,l.jsxs)(k.bL,{ref:n,className:(0,T.cn)("relative flex w-full touch-none select-none items-center",r),...a,children:[(0,l.jsx)(k.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:(0,l.jsx)(k.Q6,{className:"absolute h-full bg-primary"})}),(0,l.jsx)(k.zi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]})});O.displayName=k.bL.displayName;var Y=r(46754),E=r(38002),q=r(2291),_=r(25121),z=r(15157),G=r(70488),J=r(59173),V=r(47282),L=r(58690),W=r(14076),$=r(24590),Z=r(25427),U=r(68730),K=r(49956),X=r(27685),Q=r(27461);let{xo:ee,B:en}=U,er=c.Ik({name:c.Yj().min(1,"Guardian full name is required"),dob:c.vk(e=>""===e||null===e?void 0:e,c.p6({required_error:"Guardian Date of birth is required",invalid_type_error:"Guardian Invalid date format"})).optional().refine(e=>!e||e<=new Date,{message:"Guardian DOB cannot be in the future"}),isdCode:c.Yj().min(1,"Guardian ISD code is required").default("91").optional().nullable(),mobile:c.Yj().regex(/^\d{10}$/,"Guardian Mobile must be a 10-digit number").optional().nullable().or(c.eu("")),email:c.Yj().email("Guardian Invalid email format").optional().or(c.eu("")),address:c.Yj().min(5,"Guardian address is required"),countryCode:c.Yj().min(2,"Guardian country code is required"),stateCode:c.Yj().min(2,"Guardian state code is required"),pinCode:c.Yj().min(2,"Guardian pin code is required"),fatherName:c.Yj().min(1,"Guardian's / Husband's name is required"),gender:c.Yj().refine(e=>["Male","Fmale","Other"].includes(e),{message:"Please select Guardian gender"}),pan:c.Yj().regex(/^[A-Z]{5}[0-9]{4}[A-Z]$/i,"Invalid Guardian PAN format").transform(e=>e.toUpperCase()),aadhar:c.Yj().refine(e=>""===e||/^\d{12}$/.test(e)||/^(\*{8}|x{8})\d{4}$/.test(e),{message:"Guardian Aadhar must be a 12-digit number or a valid masked format."}),relationWithMinorNominee:c.Yj().refine(e=>ee.includes(e),{message:"Guardian Relation with minor nominee is required"})}),el=c.Ik({name:c.Yj().min(1,"Nominee Full name is required"),dob:c.p6({required_error:"Nominee Date of birth is required",invalid_type_error:"Nominee Invalid date format"}).refine(e=>e<=new Date,{message:"Nominee DOB cannot be in the future"}),proofType:c.Yj().refine(e=>["pan","uid","passport","driving_license","voter_id"].includes(e),{message:"Please select a valid Nominee Proof Type."}),proofNumber:c.Yj().min(1,"Nominee Proof number is required"),isdCode:c.Yj().min(1).default("91").optional().nullable(),mobile:c.Yj().regex(/^\d{10}$/,"Nominee Mobile must be a 10-digit number"),email:c.Yj().email("Nominee Invalid email format"),address:c.Yj().min(5,"Nominee Address is required"),countryCode:c.Yj().min(2,"Nominee Country is required"),stateCode:c.Yj().min(2,"Nominee State is required"),pinCode:c.Yj().min(2,"Nominee Pin Code is required"),fatherName:c.Yj().min(1,"Nominee Father Name is required"),gender:c.Yj().refine(e=>["Male","Fmale","Other"].includes(e),{message:"Please select Nominee gender"}),pan:c.Yj().regex(/^[A-Z]{5}[0-9]{4}[A-Z]$/i,"Invalid Nominee PAN format").transform(e=>e.toUpperCase()),relationWithBo:c.Yj().refine(e=>ee.includes(e),{message:"Nominee Relation with BO is required"}),percentageShares:c.ai().min(1).max(100),isMinor:c.zM().optional().default(!1),guardian:er.optional()}).superRefine((e,n)=>{let{isMinor:r,dob:l,guardian:a}=e,o=!1;if(l instanceof Date){let e=new Date,n=e.getFullYear()-l.getFullYear(),r=e.getMonth()-l.getMonth();(r<0||0===r&&e.getDate()<l.getDate())&&n--,o=n<18}if(r||o){if(!a){n.addIssue({code:c.eq.custom,message:"Guardian is required for minor nominee",path:["guardian"]});return}let e=er.safeParse(a);if(!e.success)for(let r of e.error.issues)n.addIssue({code:c.eq.custom,message:r.message,path:["guardian",...r.path]})}}),ea=c.Ik({name:c.Yj().min(1,"Holder Name is required."),fatherName:c.Yj().optional(),pan:c.Yj().regex(/^[A-Z]{5}[0-9]{4}[A-Z]$/i,"Invalid Holder PAN format").transform(e=>e.toUpperCase()),mobile:c.Yj({required_error:"Holder Mobile number is required",invalid_type_error:"Holder Mobile must be a string"}).regex(/^\d{10}$/,"Holder Mobile must be a 10-digit number"),email:c.Yj({required_error:"Holder Email is required",invalid_type_error:"Holder Email must be a string"}).email("Invalid Holder email format"),isdCode:c.Yj().min(1,"Holder ISD code is required").default("91").optional().nullable(),dob:c.p6({required_error:"Holder Date of birth is required",invalid_type_error:"Holder Invalid date format"}).refine(e=>e<=new Date,{message:"Holder DOB cannot be in the future"}),aadhar:c.Yj({required_error:"Holder Aadhar is required",invalid_type_error:"Holder Aadhar must be a string"}).min(1,"Holder Aadhar is required").refine(e=>/^\d{12}$/.test(e)||/^(\*{8}|x{8}|X{8})\d{4}$/.test(e),{message:"Holder Aadhar must be a 12-digit number or a valid masked format."}),gender:c.vk(e=>""===e?void 0:e,c.k5(["Male","Fmale","Other"],{required_error:"Holder Gender Required!",invalid_type_error:"Holder Gender Required!"})),nationality:c.Yj().optional()}),eo=c.Ik({poaId:c.Yj().optional(),poaSetupDate:c.p6().optional(),poaFromDate:c.p6({required_error:"From date is required",invalid_type_error:"Invalid date format"}),poaToDate:c.p6().optional(),poaPurposeCode:c.Yj().optional(),poaRemarks:c.Yj().optional(),poaGpaBpaFlag:c.YO(c.Yj(),{required_error:"Please select at least 2 options",invalid_type_error:"Invalid selection"}).refine(e=>e.length>=2,{message:"Please select at least 2 options"})}),es=ea.extend({permanentAddressLine1:c.Yj().min(1,"Permanent Address Line 1 is required"),permanentCity:c.Yj().min(1,"Permanent City is required"),permanentState:c.Yj().min(1,"Permanent State is required"),permanentPincode:c.Yj().min(1,"Permanent Pincode is required"),permanentCountry:c.Yj().min(1,"Permanent Country is required"),correspondenceAddressLine1:c.Yj().min(1,"Correspondence Address Line 1 is required"),correspondenceCity:c.Yj().min(1,"Correspondence City is required"),correspondenceState:c.Yj().min(1,"Correspondence State is required"),correspondenceCountry:c.Yj().min(1,"Correspondence Country is required"),correspondencePincode:c.Yj().min(1,"Correspondence Pincode is required"),nationality:c.Yj().min(1,"Nationality is required"),occupationType:c.Yj().min(1,"Occupation Type is required"),annualIncome:c.Yj().min(1,"Annual Income is required")}),ed=c.Ik({wishToNominate:c.k5(["yes","no"],{required_error:"Please select whether you wish to nominate."}),nominees:c.YO(el).max(3),wishToPOA:c.k5(["yes","no"],{required_error:"Please select whether you wish to poa."}),poas:c.YO(eo).max(2),addSecondHolder:c.zM().default(!1),addThirdHolder:c.zM().default(!1),holders:c.Ik({firstHolder:es.optional(),secondHolder:c.RZ(()=>c.KC([ea,c.Vx()])),thirdHolder:c.RZ(()=>c.KC([ea,c.Vx()]))}).optional()}).superRefine((e,n)=>{var r,l;if("yes"===e.wishToNominate&&0===e.nominees.length&&n.addIssue({code:c.eq.custom,message:"At least one nominee is required if you wish to nominate",path:["nominees"]}),"yes"===e.wishToPOA&&0===e.poas.length&&n.addIssue({code:c.eq.custom,message:"At least one poa is required if you wish to nominate",path:["poas"]}),"yes"===e.wishToNominate&&e.nominees.length>0&&100!==e.nominees.reduce((e,n)=>e+n.percentageShares,0)&&n.addIssue({code:"custom",message:"Total nominee shares must equal 100%",path:["nominees"]}),e.nominees.forEach((e,r)=>{e.isMinor&&!e.guardian&&n.addIssue({code:"custom",message:"Guardian information is required for minor nominee",path:["nominees",r,"guardian"]})}),e.addSecondHolder){let l=ea.safeParse(null===(r=e.holders)||void 0===r?void 0:r.secondHolder);l.success||l.error.errors.forEach(e=>n.addIssue({code:"custom",message:e.message,path:["holders","secondHolder",...e.path]}))}if(e.addThirdHolder){let r=ea.safeParse(null===(l=e.holders)||void 0===l?void 0:l.thirdHolder);r.success||r.error.errors.forEach(e=>n.addIssue({code:"custom",message:e.message,path:["holders","thirdHolder",...e.path]}))}}),et=[{id:"holders",title:"Holders",icon:(0,l.jsx)(m.A,{className:"h-5 w-5"})},{id:"nominee",title:"Nominee Information",icon:(0,l.jsx)(u.A,{className:"h-5 w-5"})},{id:"poa",title:"Power of Attorney",icon:(0,l.jsx)(h.A,{className:"h-5 w-5"})}],ei=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();function ec(){let e;let[n,r]=(0,a.useState)(!1),[s,d]=(0,a.useState)(!1),[c,k]=(0,a.useState)(100),[U,er]=(0,a.useState)({}),[el,ea]=(0,a.useState)(!1),[eo,es]=(0,a.useState)(null),[ec,em]=(0,a.useState)(null),[eu,eh]=(0,a.useState)([null,null,null]),[ex,ep]=(0,a.useState)("holders"),[eg,ev]=(0,a.useState)({nominee:0,poa:0,holders:0,total:0}),[ej,ef]=(0,a.useState)(!1),eb=(0,L.Lg)("kyc_personal-details_form");eb&&(e=JSON.parse(eb));let eN=(0,a.useRef)(null),{handleStepCompletion:ey,checkTokenValidity:eC}=(0,o.b)(),{toast:eS}=(0,R.dj)(),{registerFieldRef:eM,setErrors:eA}=(0,Q.Z)(),ew=(0,a.useMemo)(()=>({wishToNominate:"no",wishToPOA:"no",nominees:[],poas:[],addSecondHolder:!1,addThirdHolder:!1,holders:{firstHolder:{name:"".concat((null==e?void 0:e.firstName)||""," ").concat((null==e?void 0:e.middleName)||""," ").concat((null==e?void 0:e.lastName)||"").trim(),fatherName:(null==e?void 0:e.fatherSpouseName)||"",pan:(null==e?void 0:e.pan)||"",email:(null==e?void 0:e.email)||"",isdCode:(null==e?void 0:e.isdCode)||"91",mobile:(null==e?void 0:e.mobile)||"",dob:(null==e?void 0:e.dobSchema)?new Date(null==e?void 0:e.dobSchema):new Date,aadhar:(null==e?void 0:e.aadharSchema)||"",gender:(()=>{let n=ei((null==e?void 0:e.genderSchema)||"Other");return"Male"===n||"Fmale"===n||"Other"===n?n:"Other"})(),nationality:(null==e?void 0:e.nationality)||"IN",permanentAddressLine1:(null==e?void 0:e.permanentAddressLine1)||"",permanentCity:(null==e?void 0:e.permanentCity)||"",permanentState:(null==e?void 0:e.permanentState)||"",permanentPincode:(null==e?void 0:e.permanentPincode)||"",permanentCountry:(null==e?void 0:e.permanentCountry)||"IN",correspondenceAddressLine1:(null==e?void 0:e.correspondenceAddressLine1)||"",correspondenceCity:(null==e?void 0:e.correspondenceCity)||"",correspondenceState:(null==e?void 0:e.correspondenceState)||"",correspondenceCountry:(null==e?void 0:e.correspondenceCountry)||"IN",correspondencePincode:(null==e?void 0:e.correspondencePincode)||"",occupationType:(null==e?void 0:e.occupationType)||"",annualIncome:(null==e?void 0:e.annualIncome)||""},secondHolder:void 0,thirdHolder:void 0}}),[null==e?void 0:e.aadharSchema,null==e?void 0:e.annualIncome,null==e?void 0:e.correspondenceAddressLine1,null==e?void 0:e.correspondenceCity,null==e?void 0:e.correspondenceCountry,null==e?void 0:e.correspondencePincode,null==e?void 0:e.correspondenceState,null==e?void 0:e.dobSchema,null==e?void 0:e.email,null==e?void 0:e.fatherSpouseName,null==e?void 0:e.firstName,null==e?void 0:e.genderSchema,null==e?void 0:e.isdCode,null==e?void 0:e.lastName,null==e?void 0:e.middleName,null==e?void 0:e.mobile,null==e?void 0:e.nationality,null==e?void 0:e.occupationType,null==e?void 0:e.pan,null==e?void 0:e.permanentAddressLine1,null==e?void 0:e.permanentCity,null==e?void 0:e.permanentCountry,null==e?void 0:e.permanentPincode,null==e?void 0:e.permanentState]),eP=(0,i.mN)({resolver:(0,t.u)(ed),defaultValues:ew}),{fields:eI,append:eH,remove:eF}=(0,i.jz)({control:eP.control,name:"nominees"}),{fields:eB,append:eD,remove:eT}=(0,i.jz)({control:eP.control,name:"poas"}),eR=eP.watch("wishToNominate"),ek=eP.watch("wishToPOA"),eO=eP.watch("nominees"),eY=eP.watch("poas"),eE=eP.watch("addSecondHolder"),eq=eP.watch("addThirdHolder"),e_=(0,a.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r={},l={addSecondHolder:!1,addThirdHolder:!1};return n.forEach((n,a)=>{var o;if(!n)return;let s=n.holdNationalityCode||"",d={name:n.holdBoName||"",fatherName:n.holdFatherHusbandName||"",pan:n.holdPan||"",mobile:n.holdMobileNo||"",email:n.holdEmailId||"",isdCode:n.holdIsdCodeForMobileNo||"91",dob:n.holdDateOfBirth?(0,B.H)(n.holdDateOfBirth):void 0,aadhar:n.holdAadhaar||"",gender:"MALE"===n.holdSexCode?"Male":"FMALE"===n.holdSexCode?"Fmale":"Other",nationality:(null===(o=en.find(e=>e.value===s))||void 0===o?void 0:o.value)||""},t={name:"".concat((null==e?void 0:e.firstName)||""," ").concat((null==e?void 0:e.middleName)||""," ").concat((null==e?void 0:e.lastName)||"").trim(),fatherName:(null==e?void 0:e.fatherSpouseName)||"",pan:(null==e?void 0:e.pan)||"",email:(null==e?void 0:e.email)||"",isdCode:(null==e?void 0:e.isdCode)||"91",mobile:(null==e?void 0:e.mobile)||"",dob:(null==e?void 0:e.dobSchema)?new Date(null==e?void 0:e.dobSchema):new Date,aadhar:(null==e?void 0:e.aadharSchema)||"",gender:(()=>{let n=ei((null==e?void 0:e.genderSchema)||"Other");return"Male"===n||"Fmale"===n||"Other"===n?n:"Other"})(),nationality:(null==e?void 0:e.nationality)||"IN",permanentAddressLine1:(null==e?void 0:e.permanentAddressLine1)||"",permanentCity:(null==e?void 0:e.permanentCity)||"",permanentState:(null==e?void 0:e.permanentState)||"",permanentPincode:(null==e?void 0:e.permanentPincode)||"",permanentCountry:(null==e?void 0:e.permanentCountry)||"IN",correspondenceAddressLine1:(null==e?void 0:e.correspondenceAddressLine1)||"",correspondenceCity:(null==e?void 0:e.correspondenceCity)||"",correspondenceState:(null==e?void 0:e.correspondenceState)||"",correspondenceCountry:(null==e?void 0:e.correspondenceCountry)||"IN",correspondencePincode:(null==e?void 0:e.correspondencePincode)||"",occupationType:(null==e?void 0:e.occupationType)||"",annualIncome:(null==e?void 0:e.annualIncome)||""};0===a&&(r.firstHolder=t),1===a&&(r.secondHolder=d,l.addSecondHolder=!0),2===a&&(r.thirdHolder=d,l.addThirdHolder=!0)}),{holders:r,...l}},[null==e?void 0:e.aadharSchema,null==e?void 0:e.annualIncome,null==e?void 0:e.correspondenceAddressLine1,null==e?void 0:e.correspondenceCity,null==e?void 0:e.correspondenceCountry,null==e?void 0:e.correspondencePincode,null==e?void 0:e.correspondenceState,null==e?void 0:e.dobSchema,null==e?void 0:e.email,null==e?void 0:e.fatherSpouseName,null==e?void 0:e.firstName,null==e?void 0:e.genderSchema,null==e?void 0:e.isdCode,null==e?void 0:e.lastName,null==e?void 0:e.middleName,null==e?void 0:e.mobile,null==e?void 0:e.nationality,null==e?void 0:e.occupationType,null==e?void 0:e.pan,null==e?void 0:e.permanentAddressLine1,null==e?void 0:e.permanentCity,null==e?void 0:e.permanentCountry,null==e?void 0:e.permanentPincode,null==e?void 0:e.permanentState]),ez=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(n)||0===n.length)return null;let r=Array.from(new Set(n.map(e=>{var n;return null===(n=e.poaNatureType)||void 0===n?void 0:n.trim()}).filter(Boolean))),l=n[0];return{poaId:(null===(e=l.poaOrDdpiId)||void 0===e?void 0:e.trim())||"",poaPurposeCode:l.poaLinkPurposeCode||"",poaRemarks:"",poaGpaBpaFlag:r}},eG=e=>{let n=e.toLowerCase();return"m"===n||"male"===n?"Male":"f"===n||"female"===n?"Fmale":"ts"===n||"transgender"===n?"Transgender":""},eJ=(0,a.useCallback)(e=>{var n,r,l,a,o,s,d,t,i,c,m,u,h,x,p,g,v,j,f,b,N,y,C,S;let M="YES"===e.isMinor||"FNM"===e.nomMinorIndicator,A=(null===(n=e.nomRelationship)||void 0===n?void 0:n.trim())||"",w={name:(null===(r=e.nomName)||void 0===r?void 0:r.trim())||"",dob:e.nomDOB?(0,B.H)(e.nomDOB):void 0,proofType:(null===(l=e.nomProofType)||void 0===l?void 0:l.toLowerCase().trim())||"",proofNumber:(null===(a=e.nomProofNo)||void 0===a?void 0:a.trim())||"",isdCode:"91",mobile:(null===(o=e.nomMobile)||void 0===o?void 0:o.trim())||"",email:(null===(s=e.nomEmail)||void 0===s?void 0:s.trim())||"",address:(null===(d=e.nomAddress)||void 0===d?void 0:d.trim())||"",countryCode:(null===(t=e.nomCountryCode)||void 0===t?void 0:t.trim())||"",stateCode:(null===(i=e.nomStateCode)||void 0===i?void 0:i.trim())||"",pinCode:(null===(c=e.nomPinCode)||void 0===c?void 0:c.trim())||"",fatherName:(null===(m=e.nomFatherHusbandName)||void 0===m?void 0:m.trim())||"",gender:eG(e.nomSexCode),pan:(null===(u=e.nomPAN)||void 0===u?void 0:u.trim())||"",relationWithBo:ee.find(e=>e===A)||"",percentageShares:parseFloat(null===(h=e.nomPercentage)||void 0===h?void 0:h.trim())||0,isMinor:M};return M&&(w.guardian={name:(null===(x=e.guardName)||void 0===x?void 0:x.trim())||"",dob:e.guardDOB?(0,B.H)(e.guardDOB):void 0,email:(null===(p=e.guardEmail)||void 0===p?void 0:p.trim())||"",mobile:(null===(g=e.guardMobile)||void 0===g?void 0:g.trim())||"",pan:(null===(v=e.guardPAN)||void 0===v?void 0:v.trim())||"",aadhar:(null===(j=e.guardAadhar)||void 0===j?void 0:j.trim())||"",address:(null===(f=e.guardAddress)||void 0===f?void 0:f.trim())||"",stateCode:(null===(b=e.guardStateCode)||void 0===b?void 0:b.trim())||"",pinCode:(null===(N=e.guardPinCode)||void 0===N?void 0:N.trim())||"",countryCode:(null===(y=e.guardCountryCode)||void 0===y?void 0:y.trim())||"",gender:eG(e.guardSexCode),fatherName:(null===(C=e.guardFatherHusbandName)||void 0===C?void 0:C.trim())||"",relationWithMinorNominee:(null===(S=e.guardRelationship)||void 0===S?void 0:S.trim())||""}),w},[]),eV=(0,a.useCallback)(async()=>{try{var e,n,l;r(!0);let a=sessionStorage.getItem("dematId");if(!a){eS({title:"Error",description:"Can't fetch the details, missing Demat ID.",variant:"destructive"});return}let[o,s,d]=await Promise.all([(0,V.xIe)({dematId:a}),(0,V.SnL)({dematId:a}),(0,V.Umz)({dematId:a})]);if(!eC(null==o?void 0:null===(e=o.data)||void 0===e?void 0:e.tokenValidity)||!eC(null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.tokenValidity)||!eC(null==d?void 0:null===(l=d.data)||void 0===l?void 0:l.tokenValidity))return;if(200===o.status){let e=o.data.data;Array.isArray(e)&&e.length>0&&(eP.setValue("wishToNominate","yes"),eF(),e.forEach(e=>{let n=eJ(e);eH(n)}))}if(200===s.status){let e=s.data.data;if(Array.isArray(e)&&e.length>0){let n=e_(e);eP.reset({...eP.getValues(),...n})}}if(200===d.status){let e=d.data.data,n=ez(e);n&&(eP.setValue("wishToPOA","yes"),eT(),Array.isArray(n.poaGpaBpaFlag)&&eD({...n,poaFromDate:new Date,poaSetupDate:new Date,poaGpaBpaFlag:n.poaGpaBpaFlag.filter(e=>"string"==typeof e)}))}eS({title:"Success",description:"Details has been prefilled."})}catch(e){console.error("Error fetching profile details:",e),eS({title:"Error",description:"Failed to fetch BO details.",variant:"destructive"})}finally{r(!1)}},[eH,eD,eC,eP,e_,eJ,eF,eT,eS]),eL=(0,a.useCallback)(()=>{var e,n,r,l,a,o,s,d,t,i,c,m,u,h,x,p,g,v,j,f,b,N,y,C,S,M,A,w;let P=eP.getValues(),I={nominee:0,poa:0,holders:0,total:0},H={nominee:0,poa:0,holders:0,total:0};return I.nominee+=1,I.total+=1,P.wishToNominate&&(H.nominee+=1),P.wishToNominate&&(H.total+=1),"yes"===P.wishToNominate&&P.nominees.length>0&&P.nominees.forEach(e=>{I.nominee+=14,I.total+=14,e.name&&(H.nominee+=1,H.total+=1),e.relationWithBo&&(H.nominee+=1,H.total+=1),e.address&&(H.nominee+=1,H.total+=1),e.proofType&&(H.nominee+=1,H.total+=1),e.proofNumber&&(H.nominee+=1,H.total+=1),e.percentageShares&&(H.nominee+=1,H.total+=1),e.mobile&&(H.nominee+=1,H.total+=1),e.email&&(H.nominee+=1,H.total+=1),e.countryCode&&(H.nominee+=1,H.total+=1),e.stateCode&&(H.nominee+=1,H.total+=1),e.pinCode&&(H.nominee+=1,H.total+=1),e.fatherName&&(H.nominee+=1,H.total+=1),e.gender&&(H.nominee+=1,H.total+=1),e.pan&&(H.nominee+=1,H.total+=1),e.isMinor&&(I.nominee+=13,I.total+=13,e.guardian&&(e.guardian.name&&(H.nominee+=1,H.total+=1),e.guardian.relationWithMinorNominee&&(H.nominee+=1,H.total+=1),e.guardian.address&&(H.nominee+=1,H.total+=1),e.guardian.mobile&&(H.nominee+=1,H.total+=1),e.guardian.email&&(H.nominee+=1,H.total+=1),e.guardian.dob&&(H.nominee+=1,H.total+=1),e.guardian.countryCode&&(H.nominee+=1,H.total+=1),e.guardian.stateCode&&(H.nominee+=1,H.total+=1),e.guardian.pinCode&&(H.nominee+=1,H.total+=1),e.guardian.fatherName&&(H.nominee+=1,H.total+=1),e.guardian.gender&&(H.nominee+=1,H.total+=1),e.guardian.pan&&(H.nominee+=1,H.total+=1),e.guardian.aadhar&&(H.nominee+=1,H.total+=1)))}),I.poa+=1,I.total+=1,P.wishToPOA&&(H.poa+=1),P.wishToPOA&&(H.total+=1),"yes"===P.wishToPOA&&P.poas.length>0&&P.poas.forEach(e=>{I.poa+=4,I.total+=4,e.poaId&&(H.poa+=1,H.total+=1),e.poaSetupDate&&(H.poa+=1,H.total+=1),e.poaFromDate&&(H.poa+=1,H.total+=1),e.poaPurposeCode&&(H.poa+=1,H.total+=1)}),I.holders+=7,H.holders+=7,I.total+=7,H.total+=7,P.addSecondHolder&&(I.holders+=7,I.total+=7,(null===(n=P.holders)||void 0===n?void 0:null===(e=n.secondHolder)||void 0===e?void 0:e.name)&&(H.holders+=1,H.total+=1),(null===(l=P.holders)||void 0===l?void 0:null===(r=l.secondHolder)||void 0===r?void 0:r.pan)&&(H.holders+=1,H.total+=1),(null===(o=P.holders)||void 0===o?void 0:null===(a=o.secondHolder)||void 0===a?void 0:a.email)&&(H.holders+=1,H.total+=1),(null===(d=P.holders)||void 0===d?void 0:null===(s=d.secondHolder)||void 0===s?void 0:s.mobile)&&(H.holders+=1,H.total+=1),(null===(i=P.holders)||void 0===i?void 0:null===(t=i.secondHolder)||void 0===t?void 0:t.dob)&&(H.holders+=1,H.total+=1),(null===(m=P.holders)||void 0===m?void 0:null===(c=m.secondHolder)||void 0===c?void 0:c.aadhar)&&(H.holders+=1,H.total+=1),(null===(h=P.holders)||void 0===h?void 0:null===(u=h.secondHolder)||void 0===u?void 0:u.gender)&&(H.holders+=1,H.total+=1)),P.addThirdHolder&&(I.holders+=7,I.total+=7,(null===(p=P.holders)||void 0===p?void 0:null===(x=p.thirdHolder)||void 0===x?void 0:x.name)&&(H.holders+=1,H.total+=1),(null===(v=P.holders)||void 0===v?void 0:null===(g=v.thirdHolder)||void 0===g?void 0:g.pan)&&(H.holders+=1,H.total+=1),(null===(f=P.holders)||void 0===f?void 0:null===(j=f.thirdHolder)||void 0===j?void 0:j.email)&&(H.holders+=1,H.total+=1),(null===(N=P.holders)||void 0===N?void 0:null===(b=N.thirdHolder)||void 0===b?void 0:b.mobile)&&(H.holders+=1,H.total+=1),(null===(C=P.holders)||void 0===C?void 0:null===(y=C.thirdHolder)||void 0===y?void 0:y.dob)&&(H.holders+=1,H.total+=1),(null===(M=P.holders)||void 0===M?void 0:null===(S=M.thirdHolder)||void 0===S?void 0:S.aadhar)&&(H.holders+=1,H.total+=1),(null===(w=P.holders)||void 0===w?void 0:null===(A=w.thirdHolder)||void 0===A?void 0:A.gender)&&(H.holders+=1,H.total+=1)),{nominee:I.nominee>0?Math.round(H.nominee/I.nominee*100):0,poa:I.poa>0?Math.round(H.poa/I.poa*100):0,holders:I.holders>0?Math.round(H.holders/I.holders*100):0,total:I.total>0?Math.round(H.total/I.total*100):0}},[eP]);(0,a.useEffect)(()=>{eO&&eO.length>0?k(Math.max(0,100-eO.reduce((e,n)=>e+(n.percentageShares||0),0))):k(100)},[eO]),(0,a.useEffect)(()=>{if(el){let e=eP.watch(()=>{ev(eL())});return()=>e.unsubscribe()}},[eL,eP,el]),(0,a.useEffect)(()=>{el||setTimeout(()=>{eV()},1e3),ea(!0)},[eV,el]),(0,a.useEffect)(()=>{"no"===eR&&eO.length>0&&eP.setValue("nominees",[]),"no"===ek&&eY.length>0&&eP.setValue("poas",[])},[eR,eP,eO,ek,eY.length]),(0,a.useEffect)(()=>{eE||(eP.setValue("holders.secondHolder",void 0),eP.setValue("addThirdHolder",!1),eP.setValue("holders.thirdHolder",void 0))},[eE,eP]),(0,a.useEffect)(()=>{eq||eP.setValue("holders.thirdHolder",void 0)},[eq,eP]);let eW=e=>{ep(e);let n=document.getElementById(e);if(n){var r;let e=(null===(r=eN.current)||void 0===r?void 0:r.offsetHeight)||120,l=n.getBoundingClientRect().top+window.pageYOffset-e-20;window.scrollTo({top:l,behavior:"smooth"})}},e$=e=>{er(n=>({...n,[e]:!n[e]}))},eZ=()=>{if("yes"!==eR){eS({title:"Cannot add nominee",description:"Please select 'Yes' for 'Do you wish to nominate?' first.",variant:"destructive"});return}if(eI.length<3){let e=eI.length,n=eI.length+1;eH({name:"",isdCode:"91",relationWithBo:"Spouse",address:"",mobile:"",email:"",dob:void 0,proofType:"pan",proofNumber:"",percentageShares:Math.floor(c/(eI.length+1)),isMinor:!1,guardian:void 0,pan:"",countryCode:"",stateCode:"",pinCode:"",fatherName:"",gender:"Other"}),eh([...eu,null]),setTimeout(()=>{let e=Math.floor(100/n),r=100%n;for(let l=0;l<n;l++){let n=e+(l<r?1:0);eP.setValue("nominees.".concat(l,".percentageShares"),n)}},100),setTimeout(()=>{let n=document.getElementById("nominee-".concat(e));if(n){var r;let e=(null===(r=eN.current)||void 0===r?void 0:r.offsetHeight)||120,l=n.getBoundingClientRect().top+window.pageYOffset-e-20;window.scrollTo({top:l,behavior:"smooth"})}},200),er(e=>({...e,[eI.length]:!0}))}else eS({title:"Maximum nominees reached",description:"You can add a maximum of 3 nominees.",variant:"destructive"})},eU=(e,n,r)=>{eQ(e);let l=sessionStorage.getItem("client_id")||"";return console.log(r),{data:e.map((e,a)=>(console.log(1,e),{nomName:e.name,nomAddress:e.address||"",nomCountryCode:e.countryCode||"",nomPinCode:e.pinCode||"",nomStateCode:e.stateCode||"",nomMobile:e.mobile||"",nomEmail:e.email||"",nomDOB:(0,D.GP)(e.dob,"yyyy-MM-dd"),nomProofType:e.proofType,nomProofNo:e.proofNumber,isdCodeForMobileNo:e.isdCode,nomFatherHusbandName:e.fatherName||"",nomSexCode:e.gender,nomPAN:e.pan||"",nomPANFlag:"PANVLD",nomAadhar:"",nomAadharFlag:"",isMinor:e.isMinor?"YES":"NO",nomNoNominationFlag:"YES",nomRelationship:e.relationWithBo,nomPercentage:e.percentageShares.toString(),nomFlagSharePercEquality:"YES",nomResidualSecuritiesFlag:0===a?"YES":"NO",nomSerialNo:(a+1).toString(),nomMinorIndicator:e.isMinor?"YES":"NO",guardName:e.isMinor?e.guardian.name:"",guardAddress:e.isMinor&&e.guardian&&e.guardian.address||"",guardCountryCode:e.isMinor?e.guardian.countryCode:"",guardPinCode:e.isMinor?e.guardian.pinCode:"",guardStateCode:e.isMinor?e.guardian.stateCode:"",guardMobile:e.isMinor?e.guardian.mobile:"",guardEmail:e.isMinor?e.guardian.email:"",guardDOB:e.isMinor&&e.guardian?(0,D.GP)(e.guardian.dob,"yyyy-MM-dd"):"",guardFatherHusbandName:e.isMinor?e.guardian.fatherName:"",guardSexCode:e.isMinor?e.guardian.gender:"",guardPAN:e.isMinor?e.guardian.pan:"",guardAadhar:e.isMinor?e.guardian.aadhar:"",guardRelationship:e.isMinor&&e.guardian?e.guardian.relationWithMinorNominee:"",guardResidualSecuritiesFlag:"YES",guardAadharFlag:"",guardPANFlag:"",clientId:l,dematId:n.toString(),boId:r||""}))}},eK=e=>{switch(e){case"Government":return"Government Services";case"PrivateSector":return"Private Sector";case"PublicSector":return"Public Sector";case"BusinessOwner":return"Business";case"SelfEmployed":case"Other":return"Others";default:return e}};function eX(e,n,r,l){var a,o,s,d;console.log(e);let t=eK(e.occupationType),i=sessionStorage.getItem("client_id")||"";return{dematId:n.toString(),clientId:i,holdBoName:"".concat(null!==(o=null!==(a=e.firstName)&&void 0!==a?a:e.name)&&void 0!==o?o:""," ").concat(e.middleName||""," ").concat(e.lastName||"").trim(),holdBeneficiaryShortName:"",holdFatherHusbandName:null!==(d=null!==(s=e.fatherHusbandName)&&void 0!==s?s:e.fatherName)&&void 0!==d?d:"",holdDateOfBirth:e.dob?(0,D.GP)(e.dob,"yyyy-MM-dd"):"",holdSexCode:e.gender?e.gender.toUpperCase():"",holdPan:e.pan||"",holdPanVerifyFlag:"PANVLD",holdAadhaar:e.aadhar||"",holdAadhaarVerifyFlag:"",holdReasonForNonUpdationOfAadhaar:"",holdIsdCodeForMobileNo:e.isdCode||"",holdMobileNo:e.mobile||"",holdFamilyFlagForMobileNumber:"",holdIsdCodeForSecondaryMobileNo:"",holdPhoneNo:"",holdEmailId:e.email||"",holdFamilyFlagForEmailId:"",holdAlternateEmailId:"",holdAnnualIncome:e.annualIncome||"",holdCorrAddr:e.correspondenceAddressLine1||"",holdCorrCountryCode:e.correspondenceCountry||"",holdCorrPinCode:e.correspondencePincode||"",holdCorrStateCode:e.correspondenceState||"",holdNationalityCode:e.nationality||"",holdPermAddr:e.permanentAddressLine1||"",holdPermAddrCountryCode:e.permanentCountry||"",holdPermAddrPinCode:e.permanentPincode||"",holdPermAddrStateCode:e.permanentState||"",holdOccupation:t||"",holdSerialNo:r.toString(),boId:l||""}}let eQ=e=>{let n=Array(e.length).fill(""),r=e.map((e,n)=>e.isMinor?n+1:null).filter(e=>null!==e),l=r.length;if(1===l)return n[r[0]-1]=1===r[0]?"FNM":2===r[0]?"SNM":"TNM",n;if(2===l){let e=new Set(r),l="";return e.has(1)&&e.has(2)?l="FSM":e.has(1)&&e.has(3)?l="FTM":e.has(2)&&e.has(3)&&(l="STM"),r.forEach(e=>{n[e-1]=l}),n}return l===e.length&&e.length>1&&r.forEach(e=>{n[e-1]="ANM"}),n};async function e0(e){let n=sessionStorage.getItem("dematId"),r=sessionStorage.getItem("boId"),l=r&&"null"!==r?r:"";if(console.log(l),!n){console.error("Demat ID not found in session storage"),es("Demat ID is required to submit the form.");return}d(!0),es(null),em(null);try{var a,o,s,t,i,c,m,u,h,x,p,g,v,j,f;let r=e.nominees.length>0?(0,V.Ejk)(eU(e.nominees,n,l)):Promise.resolve({data:[]}),d=(0,V.XKN)({data:(Array.isArray(null===(o=e.poas)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.poaGpaBpaFlag)?e.poas[0].poaGpaBpaFlag:[]).map(r=>{var a,o,s,d,t,i,c,m,u,h;return{poaOrDdpiId:null===(o=e.poas)||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.poaId,poaCreationDate:(null===(d=e.poas)||void 0===d?void 0:null===(s=d[0])||void 0===s?void 0:s.poaSetupDate)?(0,D.GP)(e.poas[0].poaSetupDate,"yyyy-MM-dd"):"",poaToOperateAcc:"YES",poaEffectiveFromDate:(null===(i=e.poas)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.poaFromDate)?(0,D.GP)(e.poas[0].poaFromDate,"yyyy-MM-dd"):"",poaEffectiveToDate:(null===(m=e.poas)||void 0===m?void 0:null===(c=m[0])||void 0===c?void 0:c.poaToDate)?(0,D.GP)(e.poas[0].poaToDate,"yyyy-MM-dd"):"",poaLinkPurposeCode:null===(h=e.poas)||void 0===h?void 0:null===(u=h[0])||void 0===u?void 0:u.poaPurposeCode,poaNatureType:r,dematId:n.toString(),boId:l||""}})}),b=(0,V.XBA)({data:[eX(null==e?void 0:null===(s=e.holders)||void 0===s?void 0:s.firstHolder,n,1,l),...(null==e?void 0:e.addSecondHolder)&&(null==e?void 0:null===(t=e.holders)||void 0===t?void 0:t.secondHolder)?[eX(e.holders.secondHolder,n,2,l)]:[],...(null==e?void 0:e.addThirdHolder)&&(null==e?void 0:null===(i=e.holders)||void 0===i?void 0:i.thirdHolder)?[eX(e.holders.thirdHolder,n,3,l)]:[]]}),[N,y,C]=await Promise.all([r,d,b]);if(!eC(null==N?void 0:null===(c=N.data)||void 0===c?void 0:c.tokenValidity)||!eC(null==y?void 0:null===(m=y.data)||void 0===m?void 0:m.tokenValidity)||!eC(null==C?void 0:null===(u=C.data)||void 0===u?void 0:u.tokenValidity))return;let S=(e,n)=>Array.isArray(e)&&e.length===n&&e.every(e=>(null==e?void 0:e.status)===!0),M=e.nominees.length,A=Array.isArray(null===(x=e.poas)||void 0===x?void 0:null===(h=x[0])||void 0===h?void 0:h.poaGpaBpaFlag)?e.poas[0].poaGpaBpaFlag.length:0,w=1;e.addSecondHolder&&(null===(p=e.holders)||void 0===p?void 0:p.secondHolder)&&w++,e.addThirdHolder&&(null===(g=e.holders)||void 0===g?void 0:g.thirdHolder)&&w++;let P=(null==N?void 0:null===(v=N.data)||void 0===v?void 0:v.data)||[],I=(null==y?void 0:null===(j=y.data)||void 0===j?void 0:j.data)||[],H=(null==C?void 0:null===(f=C.data)||void 0===f?void 0:f.data)||[],F=S(P,M),B=S(I,A),T=S(H,w);if(C.data.data.every(e=>(null==e?void 0:e.status)===!0),!F||!B||!T){es("Some sections failed to save. Please try again."),eS({title:"Error",description:"Some sections failed to save. Please try again.",variant:"destructive"}),console.error("❌ Failed responses:",{nomineeRes:N,poaRes:y,holderRes:C});return}ey("nominee-poa",e)}catch(e){console.error("Error submitting nominee-poa form:",e),es("There was an error saving your information. Please try again.")}finally{d(!1)}}(0,a.useEffect)(()=>{el&&ev(eL())},[el,eL,eO.length,eO]),(0,a.useEffect)(()=>{if(eO&&eO.length>0&&100!==eO.reduce((e,n)=>e+(n.percentageShares||0),0)){let e=Math.floor(100/eO.length),n=100%eO.length;eO.forEach((r,l)=>{eP.setValue("nominees.".concat(l,".percentageShares"),e+(l<n?1:0))})}},[eO.length,eP,eO]),(0,a.useEffect)(()=>{eO&&eO.length>0?k(Math.max(0,100-eO.reduce((e,n)=>e+(n.percentageShares||0),0))):k(100)},[eO]),(0,a.useEffect)(()=>{"yes"===ek&&0===eB.length&&eD({poaId:"2205810000000202",poaSetupDate:new Date,poaFromDate:new Date,poaToDate:void 0,poaPurposeCode:"First Holder",poaRemarks:"for_payin",poaGpaBpaFlag:[]}),"no"===ek&&eB.length>0&&eT()},[eD,eB.length,eT,ek]);let e1=(0,a.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];if(e.message&&"string"==typeof e.message){let r=n.join(".");return"root"===n[n.length-1]?[]:[{path:r,message:"Required"===e.message?"This field is required.":e.message}]}return Array.isArray(e)?e.flatMap((e,r)=>e1(e,[...n,r])):"object"==typeof e?Object.entries(e).flatMap(e=>{let[r,l]=e;return e1(l,[...n,r])}):[]},[]),e5=(0,i.FH)({control:eP.control});return(0,a.useEffect)(()=>{if(!ej)return;let e=setTimeout(async()=>{await eP.trigger(),setTimeout(()=>{let e=e1(eP.formState.errors);console.log(e),eA(e)},10)},300);return()=>clearTimeout(e)},[e5,ej,eP,e1,eA]),(0,l.jsxs)("div",{className:"space-y-6 p-0",children:[(0,l.jsx)("div",{ref:eN,className:"sticky top-0 z-10 border-b pb-4 pt-4 px-2 shadow-lg backdrop-blur-md bg-white/30 rounded-xl",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Nominee & Power of Attorney"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Completion:"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:[eg.total,"%"]})]})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(J.k,{value:eg.total,className:"h-2"})}),(0,l.jsx)("div",{className:"mt-3 justify-center grid grid-cols-3 gap-2 text-xs",children:et.map(e=>(0,l.jsxs)("div",{className:"flex flex-col gap-2 justify-center items-center sm:flex-row mx-auto cursor-pointer ".concat(ex===e.id?"text-blue-600":"text-gray-500"),onClick:()=>eW(e.id),children:[(0,l.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center mb-1 ".concat(100===eg[e.id]?"bg-green-100 text-green-600":ex===e.id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"),children:100===eg[e.id]?(0,l.jsx)(x.A,{className:"w-4 h-4"}):e.icon}),(0,l.jsxs)("span",{className:"text-center text-xs",children:[e.title," (",eg[e.id],"%)"]})]},e.id))})]})}),(0,l.jsx)("div",{className:"max-w-6xl mx-auto px-0 m-0",children:n?(0,l.jsx)("div",{className:"flex items-center justify-center min-h-[300px] sm:min-h-[400px] w-full",children:(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-4 text-center",children:[(0,l.jsxs)("svg",{className:"w-16 h-16 text-blue-500 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-blue-700",children:"Loading your data..."}),(0,l.jsx)("p",{className:"text-sm text-blue-600",children:"We’re fetching your details. Please hold on a moment."})]})]})}):(0,l.jsxs)(l.Fragment,{children:[eo&&(0,l.jsxs)(E.Fc,{variant:"destructive",className:"mb-4",children:[(0,l.jsx)(p.A,{className:"h-4 w-4"}),(0,l.jsx)(E.XL,{children:"Error"}),(0,l.jsx)(E.TN,{children:eo})]}),ec&&(0,l.jsxs)(E.Fc,{className:"mb-4 bg-green-50 border-green-200 text-green-800",children:[(0,l.jsx)(x.A,{className:"h-4 w-4 text-green-500"}),(0,l.jsx)(E.XL,{children:"Success"}),(0,l.jsx)(E.TN,{children:ec})]}),(0,l.jsx)(A.lV,{...eP,children:(0,l.jsxs)("form",{onSubmit:eP.handleSubmit(e0),children:[(0,l.jsx)("div",{id:"holders",className:"scroll-mt-32",children:(0,l.jsxs)("div",{className:"border-gray-200 rounded-lg overflow-hidden shadow-lg border-0 bg-white/80 backdrop-blur",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 px-6 py-4 border-b border-blue-200",children:(0,l.jsxs)("h3",{className:"text-blue-800 flex items-center text-lg font-medium",children:[(0,l.jsx)(u.A,{className:"mr-2 h-5 w-5"}),"Holder Information"]})}),(0,l.jsxs)("div",{className:"p-6 space-y-6 bg-white",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("h3",{className:"font-semibold text-green-800 flex items-center",children:[(0,l.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Primary Holder (You)"]}),(0,l.jsx)(_.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Active"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,l.jsx)("p",{className:"font-medium",children:"ANISH DIPAK TELI"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-600",children:"PAN:"}),(0,l.jsx)("p",{className:"font-medium",children:"ABCDE1234F"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,l.jsx)("p",{className:"font-medium",children:"anish@example.com"})]})]})]}),(0,l.jsx)(z.w,{className:"my-4"}),(0,l.jsx)(A.zB,{control:eP.control,name:"addSecondHolder",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-lg bg-gray-50",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{checked:n.value,onCheckedChange:n.onChange})}),(0,l.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,l.jsx)(A.lR,{className:"font-medium",children:"Add Second Holder"}),(0,l.jsx)(A.Rr,{children:"Add a joint holder to this account (optional)"})]})]})}}),eE&&(0,l.jsxs)("div",{className:"space-y-4 p-4 border rounded-md border-blue-200 bg-blue-50/50",children:[(0,l.jsx)("h3",{className:"text-lg text-blue-800 font-medium ",children:"Second Holder Details"}),(0,l.jsx)(z.w,{className:"my-4"}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.name",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.name"),children:[(0,l.jsxs)(A.lR,{children:["Full Name ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Full name as per documents",...n})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.fatherName",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.fatherName"),children:[(0,l.jsx)(A.lR,{children:"Father's/ Husband's Name "}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Full name as per documents",...n})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.aadhar",render:e=>{let{field:n}=e,r=n.value&&12===n.value.length?"********"+n.value.slice(-4):n.value;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.aadhar"),children:[(0,l.jsxs)(A.lR,{children:["Aadhar Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Aadhar Number",value:r,onChange:e=>{let r=e.target.value.replace(/\D/g,"");r.length>12&&(r=r.slice(0,12)),n.onChange(r)},onFocus:e=>{/^\*{8}\d{4}$/.test(e.currentTarget.value)&&(e.currentTarget.value=n.value||"")},onBlur:e=>{var r;(null===(r=n.value)||void 0===r?void 0:r.length)===12&&(e.currentTarget.value="********"+n.value.slice(-4))},type:"text",inputMode:"numeric",maxLength:12})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.pan",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.pan"),children:[(0,l.jsxs)(A.lR,{children:["PAN Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"e.g., ABCDE1234F",...r,value:null!==(n=r.value)&&void 0!==n?n:"",onChange:e=>{let n=e.target.value.toUpperCase();r.onChange(n)},className:"uppercase"})}),(0,l.jsx)(A.Rr,{className:"text-xs",children:"PAN should be in format ABCDE1234F"}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.gender",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.gender"),children:[(0,l.jsxs)(A.lR,{children:["Gender ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("select",{...n,className:"w-full border border-input rounded-md h-10 px-3",children:[(0,l.jsx)("option",{value:"",children:"Select Gender"}),(0,l.jsx)("option",{value:"Male",children:"Male"}),(0,l.jsx)("option",{value:"Fmale",children:"Female"}),(0,l.jsx)("option",{value:"Other",children:"Other"})]})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)($.L,{ref:eM("holders.secondHolder.dob"),control:eP.control,name:"holders.secondHolder.dob",label:(0,l.jsxs)(l.Fragment,{children:["Date of Birth ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),placeholder:"Select holders Date of Birth",endYear:new Date().getFullYear()}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.nationality",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{className:"space-y-3",children:[(0,l.jsx)(A.lR,{children:"Nationality "}),(0,l.jsx)(W.Z,{field:{...r,value:null!==(n=r.value)&&void 0!==n?n:""},options:en,placeholder:"Select nationality"}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.email",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.email"),children:[(0,l.jsxs)(A.lR,{children:["Email ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Email address",type:"email",...r,value:null!==(n=r.value)&&void 0!==n?n:""})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.mobile",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.secondHolder.mobile"),children:[(0,l.jsxs)(A.lR,{children:["Mobile Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(A.zB,{control:eP.control,name:"holders.secondHolder.isdCode",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(I.l6,{onValueChange:r.onChange,defaultValue:null!==(n=r.value)&&void 0!==n?n:void 0,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{className:"w-[80px] rounded-r-none",children:(0,l.jsx)(I.yv,{placeholder:"ISD"})})}),(0,l.jsxs)(I.gC,{children:[(0,l.jsx)(I.eb,{value:"91",children:"+91"}),(0,l.jsx)(I.eb,{value:"1",children:"+1"}),(0,l.jsx)(I.eb,{value:"44",children:"+44"}),(0,l.jsx)(I.eb,{value:"61",children:"+61"}),(0,l.jsx)(I.eb,{value:"65",children:"+65"})]})]})}})}),(0,l.jsx)(w.p,{placeholder:"10-digit mobile number",...r,value:null!==(n=r.value)&&void 0!==n?n:"",maxLength:10,className:"rounded-l-none",onChange:e=>{let n=e.target.value.replace(/\D/g,"").slice(0,10);r.onChange(n)}})]})}),(0,l.jsx)(A.C5,{})]})}})]})]}),(0,l.jsx)(z.w,{className:"my-4"}),(0,l.jsx)(A.zB,{control:eP.control,name:"addThirdHolder",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{className:"flex flex-row items-start space-x-3 space-y-0 p-4 border rounded-lg bg-gray-50",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{checked:n.value,onCheckedChange:n.onChange,disabled:!eE})}),(0,l.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,l.jsx)(A.lR,{className:(0,T.cn)("font-medium",!eE&&"text-gray-400"),children:"Add Third Holder"}),(0,l.jsx)(A.Rr,{className:eE?"":"text-gray-400",children:eE?"Add a third holder to this account (optional)":"Add second holder first to enable this option"})]})]})}}),eE&&eq&&(0,l.jsxs)("div",{className:"space-y-4 p-4 border rounded-md border-blue-200 bg-blue-50/50",children:[(0,l.jsx)("h3",{className:"text-lg text-blue-800 font-medium ",children:"Third Holder Details"}),(0,l.jsx)(z.w,{className:"my-4"}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.name",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.thirdHolder.name"),children:[(0,l.jsxs)(A.lR,{children:["Full Name ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Full name as per documents",...n})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.fatherName",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{children:[(0,l.jsx)(A.lR,{children:"Father's/ Husband's Name"}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Full name as per documents",...n})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.aadhar",render:e=>{let{field:n}=e,r=n.value&&12===n.value.length?"********"+n.value.slice(-4):n.value;return(0,l.jsxs)(A.eI,{ref:eM("holders.thirdHolder.aadhar"),children:[(0,l.jsxs)(A.lR,{children:["Aadhar Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Aadhar Number",value:r,onChange:e=>{let r=e.target.value.replace(/\D/g,"");r.length>12&&(r=r.slice(0,12)),n.onChange(r)},onFocus:e=>{/^\*{8}\d{4}$/.test(e.currentTarget.value)&&(e.currentTarget.value=n.value||"")},onBlur:e=>{var r;(null===(r=n.value)||void 0===r?void 0:r.length)===12&&(e.currentTarget.value="********"+n.value.slice(-4))},type:"text",inputMode:"numeric",maxLength:12})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.pan",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.thirdHolder.pan"),children:[(0,l.jsxs)(A.lR,{children:["PAN Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"e.g., ABCDE1234F",...r,value:null!==(n=r.value)&&void 0!==n?n:"",onChange:e=>{let n=e.target.value.toUpperCase();r.onChange(n)},className:"uppercase"})}),(0,l.jsx)(A.Rr,{className:"text-xs",children:"PAN should be in format ABCDE1234F"}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.gender",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.thirdHolder.gender"),children:[(0,l.jsxs)(A.lR,{children:["Gender ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("select",{...n,className:"w-full border border-input rounded-md h-10 px-3",children:[(0,l.jsx)("option",{value:"",children:"Select Gender"}),(0,l.jsx)("option",{value:"Male",children:"Male"}),(0,l.jsx)("option",{value:"Fmale",children:"Female"}),(0,l.jsx)("option",{value:"Other",children:"Other"})]})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)($.L,{ref:eM("holders.thirdHolder.dob"),control:eP.control,name:"holders.thirdHolder.dob",label:(0,l.jsxs)(l.Fragment,{children:["Date of Birth ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),placeholder:"Select holders Date of Birth",endYear:new Date().getFullYear()}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.nationality",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{className:"space-y-3",children:[(0,l.jsx)(A.lR,{children:"Nationality "}),(0,l.jsx)(W.Z,{field:{...r,value:null!==(n=r.value)&&void 0!==n?n:""},options:en,placeholder:"Select nationality"}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.email",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.thirdHolder.email"),children:[(0,l.jsxs)(A.lR,{children:["Email ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Email address",type:"email",...r,value:null!==(n=r.value)&&void 0!==n?n:""})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.mobile",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("holders.thirdHolder.mobile"),children:[(0,l.jsxs)(A.lR,{children:["Mobile Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(A.zB,{control:eP.control,name:"holders.thirdHolder.isdCode",render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(I.l6,{onValueChange:r.onChange,defaultValue:null!==(n=r.value)&&void 0!==n?n:void 0,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{className:"w-[80px] rounded-r-none",children:(0,l.jsx)(I.yv,{placeholder:"ISD"})})}),(0,l.jsxs)(I.gC,{children:[(0,l.jsx)(I.eb,{value:"91",children:"+91"}),(0,l.jsx)(I.eb,{value:"1",children:"+1"}),(0,l.jsx)(I.eb,{value:"44",children:"+44"}),(0,l.jsx)(I.eb,{value:"61",children:"+61"}),(0,l.jsx)(I.eb,{value:"65",children:"+65"})]})]})}})}),(0,l.jsx)(w.p,{placeholder:"10-digit mobile number",...r,value:null!==(n=r.value)&&void 0!==n?n:"",maxLength:10,className:"rounded-l-none",onChange:e=>{let n=e.target.value.replace(/\D/g,"").slice(0,10);r.onChange(n)}})]})}),(0,l.jsx)(A.C5,{})]})}})]})]})]})]})}),(0,l.jsx)("div",{id:"nominee",className:"scroll-mt-32 mt-8",children:(0,l.jsxs)("div",{className:"border-gray-200 rounded-lg overflow-hidden shadow-lg border-0 bg-white/80 backdrop-blur",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 px-6 py-4 border-b border-blue-200",children:[(0,l.jsxs)("h3",{className:"text-blue-800 flex items-center text-lg font-medium",children:[(0,l.jsx)(u.A,{className:"mr-2 h-5 w-5 text-blue-600"}),"Nominee Information"]}),(0,l.jsx)("p",{className:"text-blue-700/70 text-sm mt-1",children:"Add up to 3 nominees who will receive your holdings in the event of your demise"})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6 bg-white",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"wishToNominate",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{className:"space-y-3",children:[(0,l.jsx)(A.lR,{className:"text-lg font-medium",children:"Do you wish to add nominees?"}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)(P.z,{onValueChange:n.onChange,value:n.value,className:"flex space-x-6",children:[(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(P.C,{value:"yes"})}),(0,l.jsx)(A.lR,{className:"font-normal cursor-pointer",children:"Yes, I want to add nominees"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(P.C,{value:"no"})}),(0,l.jsx)(A.lR,{className:"font-normal cursor-pointer",children:"No, skip for now"})]})]})}),(0,l.jsx)(A.C5,{})]})}}),"yes"===eR?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-4 rounded-lg border border-amber-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(g.A,{className:"h-5 w-5 text-amber-600"}),(0,l.jsx)("span",{className:"font-medium text-amber-800",children:"Share Distribution"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"text-sm text-amber-700",children:["Remaining: ",c,"%"]}),(0,l.jsx)(_.E,{variant:0===c?"default":"destructive",className:0===c?"bg-green-500":"",children:0===c?"Complete":"Incomplete"})]})]})}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-medium text-gray-800",children:["Nominees (",eI.length,"/3)"]}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Add up to 3 nominees"})]}),(0,l.jsxs)(M.$,{type:"button",variant:"outline",size:"sm",onClick:eZ,disabled:eI.length>=3,className:"flex items-center gap-1 border-blue-300 text-blue-700 hover:bg-blue-50",children:[(0,l.jsx)(v.A,{className:"h-4 w-4"}),"Add Nominee"]})]}),0===eI.length&&(0,l.jsxs)("div",{className:"text-center py-10 border border-dashed rounded-md bg-gray-50 border-gray-300",children:[(0,l.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,l.jsx)("p",{className:"text-gray-500 mb-2",children:"No nominees added yet"}),(0,l.jsxs)(M.$,{type:"button",variant:"outline",size:"sm",onClick:eZ,className:"mt-2 border-blue-300 text-blue-700 hover:bg-blue-50",children:[(0,l.jsx)(v.A,{className:"h-4 w-4 mr-1"}),"Add Your First Nominee"]})]}),eI.map((e,n)=>{let r=eO[n],a=U[n],o=(null==r?void 0:r.isMinor)||!1,s=eP.watch("nominees.".concat(n,".dob")),d=eP.watch("nominees.".concat(n,".isMinor")),t=!!s&&(()=>{let e=new Date,n=e.getFullYear()-s.getFullYear(),r=e.getMonth()-s.getMonth(),l=e.getDate()-s.getDate();return(r<0||0===r&&l<0)&&n--,n<18})(),i=t||d;return(0,l.jsx)("div",{className:(0,T.cn)("border transition-all rounded-lg p-4 mb-4",o?"border-blue-300 bg-blue-50/30":"border-gray-200"),children:(0,l.jsxs)(K.Nt,{open:a,onOpenChange:()=>e$(n),children:[(0,l.jsx)(K.R6,{asChild:!0,children:(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4 cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:(0,T.cn)("w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold",o?"bg-blue-500":"bg-purple-500"),children:n+1}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-lg font-medium",children:[(null==r?void 0:r.name)||"Nominee ".concat(n+1),o&&(0,l.jsxs)(_.E,{className:"ml-2 bg-blue-100 text-blue-800 hover:bg-transparent",children:[(0,l.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"Minor"]})]}),(0,l.jsxs)("div",{className:"text-sm",children:["Share: ",(null==r?void 0:r.percentageShares)||0,"%",(null==r?void 0:r.relationWithBo)&&" • ".concat(r.relationWithBo)]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(M.$,{type:"button",variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),eF(n)},className:"text-red-600 hover:text-red-800",children:(0,l.jsx)(f.A,{className:"h-4 w-4"})}),a?(0,l.jsx)(b.A,{className:"h-5 w-5"}):(0,l.jsx)(N.A,{className:"h-5 w-5"})]})]})}),(0,l.jsx)(K.Ke,{children:(0,l.jsxs)("div",{className:"pt-0 space-y-6",children:[(0,l.jsx)(z.w,{className:"my-4"}),(0,l.jsxs)("div",{className:"ml-6",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".name"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".name")),children:[(0,l.jsxs)(A.lR,{children:["Full Name ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Full name",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".fatherName"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".fatherName")),children:[(0,l.jsxs)(A.lR,{children:["Father's / Husband's Name ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Father's / Husband's Name",...r})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".pan"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".pan")),children:[(0,l.jsxs)(A.lR,{children:["PAN Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"PAN Number",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".email"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".email")),children:[(0,l.jsxs)(A.lR,{children:["Email ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Email",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".mobile"),render:e=>{var r;let{field:a}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".mobile")),children:[(0,l.jsxs)(A.lR,{children:["Mobile Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".isdCode"),render:e=>{var n;let{field:r}=e;return(0,l.jsxs)(I.l6,{onValueChange:r.onChange,defaultValue:null!==(n=r.value)&&void 0!==n?n:void 0,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{className:"w-[80px] rounded-r-none",children:(0,l.jsx)(I.yv,{placeholder:"ISD"})})}),(0,l.jsxs)(I.gC,{children:[(0,l.jsx)(I.eb,{value:"91",children:"+91"}),(0,l.jsx)(I.eb,{value:"1",children:"+1"}),(0,l.jsx)(I.eb,{value:"44",children:"+44"}),(0,l.jsx)(I.eb,{value:"61",children:"+61"}),(0,l.jsx)(I.eb,{value:"65",children:"+65"})]})]})}})}),(0,l.jsx)(w.p,{placeholder:"10-digit mobile number",...a,value:null!==(r=a.value)&&void 0!==r?r:"",maxLength:10,className:"rounded-l-none",onChange:e=>{let n=e.target.value.replace(/\D/g,"").slice(0,10);a.onChange(n)}})]})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".gender"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".gender")),children:[(0,l.jsxs)(A.lR,{children:["Gender ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("select",{...r,className:"w-full border border-input rounded-md h-10 px-3",children:[(0,l.jsx)("option",{value:"",children:"Select Gender"}),(0,l.jsx)("option",{value:"Male",children:"Male"}),(0,l.jsx)("option",{value:"Fmale",children:"Female"}),(0,l.jsx)("option",{value:"Other",children:"Other"})]})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)($.L,{ref:eM("nominees.".concat(n,".dob")),control:eP.control,name:"nominees.".concat(n,".dob"),label:(0,l.jsxs)(l.Fragment,{children:["Date of Birth ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),endYear:new Date().getFullYear(),onDateSelect:e=>{if(e){let r=new Date,l=r.getFullYear()-e.getFullYear(),a=r.getMonth()-e.getMonth(),o=r.getDate()-e.getDate();(a<0||0===a&&o<0)&&l--;let s=l<18;eP.setValue("nominees.".concat(n,".isMinor"),s)}}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".relationWithBo"),render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{children:[(0,l.jsxs)(A.lR,{children:["Relation with BO ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)(I.l6,{onValueChange:n.onChange,value:n.value||void 0,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{children:(0,l.jsx)(I.yv,{placeholder:"Select relation"})})}),(0,l.jsx)(I.gC,{children:ee.map(e=>(0,l.jsx)(I.eb,{value:e,children:e},e))})]}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".proofType"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".proofType")),children:[(0,l.jsxs)(A.lR,{children:["Proof Type ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)(I.l6,{onValueChange:r.onChange,value:r.value||void 0,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{children:(0,l.jsx)(I.yv,{placeholder:"Select proof type"})})}),(0,l.jsxs)(I.gC,{children:[(0,l.jsx)(I.eb,{value:"uid",children:"Aadhaar"}),(0,l.jsx)(I.eb,{value:"passport",children:"Passport"}),(0,l.jsx)(I.eb,{value:"driving_license",children:"Driving License"}),(0,l.jsx)(I.eb,{value:"voter_id",children:"Voter ID"})]})]}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".proofNumber"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".proofNumber")),children:[(0,l.jsxs)(A.lR,{children:["Proof Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Proof number",...r})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 mt-4",children:(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".address"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".address")),children:[(0,l.jsxs)(A.lR,{children:["Address ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(Y.T,{placeholder:"Flat/House No., Building Name",...r})}),(0,l.jsx)(A.C5,{})]})}})}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".stateCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".stateCode")),children:[(0,l.jsxs)(A.lR,{children:["State ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"State",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".pinCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".pinCode")),children:[(0,l.jsxs)(A.lR,{children:["Pincode ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"6-digit pincode",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".countryCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".countryCode")),children:[(0,l.jsxs)(A.lR,{children:["Country ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Country",...r})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".percentageShares"),render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{className:"mt-4",children:[(0,l.jsx)(A.lR,{children:"Percentage Shares"}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(O,{value:[n.value||100],onValueChange:e=>n.onChange(e[0]),max:100,step:1,className:"w-full"}),(0,l.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[n.value||100,"%"]})]})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsx)("div",{className:"mt-4 p-4 border rounded-lg",children:(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".isMinor"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{className:"flex flex-row items-center justify-between",ref:eM("nominees.".concat(n,".isMinor")),children:[(0,l.jsxs)("div",{className:"space-y-0.5",children:[(0,l.jsx)(A.lR,{className:"text-base",children:"Is Minor Nominee?"}),(0,l.jsx)(A.Rr,{children:t?"You cannot change this because DOB indicates the nominee is a minor.":"Toggle this if the nominee is a minor (under 18 years old)"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(G.d,{checked:t||r.value,disabled:t,onCheckedChange:e=>{let r=eP.getValues("nominees.".concat(n,".dob"));if(!r)return;let l=new Date,a=l.getFullYear()-r.getFullYear(),o=l.getMonth()-r.getMonth(),s=l.getDate()-r.getDate();if((o<0||0===o&&s<0)&&a--,!(a<18)){if(eP.setValue("nominees.".concat(n,".isMinor"),e),e){let e=eP.getValues("nominees.".concat(n,".guardian"));e&&e.name||eP.setValue("nominees.".concat(n,".guardian"),{name:"",dob:void 0,isdCode:"91",mobile:"",email:"",address:"",relationWithMinorNominee:"Spouse",countryCode:"",stateCode:"",pinCode:"",fatherName:"",gender:"Other",pan:"",aadhar:""})}else eP.setValue("nominees.".concat(n,".guardian"),void 0)}}})})]})}})}),i&&(0,l.jsxs)("div",{className:"mt-6 p-4 border rounded-lg bg-blue-50 ",children:[(0,l.jsxs)("h5",{className:"font-medium mb-4 text-blue-800 flex items-center ",children:[(0,l.jsx)(h.A,{className:"h-4 w-4 mr-2"})," Guardian Details (Required for Minor Nominee)"]}),(0,l.jsx)(z.w,{className:"my-4"}),(0,l.jsxs)("div",{className:"ml-6",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.name"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.name")),children:[(0,l.jsxs)(A.lR,{children:["Guardian Name ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Full name",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.fatherName"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.fatherName")),children:[(0,l.jsxs)(A.lR,{children:["Father's / Husband's Name ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Father's / Husband's Name",...r})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.pan"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.pan")),children:[(0,l.jsxs)(A.lR,{children:["PAN Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"PAN Number",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.aadhar"),render:e=>{let{field:r}=e,a=r.value&&12===r.value.length?"********"+r.value.slice(-4):r.value;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.aadhar")),children:[(0,l.jsxs)(A.lR,{children:["Aadhar Number ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"As per fetched",value:a,onChange:e=>{let n=e.target.value.replace(/\D/g,"");n.length>12&&(n=n.slice(0,12)),r.onChange(n)},onFocus:e=>{/^\*{8}\d{4}$/.test(e.currentTarget.value)&&(e.currentTarget.value=r.value||"")},onBlur:e=>{var n;(null===(n=r.value)||void 0===n?void 0:n.length)===12&&(e.currentTarget.value="********"+r.value.slice(-4))},type:"text",inputMode:"numeric",maxLength:12})}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.email"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.email")),children:[(0,l.jsx)(A.lR,{children:"Guardian Email (Optional)"}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"email@example.com",type:"email",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.mobile"),render:e=>{var r;let{field:a}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.mobile")),children:[(0,l.jsx)(A.lR,{children:"Guardian Mobile (Optional)"}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"10-digit mobile",...a,value:null!==(r=a.value)&&void 0!==r?r:""})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.relationWithMinorNominee"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.relationWithMinorNominee")),children:[(0,l.jsxs)(A.lR,{children:["Relation with Minor Nominee ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)(I.l6,{onValueChange:r.onChange,value:r.value||void 0,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{children:(0,l.jsx)(I.yv,{placeholder:"Select relation"})})}),(0,l.jsx)(I.gC,{children:ee.map(e=>(0,l.jsx)(I.eb,{value:e,children:e},e))})]}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.gender"),render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{children:[(0,l.jsxs)(A.lR,{children:["Gender ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)("select",{...n,className:"w-full border border-input rounded-md h-10 px-3 bg-transparent",children:[(0,l.jsx)("option",{value:"",children:"Select Gender"}),(0,l.jsx)("option",{value:"Male",children:"Male"}),(0,l.jsx)("option",{value:"Fmale",children:"Female"}),(0,l.jsx)("option",{value:"Other",children:"Other"})]})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)($.L,{ref:eM("nominees.".concat(n,".guardian.dob")),control:eP.control,name:"nominees.".concat(n,".guardian.dob"),label:(0,l.jsxs)(l.Fragment,{children:["Guardian Date of Birth ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),placeholder:"Select your Guardian Date of Birth"})]}),(0,l.jsx)("div",{className:"grid gap-4 sm:grid-cols-1 mt-4",children:(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.address"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.address")),children:[(0,l.jsxs)(A.lR,{children:["Address ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(Y.T,{placeholder:"Flat/House No., Building Name",...r})}),(0,l.jsx)(A.C5,{})]})}})}),(0,l.jsxs)("div",{className:"grid gap-4 sm:grid-cols-3 mt-4",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.stateCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.stateCode")),children:[(0,l.jsxs)(A.lR,{children:["State ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"State",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.pinCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.pinCode")),children:[(0,l.jsxs)(A.lR,{children:["Pincode ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"6-digit pincode",...r})}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"nominees.".concat(n,".guardian.countryCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("nominees.".concat(n,".guardian.countryCode")),children:[(0,l.jsxs)(A.lR,{children:["Country ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsx)(A.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Country",...r})}),(0,l.jsx)(A.C5,{})]})}})]})]}),(0,l.jsx)("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:(0,l.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,l.jsx)("strong",{children:"Note:"})," Guardian details are mandatory for nominees under 18 years of age."]})})]})]})})]})},e.id)})]}):null]})]})}),(0,l.jsx)("div",{id:"poa",className:"scroll-mt-32",children:(0,l.jsxs)("div",{className:"border-gray-200 rounded-lg overflow-hidden shadow-lg border-0 bg-white/80 backdrop-blur mt-8",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 px-6 py-4 border-b border-blue-200",children:[(0,l.jsxs)("h3",{className:"text-blue-800 flex items-center text-lg font-medium",children:[(0,l.jsx)(h.A,{className:"mr-2 h-5 w-5 text-blue-600"}),"Power of Attorney"]}),(0,l.jsx)("p",{className:"text-blue-700/70 text-sm mt-1",children:"Add power of attorney details if applicable"})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6 bg-white",children:[(0,l.jsxs)(E.Fc,{className:"bg-amber-50 border-amber-200",children:[(0,l.jsx)(y.A,{className:"h-4 w-4 text-amber-600"}),(0,l.jsx)(E.XL,{className:"text-amber-800",children:"Information"}),(0,l.jsx)(E.TN,{className:"text-amber-700",children:"Power of Attorney (POA) gives another person the authority to make decisions about your investments. Only add a POA if you want to delegate this authority."})]}),(0,l.jsxs)("div",{className:"space-y-5 border rounded-md p-5 mt-4 border-gray-200 bg-gray-50",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"wishToPOA",render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{className:"space-y-3",children:[(0,l.jsx)(A.lR,{className:"text-gray-700 font-medium",children:"Do you wish to POA?"}),(0,l.jsx)(A.MJ,{children:(0,l.jsxs)(P.z,{onValueChange:n.onChange,defaultValue:n.value,className:"flex space-x-4",children:[(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(P.C,{value:"yes"})}),(0,l.jsx)(A.lR,{className:"font-normal",children:"Yes"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(P.C,{value:"no"})}),(0,l.jsx)(A.lR,{className:"font-normal",children:"No"})]})]})}),(0,l.jsx)(A.C5,{})]})}}),"yes"===ek?(0,l.jsx)("div",{className:"space-y-6",children:eB.map((e,n)=>(0,l.jsxs)("div",{className:"border rounded-lg p-4 mb-4",children:[(0,l.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"poas.".concat(n,".poaId"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("poas.".concat(n,".poaId")),children:[(0,l.jsxs)(A.lR,{className:"text-gray-700",children:["POA ID ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)(I.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{className:"border-gray-300",children:(0,l.jsx)(I.yv,{placeholder:"Select POA ID"})})}),(0,l.jsxs)(I.gC,{children:[(0,l.jsx)(I.eb,{value:"2205810000000202",children:"2205810000000202"}),(0,l.jsx)(I.eb,{value:"2205810000000050",children:"2205810000000050"})]})]}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"poas.".concat(n,".poaSetupDate"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{className:"flex flex-col",ref:eM("poas.".concat(n,".poaSetupDate")),children:[(0,l.jsxs)(A.lR,{className:"text-gray-700",children:["Setup/POA Creation Date ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)(H.AM,{children:[(0,l.jsx)(H.Wv,{asChild:!0,children:(0,l.jsx)(A.MJ,{children:(0,l.jsxs)(M.$,{variant:"outline",className:(0,T.cn)("w-full pl-3 text-left font-normal border-gray-300",!r.value&&"text-muted-foreground"),children:[r.value?(0,D.GP)(r.value,"PPP"):(0,l.jsx)("span",{children:"Pick a date"}),(0,l.jsx)(C.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,l.jsx)(H.hl,{className:"w-auto p-0",align:"start",children:(0,l.jsx)(F.V,{mode:"single",selected:r.value,onSelect:r.onChange,initialFocus:!0})})]}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2 mt-5",children:[(0,l.jsx)($.L,{ref:eM("poas.".concat(n,".poaFromDate")),control:eP.control,name:"poas.".concat(n,".poaFromDate"),label:(0,l.jsxs)(l.Fragment,{children:["From Date ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),placeholder:"Select your POA From Date"}),(0,l.jsx)($.L,{ref:eM("poas.".concat(n,".poaToDate")),control:eP.control,name:"poas.".concat(n,".poaToDate"),label:(0,l.jsx)(l.Fragment,{children:"To Date"}),placeholder:"Select your POA To Date"})]}),(0,l.jsxs)("div",{className:"grid gap-5 sm:grid-cols-2 mt-5",children:[(0,l.jsx)(A.zB,{control:eP.control,name:"poas.".concat(n,".poaPurposeCode"),render:e=>{let{field:r}=e;return(0,l.jsxs)(A.eI,{ref:eM("poas.".concat(n,".poaPurposeCode")),children:[(0,l.jsxs)(A.lR,{className:"text-gray-700",children:["POA Purpose Code ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)(I.l6,{onValueChange:r.onChange,defaultValue:r.value,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{className:"border-gray-300",children:(0,l.jsx)(I.yv,{placeholder:"Select purpose code"})})}),(0,l.jsxs)(I.gC,{children:[(0,l.jsx)(I.eb,{value:"First Holder",children:"First Holder"}),(0,l.jsx)(I.eb,{value:"Second Holder",children:"Second Holder"}),(0,l.jsx)(I.eb,{value:"Third Holder",children:"Third Holder"}),(0,l.jsx)(I.eb,{value:"All Holders",children:"All Holders"})]})]}),(0,l.jsx)(A.C5,{})]})}}),(0,l.jsx)(A.zB,{control:eP.control,name:"poas.".concat(n,".poaRemarks"),render:e=>{let{field:n}=e;return(0,l.jsxs)(A.eI,{children:[(0,l.jsx)(A.lR,{className:"text-gray-700",children:"Remarks"}),(0,l.jsxs)(I.l6,{onValueChange:n.onChange,defaultValue:n.value,children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(I.bq,{className:"border-gray-300",children:(0,l.jsx)(I.yv,{placeholder:"Select remarks"})})}),(0,l.jsx)(I.gC,{children:(0,l.jsx)(I.eb,{value:"for_payin",children:"For Payin"})})]}),(0,l.jsx)(A.C5,{})]})}})]}),(0,l.jsx)(A.zB,{control:eP.control,name:"poas.".concat(n,".poaGpaBpaFlag"),render:e=>{var r,a,o,s,d,t;let{field:i}=e;return(0,l.jsxs)(A.eI,{ref:eM("poas.".concat(n,".poaGpaBpaFlag")),children:[(0,l.jsxs)(A.lR,{className:"text-gray-700",children:["GPA/BPA Flag ",(0,l.jsx)("span",{className:"text-red-500 font-bold text-lg",children:"*"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0 bg-white p-3 rounded-md border border-gray-200",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{id:"checkbox_POA_GPA",checked:null===(r=i.value)||void 0===r?void 0:r.includes("General purpose"),onCheckedChange:e=>{let n=i.value||[];e?i.onChange([...n,"General purpose"]):i.onChange(n.filter(e=>"General purpose"!==e))}})}),(0,l.jsx)(A.lR,{htmlFor:"checkbox_POA_GPA",className:"font-normal",children:"General purpose"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0 bg-white p-3 rounded-md border border-gray-200",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{id:"checkbox_POA_BPA",checked:null===(a=i.value)||void 0===a?void 0:a.includes("Bank Specific"),onCheckedChange:e=>{let n=i.value||[];e?i.onChange([...n,"Bank Specific"]):i.onChange(n.filter(e=>"Bank Specific"!==e))}})}),(0,l.jsx)(A.lR,{htmlFor:"checkbox_POA_BPA",className:"font-normal",children:"Bank Specific"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0 bg-white p-3 rounded-md border border-gray-200",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{id:"checkbox_POA_Settlement",checked:null===(o=i.value)||void 0===o?void 0:o.includes("Settlement"),onCheckedChange:e=>{let n=i.value||[];e?i.onChange([...n,"Settlement"]):i.onChange(n.filter(e=>"Settlement"!==e))}})}),(0,l.jsx)(A.lR,{htmlFor:"checkbox_POA_Settlement",className:"font-normal",children:"Settlement"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0 bg-white p-3 rounded-md border border-gray-200",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{id:"checkbox_POA_MarginPledge",checked:null===(s=i.value)||void 0===s?void 0:s.includes("Margin Pledge"),onCheckedChange:e=>{let n=i.value||[];e?i.onChange([...n,"Margin Pledge"]):i.onChange(n.filter(e=>"Margin Pledge"!==e))}})}),(0,l.jsx)(A.lR,{htmlFor:"checkbox_POA_MarginPledge",className:"font-normal",children:"Margin Pledge"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0 bg-white p-3 rounded-md border border-gray-200",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{id:"checkbox_POA_MutualFund",checked:null===(d=i.value)||void 0===d?void 0:d.includes("Mutual Fund"),onCheckedChange:e=>{let n=i.value||[];e?i.onChange([...n,"Mutual Fund"]):i.onChange(n.filter(e=>"Mutual Fund"!==e))}})}),(0,l.jsx)(A.lR,{htmlFor:"checkbox_POA_MutualFund",className:"font-normal",children:"Mutual Fund"})]}),(0,l.jsxs)(A.eI,{className:"flex items-center space-x-2 space-y-0 bg-white p-3 rounded-md border border-gray-200",children:[(0,l.jsx)(A.MJ,{children:(0,l.jsx)(q.S,{id:"checkbox_POA_Shares",checked:null===(t=i.value)||void 0===t?void 0:t.includes("Tender Offer"),onCheckedChange:e=>{let n=i.value||[];e?i.onChange([...n,"Tender Offer"]):i.onChange(n.filter(e=>"Tender Offer"!==e))}})}),(0,l.jsx)(A.lR,{htmlFor:"checkbox_POA_Shares",className:"font-normal",children:"Tender Offer"})]})]}),(0,l.jsx)(A.Rr,{className:"mt-2 text-gray-600",children:"You can select up to 2 options"}),(0,l.jsx)(A.C5,{})]})}})]},e.id))}):null]})]})]})}),(0,l.jsxs)(Z.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex justify-between items-center mt-6",children:[(0,l.jsx)(X.j,{variant:"ghost"}),(0,l.jsx)(M.$,{type:"submit",className:"w-full sm:w-auto transition-all hover:scale-105 font-medium px-8 py-2.5 text-base bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-600",disabled:s,onClick:e=>{console.log("Submit button clicked directly"),console.log("Current form state:",{isValid:eP.formState.isValid,isDirty:eP.formState.isDirty,errors:eP.formState.errors}),ef(!0)},children:s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing..."]}):"Verify & Continue"})]})]})})]})})]})}var em=r(76046);function eu(){let{setCurrentStep:e,handleDigioReturn:n,updateStepStatus:r,state:t}=(0,o.b)(),i=(0,em.useSearchParams)(),c=(0,em.useRouter)();return(0,a.useEffect)(()=>{e("nominee-poa")},[e]),(0,a.useEffect)(()=>{let e=i.get("status"),r=i.get("sessionId");e&&r&&(n("nominee-poa","success"===e?"success":"failure"),c.replace("/kyc/nominee-poa"))},[i,n,c]),(0,a.useEffect)(()=>{let{steps:e}=t;"completed"!==e["nominee-poa"]||localStorage.getItem("kyc_nominee-poa_form")||r("nominee-poa","not_started")},[t,r]),(0,l.jsxs)("div",{className:"container mx-auto px-0 py-8 max-w-7xl",children:[(0,l.jsx)(d.A,{}),(0,l.jsx)("div",{className:"mt-8",children:(0,l.jsx)(s.Zp,{className:"border-none shadow-md",children:(0,l.jsx)(s.Wu,{className:"m-0 p-0 shadow-xl rounded-xl backdrop-blur sm:p-4",children:(0,l.jsx)(ec,{})})})})]})}},27685:(e,n,r)=>{"use strict";r.d(n,{j:()=>i});var l=r(95155),a=r(87364),o=r(73312),s=r(24672),d=r(76046),t=r(27461);function i(e){var n;let{className:r="",variant:i="outline",size:c="default",disabled:m=!1,type:u="button"}=e,{navigateToPreviousStep:h,getPreviousStep:x}=(0,s.b)(),{setErrors:p}=(0,t.Z)(),g=(null===(n=(0,d.usePathname)().split("/").pop())||void 0===n?void 0:n.replace(".html",""))||"",v=x(g);return v&&"signin"!==g?(0,l.jsxs)(o.$,{type:u,variant:i,size:c,onClick:()=>{m||(h(),p([]))},disabled:m,className:"flex items-center gap-2 ".concat(r),children:[(0,l.jsx)(a.A,{className:"h-4 w-4"}),"Back to ",v.replace("-"," ")]}):null}},25121:(e,n,r)=>{"use strict";r.d(n,{E:()=>d});var l=r(95155);r(12115);var a=r(31027),o=r(21567);let s=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:n,variant:r,...a}=e;return(0,l.jsx)("div",{className:(0,o.cn)(s({variant:r}),n),...a})}},49956:(e,n,r)=>{"use strict";r.d(n,{Ke:()=>s,Nt:()=>a,R6:()=>o});var l=r(71585);let a=l.bL,o=l.R6,s=l.Ke},46754:(e,n,r)=>{"use strict";r.d(n,{T:()=>s});var l=r(95155),a=r(12115),o=r(21567);let s=a.forwardRef((e,n)=>{let{className:r,...a}=e;return(0,l.jsx)("textarea",{className:(0,o.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...a})});s.displayName="Textarea"}},e=>{var n=n=>e(e.s=n);e.O(0,[1181,8526,8562,164,2589,8007,9526,4015,8417,6527,7518,5427,7733,6678,9636,6135,9200,6137,4672,9741,9096,4635,8441,1517,7358],()=>n(82245)),_N_E=e.O()}]);